/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1e3:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(505))&&"object"==typeof r&&"default"in r?r.default:r,c=n(1001),h=n(557),f=n(506),component=n(556),l=n(1002),d=o.SDK_VERSION,v=function(){function t(t){this.uid=t}return t.prototype.t=function(){return null!=this.uid},t.prototype.i=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.u=new t("google-credentials-uid"),t.s=new t("first-party-uid"),t}(),y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},m=function(t){function i(e,i){var n=t.call(this,i)||this;return n.code=e,n.message=i,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return c.__extends(i,t),i}(Error),w=function(t,e){this.user=e,this.type="OAuth",this.o={},this.o.Authorization="Bearer "+t},I=function(){function t(){this.h=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.l=function(){},t.prototype.v=function(t){hn(!this.h,"Can only call setChangeListener() once."),this.h=t,t(v.UNAUTHENTICATED)},t.prototype.m=function(){hn(null!==this.h,"removeChangeListener() when no listener registered"),this.h=null},t}(),E=function(){function t(t){var e=this;this.g=null,this.currentUser=v.UNAUTHENTICATED,this.p=!1,this._=0,this.h=null,this.forceRefresh=!1,this.g=function(){e._++,e.currentUser=e.I(),e.p=!0,e.h&&e.h(e.currentUser)},this._=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.g):(this.g(null),t.get().then((function(t){e.auth=t,e.g&&e.auth.addAuthTokenListener(e.g)}),(function(){})))}return t.prototype.getToken=function(){var t=this;hn(null!=this.g,"getToken cannot be called after listener removed.");var e=this._,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((function(i){if(t._!==e)throw new m(y.ABORTED,"getToken aborted due to token change.");return i?(hn("string"==typeof i.accessToken,"Invalid tokenData returned from getToken():"+i),new w(i.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.l=function(){this.forceRefresh=!0},t.prototype.v=function(t){hn(!this.h,"Can only call setChangeListener() once."),this.h=t,this.p&&t(this.currentUser)},t.prototype.m=function(){hn(null!=this.g,"removeChangeListener() called twice"),hn(null!==this.h,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.g),this.g=null,this.h=null},t.prototype.I=function(){var t=this.auth&&this.auth.getUid();return hn(null===t||"string"==typeof t,"Received invalid UID: "+t),new v(t)},t}(),_=function(){function t(t,e){this.T=t,this.D=e,this.type="FirstParty",this.user=v.s}return Object.defineProperty(t.prototype,"o",{get:function(){var t={"X-Goog-AuthUser":this.D},e=this.T.auth.R([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),T=function(){function t(t,e){this.T=t,this.D=e}return t.prototype.getToken=function(){return Promise.resolve(new _(this.T,this.D))},t.prototype.v=function(t){t(v.s)},t.prototype.m=function(){},t.prototype.l=function(){},t}();function A(t){if(!t)return new I;switch(t.type){case"gapi":var e=t.S;return hn(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new T(e,t.D||"0");case"provider":return t.S;default:throw new m(y.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function N(t,e){function i(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new m(y.INVALID_ARGUMENT,t)}return i.prototype=t.prototype,Object.assign(i,t),i}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k(t,e){return void 0!==t?t:e}function O(t,e){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Number(i);isNaN(n)||e(n,t[i])}}function D(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(i,t[i])}function R(t){for(var e in hn(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function C(t,e){if(0!==e.length)throw new m(y.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Q(e.length,"argument")+".")}function P(t,e,i){if(e.length!==i)throw new m(y.INVALID_ARGUMENT,"Function "+t+"() requires "+Q(i,"argument")+", but was called with "+Q(e.length,"argument")+".")}function x(t,e,i){if(e.length<i)throw new m(y.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Q(i,"argument")+", but was called with "+Q(e.length,"argument")+".")}function q(t,e,i,n){if(e.length<i||e.length>n)throw new m(y.INVALID_ARGUMENT,"Function "+t+"() requires between "+i+" and "+n+" arguments, but was called with "+Q(e.length,"argument")+".")}function L(t,e,i,n){if(!(e instanceof Array)||e.length<n)throw new m(y.INVALID_ARGUMENT,"Function "+t+"() requires its "+i+" argument to be an array with at least "+Q(n,"element")+".")}function M(t,e,i,n){G(t,e,X(i)+" argument",n)}function U(t,e,i,n){void 0!==n&&M(t,e,i,n)}function j(t,e,i,n){G(t,e,i+" option",n)}function F(t,e,i,n){void 0!==n&&j(t,e,i,n)}function V(t,e,i,n,r){void 0!==n&&function(t,e,i,n,r){for(var u=[],s=0,o=r;s<o.length;s++){var c=o[s];if(c===n)return;u.push(H(c))}var h=H(n);throw new m(y.INVALID_ARGUMENT,"Invalid value "+h+" provided to function "+t+'() for option "'+i+'". Acceptable values: '+u.join(", "))}(t,0,i,n,r)}function B(t,e,i,n){if(!e.some((function(t){return t===n})))throw new m(y.INVALID_ARGUMENT,"Invalid value "+H(n)+" provided to function "+t+"() for its "+X(i)+" argument. Acceptable values: "+e.join(", "))}function G(t,e,i,n){if(!("object"===e?z(n):"non-empty string"===e?"string"==typeof n&&""!==n:typeof n===e)){var r=H(n);throw new m(y.INVALID_ARGUMENT,"Function "+t+"() requires its "+i+" to be of type "+e+", but it was: "+r)}}function z(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function H(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":cn("Unknown wrong type: "+typeof t)}function K(t,e,i){if(void 0===i)throw new m(y.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+X(e)+" argument, but it was undefined.")}function W(t,e,i){D(e,(function(e,n){if(i.indexOf(e)<0)throw new m(y.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+i.join(", "))}))}function J(t,e,i,n){var r=H(n);return new m(y.INVALID_ARGUMENT,"Function "+t+"() requires its "+X(i)+" argument to be a "+e+", but it was: "+r)}function Y(t,e,i){if(i<=0)throw new m(y.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+X(e)+" argument to be a positive number, but it was: "+i+".")}function X(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Q(t,e){return t+" "+e+(1===t?"":"s")}var rt=function(){function t(t){this.A=t}return t.fromBase64String=function(e){return new t(nn.C().atob(e))},t.fromUint8Array=function(e){return new t($(e))},t.prototype.toBase64=function(){return nn.C().btoa(this.A)},t.prototype.toUint8Array=function(){return Z(this.A)},t.prototype.P=function(){return 2*this.A.length},t.prototype.isEqual=function(t){return this.A===t.A},t.k=new t(""),t}();function $(t){for(var e="",i=0;i<t.length;++i)e+=String.fromCharCode(t[i]);return e}function Z(t){for(var e=new Uint8Array(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}function tt(){if("undefined"==typeof Uint8Array)throw new m(y.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function et(){if(!nn.C().N)throw new m(y.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var nt=function(){function t(t){et(),this.A=t}return t.fromBase64String=function(e){P("Blob.fromBase64String",arguments,1),M("Blob.fromBase64String","string",1,e),et();try{var i=nn.C().atob(e);return new t(i)}catch(t){throw new m(y.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(P("Blob.fromUint8Array",arguments,1),tt(),!(e instanceof Uint8Array))throw J("Blob.fromUint8Array","Uint8Array",1,e);var i=$(e);return new t(i)},t.prototype.toBase64=function(){return P("Blob.toBase64",arguments,0),et(),nn.C().btoa(this.A)},t.prototype.toUint8Array=function(){P("Blob.toUint8Array",arguments,0),tt();var t=Z(this.A);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.A===t.A},t.prototype.O=function(){return 2*this.A.length},t.prototype.F=function(t){return ln(this.A,t.A)},t}(),it=N(nt,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ot=function(){function t(t,e){if(P("GeoPoint",arguments,2),M("GeoPoint","number",1,t),M("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new m(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new m(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.V=t,this.U=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.V},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.U},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.V===t.V&&this.U===t.U},t.prototype.F=function(t){return ln(this.V,t.V)||ln(this.U,t.U)},t}(),st=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new m(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new m(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new m(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new m(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var i=Math.floor(e/1e3);return new t(i,1e6*(e-1e3*i))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.F=function(t){return this.seconds===t.seconds?ln(this.nanoseconds,t.nanoseconds):ln(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),dt=function(){function t(t){this.timestamp=t}return t.j=function(e){var i=Math.floor(e/1e6);return new t(new st(i,e%1e6*1e3))},t.L=function(e){return new t(e)},t.q=function(){return t.MIN},t.prototype.B=function(t){return this.timestamp.F(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.M=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t.MIN=new t(new st(0,0)),t}(),at=function(){function t(t,e,i){void 0===e?e=0:e>t.length&&cn("offset "+e+" out of range "+t.length),void 0===i?i=t.length-e:i>t.length-e&&cn("length "+i+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=i}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.W(this,e)},t.prototype.child=function(e){var i=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){i.push(t)})):i.push(e),this.K(i)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.H=function(t){return t=void 0===t?1:t,hn(this.length>=t,"Can't call popFirst() with less segments"),this.K(this.segments,this.offset+t,this.length-t)},t.prototype.J=function(){return hn(!this.Y(),"Can't call popLast() on empty path"),this.K(this.segments,this.offset,this.length-1)},t.prototype.X=function(){return hn(!this.Y(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.$=function(){return this.get(this.length-1)},t.prototype.get=function(t){return hn(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.Y=function(){return 0===this.length},t.prototype.Z=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.tt=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])},t.prototype.nt=function(){return this.segments.slice(this.offset,this.limit())},t.W=function(t,e){for(var i=Math.min(t.length,e.length),n=0;n<i;n++){var r=t.get(n),u=e.get(n);if(r<u)return-1;if(r>u)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ut=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(i,t),i.prototype.K=function(t,e,n){return new i(t,e,n)},i.prototype.it=function(){return this.nt().join("/")},i.prototype.toString=function(){return this.it()},i.et=function(t){if(t.indexOf("//")>=0)throw new m(y.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new i(t.split("/").filter((function(t){return t.length>0})))},i.rt=new i([]),i}(at),ct=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ht=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(i,t),i.prototype.K=function(t,e,n){return new i(t,e,n)},i.ut=function(t){return ct.test(t)},i.prototype.it=function(){return this.nt().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),i.ut(t)||(t="`"+t+"`"),t})).join(".")},i.prototype.toString=function(){return this.it()},i.prototype.st=function(){return 1===this.length&&"__name__"===this.get(0)},i.ot=function(){return new i(["__name__"])},i.ht=function(t){for(var e=[],n="",r=0,u=function(){if(0===n.length)throw new m(y.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},s=!1;r<t.length;){var o=t[r];if("\\"===o){if(r+1===t.length)throw new m(y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[r+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new m(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,r+=2}else"`"===o?(s=!s,r++):"."!==o||s?(n+=o,r++):(u(),r++)}if(u(),s)throw new m(y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new i(e)},i.rt=new i([]),i}(at),ft=function(){function t(e){this.path=e,hn(t.ct(e),"Invalid DocumentKey with an odd number of segments: "+e.nt().join("/"))}return t.prototype.at=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ut.W(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.W=function(t,e){return ut.W(t.path,e.path)},t.ct=function(t){return t.length%2==0},t.ft=function(e){return new t(new ut(e.slice()))},t.lt=function(e){return new t(ut.et(e))},t.EMPTY=new t(new ut([])),t}(),lt=function(){function t(t,e){this.W=t,this.root=e||vt.EMPTY}return t.prototype.dt=function(e,i){return new t(this.W,this.root.dt(e,i,this.W).copy(null,null,vt.vt,null,null))},t.prototype.remove=function(e){return new t(this.W,this.root.remove(e,this.W).copy(null,null,vt.vt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.Y();){var i=this.W(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,i=this.root;!i.Y();){var n=this.W(t,i.key);if(0===n)return e+i.left.size;n<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1},t.prototype.Y=function(){return this.root.Y()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.wt=function(){return this.root.wt()},t.prototype.gt=function(){return this.root.gt()},t.prototype.bt=function(t){return this.root.bt(t)},t.prototype.forEach=function(t){this.bt((function(e,i){return t(e,i),!1}))},t.prototype.toString=function(){var t=[];return this.bt((function(e,i){return t.push(e+":"+i),!1})),"{"+t.join(", ")+"}"},t.prototype.pt=function(t){return this.root.pt(t)},t.prototype.yt=function(){return new pt(this.root,null,this.W,!1)},t.prototype._t=function(t){return new pt(this.root,t,this.W,!1)},t.prototype.It=function(){return new pt(this.root,null,this.W,!0)},t.prototype.Tt=function(t){return new pt(this.root,t,this.W,!0)},t}(),pt=function(){function t(t,e,i,n){this.Et=n,this.Dt=[];for(var r=1;!t.Y();)if(r=e?i(t.key,e):1,n&&(r*=-1),r<0)t=this.Et?t.left:t.right;else{if(0===r){this.Dt.push(t);break}this.Dt.push(t),t=this.Et?t.right:t.left}}return t.prototype.Rt=function(){hn(this.Dt.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.Y();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.Y();)this.Dt.push(t),t=t.left;return e},t.prototype.St=function(){return this.Dt.length>0},t.prototype.At=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),vt=function(){function t(e,i,n,r,u){this.key=e,this.value=i,this.color=null!=n?n:t.RED,this.left=null!=r?r:t.EMPTY,this.right=null!=u?u:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,i,n,r,u){return new t(null!=e?e:this.key,null!=i?i:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=u?u:this.right)},t.prototype.Y=function(){return!1},t.prototype.bt=function(t){return this.left.bt(t)||t(this.key,this.value)||this.right.bt(t)},t.prototype.pt=function(t){return this.right.pt(t)||t(this.key,this.value)||this.left.pt(t)},t.prototype.min=function(){return this.left.Y()?this:this.left.min()},t.prototype.wt=function(){return this.min().key},t.prototype.gt=function(){return this.right.Y()?this.key:this.right.gt()},t.prototype.dt=function(t,e,i){var n=this,r=i(t,n.key);return(n=r<0?n.copy(null,null,null,n.left.dt(t,e,i),null):0===r?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.dt(t,e,i))).Ct()},t.prototype.Pt=function(){if(this.left.Y())return t.EMPTY;var e=this;return e.left.kt()||e.left.left.kt()||(e=e.Nt()),(e=e.copy(null,null,null,e.left.Pt(),null)).Ct()},t.prototype.remove=function(e,i){var n,r=this;if(i(e,r.key)<0)r.left.Y()||r.left.kt()||r.left.left.kt()||(r=r.Nt()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.kt()&&(r=r.Ot()),r.right.Y()||r.right.kt()||r.right.left.kt()||(r=r.Ft()),0===i(e,r.key)){if(r.right.Y())return t.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Pt())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.Ct()},t.prototype.kt=function(){return this.color},t.prototype.Ct=function(){var t=this;return t.right.kt()&&!t.left.kt()&&(t=t.Vt()),t.left.kt()&&t.left.left.kt()&&(t=t.Ot()),t.left.kt()&&t.right.kt()&&(t=t.Ut()),t},t.prototype.Nt=function(){var t=this.Ut();return t.right.left.kt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Ot())).Vt()).Ut()),t},t.prototype.Ft=function(){var t=this.Ut();return t.left.left.kt()&&(t=(t=t.Ot()).Ut()),t},t.prototype.Vt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Ot=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ut=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.xt=function(){var t=this.jt();return Math.pow(2,t)<=this.size+1},t.prototype.jt=function(){if(this.kt()&&this.left.kt())throw cn("Red node has red child("+this.key+","+this.value+")");if(this.right.kt())throw cn("Right child of ("+this.key+","+this.value+") is red");var t=this.left.jt();if(t!==this.right.jt())throw cn("Black depths differ");return t+(this.kt()?0:1)},t.EMPTY=null,t.RED=!0,t.vt=!1,t}(),yt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw cn("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw cn("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw cn("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw cn("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw cn("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,i,n,r){return this},t.prototype.dt=function(t,e,i){return new vt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.Y=function(){return!0},t.prototype.bt=function(t){return!1},t.prototype.pt=function(t){return!1},t.prototype.wt=function(){return null},t.prototype.gt=function(){return null},t.prototype.kt=function(){return!1},t.prototype.xt=function(){return!0},t.prototype.jt=function(){return 0},t}();vt.EMPTY=new yt;var mt=function(){function t(t){this.W=t,this.data=new lt(this.W)}return t.Lt=function(e){var i=new t(e.W);return e.forEach((function(t){i=i.add(t)})),i},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.wt()},t.prototype.last=function(){return this.data.gt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.bt((function(e,i){return t(e),!1}))},t.prototype.qt=function(t,e){for(var i=this.data._t(t[0]);i.St();){var n=i.Rt();if(this.W(n.key,t[1])>=0)return;e(n.key)}},t.prototype.Bt=function(t,e){var i;for(i=void 0!==e?this.data._t(e):this.data.yt();i.St();)if(!t(i.Rt().key))return},t.prototype.Mt=function(t){var e=this.data._t(t);return e.St()?e.Rt().key:null},t.prototype.yt=function(){return new gt(this.data.yt())},t.prototype._t=function(t){return new gt(this.data._t(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).dt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.Y=function(){return this.data.Y()},t.prototype.Qt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var i=this.data.yt(),n=e.data.yt();i.St();){var r=i.Rt().key,u=n.Rt().key;if(0!==this.W(r,u))return!1}return!0},t.prototype.nt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var i=new t(this.W);return i.data=e,i},t}(),gt=function(){function t(t){this.Gt=t}return t.prototype.Rt=function(){return this.Gt.Rt().key},t.prototype.St=function(){return this.Gt.St()},t}(),wt=function(){function t(){}return t.prototype.Wt=function(t,e){return new zt(e,t)},t.prototype.zt=function(t,e){return e},t.prototype.Kt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),bt=function(){function t(t){this.elements=t}return t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.zt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=_t(t),i=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},n=0,r=this.elements;n<r.length;n++)i(r[n]);return new Xt(e)},t.prototype.Kt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&pn(e.elements,this.elements)},t}(),It=function(){function t(t){this.elements=t}return t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.zt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=_t(t),i=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},n=0,r=this.elements;n<r.length;n++)i(r[n]);return new Xt(e)},t.prototype.Kt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&pn(e.elements,this.elements)},t}(),Et=function(){function t(t){this.Ht=t}return t.prototype.Wt=function(t,e){var i=this.Kt(t);if(i instanceof Vt&&this.Ht instanceof Vt){var n=i.Jt+this.Ht.Jt;return new Vt(n)}return n=i.Jt+this.Ht.Jt,new qt(n)},t.prototype.zt=function(t,e){return hn(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.Kt=function(t){return t instanceof jt?t:new Vt(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.Ht.isEqual(e.Ht)},t}();function _t(t){return t instanceof Xt?t.Jt.slice():[]}var Tt=function(){function t(t){this.fields=t}return t.Yt=function(e){return new t(e)},t.Xt=function(e){var i=new mt(ht.W);return e.forEach((function(t){return i=i.add(t)})),new t(i)},t.prototype.$t=function(t){var e=!1;return this.fields.forEach((function(i){i.Z(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),At=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Nt=function(t,e){this.version=t,this.transformResults=e},St=function(){function t(t,e){this.updateTime=t,this.exists=e,hn(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Zt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.tn=function(t){return void 0!==this.updateTime?t instanceof $t&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof $t:(hn(this.Zt,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,i=t.updateTime,!((null!=e?!i||!e.isEqual(i):e!==i)||this.exists!==t.exists);var e,i},t.NONE=new t,t}(),kt=function(){function t(){}return t.prototype.nn=function(t){null!=t&&hn(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.in=function(t){return t instanceof $t?t.version:dt.MIN},t}(),Ot=function(t){function i(e,i,n){var r=t.call(this)||this;return r.key=e,r.value=i,r.en=n,r.type=0,r}return c.__extends(i,t),i.prototype.zt=function(t,e){this.nn(t),hn(null==e.transformResults,"Transform results received by SetMutation.");var i=e.version;return new $t(this.key,i,{hasCommittedMutations:!0},this.value)},i.prototype.Wt=function(t,e,i){if(this.nn(t),!this.en.tn(t))return t;var n=kt.in(t);return new $t(this.key,n,{rn:!0},this.value)},i.prototype.un=function(t){return null},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.en.isEqual(t.en)},i}(kt),Dt=function(t){function i(e,i,n,r){var u=t.call(this)||this;return u.key=e,u.data=i,u.sn=n,u.en=r,u.type=1,u}return c.__extends(i,t),i.prototype.zt=function(t,e){if(this.nn(t),hn(null==e.transformResults,"Transform results received by PatchMutation."),!this.en.tn(t))return new te(this.key,e.version);var i=this.on(t);return new $t(this.key,e.version,{hasCommittedMutations:!0},i)},i.prototype.Wt=function(t,e,i){if(this.nn(t),!this.en.tn(t))return t;var n=kt.in(t),r=this.on(t);return new $t(this.key,n,{rn:!0},r)},i.prototype.un=function(t){return null},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&this.sn.isEqual(t.sn)&&this.en.isEqual(t.en)},i.prototype.on=function(t){var e;return e=t instanceof $t?t.data():Jt.EMPTY,this.hn(e)},i.prototype.hn=function(t){var e=this,i=t.cn();return this.sn.fields.forEach((function(t){if(!t.Y()){var n=e.data.field(t);null!==n?i.set(t,n):i.delete(t)}})),i.an()},i}(kt),Rt=function(t){function i(e,i){var n=t.call(this)||this;return n.key=e,n.fieldTransforms=i,n.type=2,n.en=St.exists(!0),n}return c.__extends(i,t),i.prototype.zt=function(t,e){if(this.nn(t),hn(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.en.tn(t))return new te(this.key,e.version);var i=this.fn(t),n=this.ln(t,e.transformResults),r=e.version,u=this.dn(i.data(),n);return new $t(this.key,r,{hasCommittedMutations:!0},u)},i.prototype.Wt=function(t,e,i){if(this.nn(t),!this.en.tn(t))return t;var n=this.fn(t),r=this.vn(i,t,e),u=this.dn(n.data(),r);return new $t(this.key,n.version,{rn:!0},u)},i.prototype.un=function(t){for(var e=null,i=0,n=this.fieldTransforms;i<n.length;i++){var r=n[i],u=t instanceof $t?t.field(r.field):void 0,s=r.transform.Kt(u||null);null!=s&&(e=null==e?Jt.wn().set(r.field,s):e.set(r.field,s))}return e?e.an():null},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&pn(this.fieldTransforms,t.fieldTransforms)&&this.en.isEqual(t.en)},i.prototype.fn=function(t){return hn(t instanceof $t,"Unknown MaybeDocument type "+t),hn(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},i.prototype.ln=function(t,e){var i=[];hn(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var n=0;n<e.length;n++){var r=this.fieldTransforms[n],u=r.transform,s=null;t instanceof $t&&(s=t.field(r.field)),i.push(u.zt(s,e[n]))}return i},i.prototype.vn=function(t,e,i){for(var n=[],r=0,u=this.fieldTransforms;r<u.length;r++){var s=u[r],o=s.transform,c=null;e instanceof $t&&(c=e.field(s.field)),null===c&&i instanceof $t&&(c=i.field(s.field)),n.push(o.Wt(c,t))}return n},i.prototype.dn=function(t,e){hn(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var i=t.cn(),n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;i.set(r,e[n])}return i.an()},i}(kt),Ct=function(t){function i(e,i){var n=t.call(this)||this;return n.key=e,n.en=i,n.type=3,n}return c.__extends(i,t),i.prototype.zt=function(t,e){return this.nn(t),hn(null==e.transformResults,"Transform results received by DeleteMutation."),new Zt(this.key,e.version,{hasCommittedMutations:!0})},i.prototype.Wt=function(t,e,i){return this.nn(t),this.en.tn(t)?(t&&hn(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Zt(this.key,dt.q())):t},i.prototype.un=function(t){return null},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&this.en.isEqual(t.en)},i}(kt),Pt=function(t){function i(e,i){var n=t.call(this)||this;return n.key=e,n.en=i,n.type=4,n}return c.__extends(i,t),i.prototype.zt=function(t,e){cn("VerifyMutation should only be used in Transactions.")},i.prototype.Wt=function(t,e,i){cn("VerifyMutation should only be used in Transactions.")},i.prototype.un=function(t){cn("VerifyMutation should only be used in Transactions.")},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&this.en.isEqual(t.en)},i}(kt),xt=function(){function t(t,e){this.mn=t,this.timestampsInSnapshots=e}return t.gn=function(e,i){switch(e.serverTimestamps){case"estimate":return new t(1,i);case"previous":return new t(2,i);case"none":case void 0:return new t(0,i);default:return cn("fromSnapshotOptions() called with invalid options.")}},t}(),Lt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.bn=function(t){return hn(this.pn!==t.pn,"Default compareTo should not be used for values of same type."),ln(this.pn,t.pn)},t}(),Mt=function(t){function i(){var e=t.call(this)||this;return e.pn=0,e.Jt=null,e}return c.__extends(i,t),i.prototype.value=function(t){return null},i.prototype.isEqual=function(t){return t instanceof i},i.prototype.B=function(t){return t instanceof i?0:this.bn(t)},i.prototype.P=function(){return 4},i.yn=new i,i}(Lt),Ut=function(t){function i(e){var i=t.call(this)||this;return i.Jt=e,i.pn=1,i}return c.__extends(i,t),i.prototype.value=function(t){return this.Jt},i.prototype.isEqual=function(t){return t instanceof i&&this.Jt===t.Jt},i.prototype.B=function(t){return t instanceof i?ln(this.Jt,t.Jt):this.bn(t)},i.prototype.P=function(){return 4},i.of=function(t){return t?i._n:i.In},i._n=new i(!0),i.In=new i(!1),i}(Lt),jt=function(t){function i(e){var i=t.call(this)||this;return i.Jt=e,i.pn=2,i}return c.__extends(i,t),i.prototype.value=function(t){return this.Jt},i.prototype.B=function(t){return t instanceof i?(e=this.Jt)<(n=t.Jt)?-1:e>n?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1:this.bn(t);var e,n},i.prototype.P=function(){return 8},i}(Lt);function Ft(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Vt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(i,t),i.prototype.isEqual=function(t){return t instanceof i&&Ft(this.Jt,t.Jt)},i}(jt),qt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(i,t),i.prototype.isEqual=function(t){return t instanceof i&&Ft(this.Jt,t.Jt)},i.Tn=new i(NaN),i.POSITIVE_INFINITY=new i(1/0),i.NEGATIVE_INFINITY=new i(-1/0),i}(jt),Bt=function(t){function i(e){var i=t.call(this)||this;return i.Jt=e,i.pn=4,i}return c.__extends(i,t),i.prototype.value=function(t){return this.Jt},i.prototype.isEqual=function(t){return t instanceof i&&this.Jt===t.Jt},i.prototype.B=function(t){return t instanceof i?ln(this.Jt,t.Jt):this.bn(t)},i.prototype.P=function(){return 2*this.Jt.length},i}(Lt),Gt=function(t){function i(e){var i=t.call(this)||this;return i.Jt=e,i.pn=3,i}return c.__extends(i,t),i.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Jt:this.Jt.toDate()},i.prototype.isEqual=function(t){return t instanceof i&&this.Jt.isEqual(t.Jt)},i.prototype.B=function(t){return t instanceof i?this.Jt.F(t.Jt):t instanceof zt?-1:this.bn(t)},i.prototype.P=function(){return 16},i}(Lt),zt=function(t){function i(e,i){var n=t.call(this)||this;return n.En=e,n.previousValue=i,n.pn=3,n}return c.__extends(i,t),i.prototype.value=function(t){return t&&1===t.mn?new Gt(this.En).value(t):t&&2===t.mn&&this.previousValue?this.previousValue.value(t):null},i.prototype.isEqual=function(t){return t instanceof i&&this.En.isEqual(t.En)},i.prototype.B=function(t){return t instanceof i?this.En.F(t.En):t instanceof Gt?1:this.bn(t)},i.prototype.toString=function(){return"<ServerTimestamp localTime="+this.En.toString()+">"},i.prototype.P=function(){return 16+(this.previousValue?this.previousValue.P():0)},i}(Lt),Ht=function(t){function i(e){var i=t.call(this)||this;return i.Jt=e,i.pn=5,i}return c.__extends(i,t),i.prototype.value=function(t){return this.Jt},i.prototype.isEqual=function(t){return t instanceof i&&this.Jt.isEqual(t.Jt)},i.prototype.B=function(t){return t instanceof i?this.Jt.F(t.Jt):this.bn(t)},i.prototype.P=function(){return this.Jt.O()},i}(Lt),Kt=function(t){function i(e,i){var n=t.call(this)||this;return n.Dn=e,n.key=i,n.pn=6,n}return c.__extends(i,t),i.prototype.value=function(t){return this.key},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&this.Dn.isEqual(t.Dn)},i.prototype.B=function(t){if(t instanceof i){var e=this.Dn.B(t.Dn);return 0!==e?e:ft.W(this.key,t.key)}return this.bn(t)},i.prototype.P=function(){return this.Dn.projectId.length+this.Dn.database.length+this.key.toString().length},i}(Lt),Wt=function(t){function i(e){var i=t.call(this)||this;return i.Jt=e,i.pn=7,i}return c.__extends(i,t),i.prototype.value=function(t){return this.Jt},i.prototype.isEqual=function(t){return t instanceof i&&this.Jt.isEqual(t.Jt)},i.prototype.B=function(t){return t instanceof i?this.Jt.F(t.Jt):this.bn(t)},i.prototype.P=function(){return 16},i}(Lt),Jt=function(t){function i(e){var i=t.call(this)||this;return i.Jt=e,i.pn=9,i}return c.__extends(i,t),i.wn=function(){return new Yt(i.EMPTY.Jt)},i.prototype.value=function(t){var e={};return this.Jt.bt((function(i,n){e[i]=n.value(t)})),e},i.prototype.forEach=function(t){this.Jt.bt(t)},i.prototype.isEqual=function(t){if(t instanceof i){for(var e=this.Jt.yt(),n=t.Jt.yt();e.St()&&n.St();){var r=e.Rt(),u=n.Rt();if(r.key!==u.key||!r.value.isEqual(u.value))return!1}return!e.St()&&!n.St()}return!1},i.prototype.B=function(t){if(t instanceof i){for(var e=this.Jt.yt(),n=t.Jt.yt();e.St()&&n.St();){var r=e.Rt(),u=n.Rt(),s=ln(r.key,u.key)||r.value.B(u.value);if(s)return s}return ln(e.St(),n.St())}return this.bn(t)},i.prototype.contains=function(t){return null!==this.field(t)},i.prototype.field=function(t){hn(!t.Y(),"Can't get field of empty path");var e=this;return t.forEach((function(t){e=e instanceof i?e.Jt.get(t):null})),e},i.prototype.sn=function(){var t=new mt(ht.W);return this.Jt.forEach((function(e,n){var r=new ht([e]);if(n instanceof i){var u=n.sn().fields;u.Y()?t=t.add(r):u.forEach((function(e){t=t.add(r.child(e))}))}else t=t.add(r)})),Tt.Yt(t)},i.prototype.P=function(){var t=0;return this.Jt.bt((function(e,i){t+=e.length+i.P()})),t},i.prototype.toString=function(){return this.Jt.toString()},i.prototype.cn=function(){return new Yt(this.Jt)},i.EMPTY=new i(new lt(ln)),i}(Lt),Yt=function(){function t(t){this.Jt=t}return t.prototype.set=function(t,e){hn(!t.Y(),"Cannot set field for empty path on ObjectValue");var i=t.X();if(1===t.length)this.Jt=this.Jt.dt(i,e);else{var n=this.Jt.get(i),r=(n instanceof Jt?n:Jt.EMPTY).cn().set(t.H(),e).an();this.Jt=this.Jt.dt(i,r)}return this},t.prototype.delete=function(t){hn(!t.Y(),"Cannot delete field for empty path on ObjectValue");var e=t.X();if(1===t.length)this.Jt=this.Jt.remove(e);else{var i=this.Jt.get(e);if(i instanceof Jt){var n=i.cn().delete(t.H()).an();this.Jt=this.Jt.dt(t.X(),n)}}return this},t.prototype.an=function(){return new Jt(this.Jt)},t}(),Xt=function(t){function i(e){var i=t.call(this)||this;return i.Jt=e,i.pn=8,i}return c.__extends(i,t),i.prototype.value=function(t){return this.Jt.map((function(e){return e.value(t)}))},i.prototype.contains=function(t){for(var e=0,i=this.Jt;e<i.length;e++)if(i[e].isEqual(t))return!0;return!1},i.prototype.forEach=function(t){this.Jt.forEach(t)},i.prototype.isEqual=function(t){if(t instanceof i){if(this.Jt.length!==t.Jt.length)return!1;for(var e=0;e<this.Jt.length;e++)if(!this.Jt[e].isEqual(t.Jt[e]))return!1;return!0}return!1},i.prototype.B=function(t){if(t instanceof i){for(var e=Math.min(this.Jt.length,t.Jt.length),n=0;n<e;n++){var r=this.Jt[n].B(t.Jt[n]);if(r)return r}return ln(this.Jt.length,t.Jt.length)}return this.bn(t)},i.prototype.P=function(){return this.Jt.reduce((function(t,e){return t+e.P()}),0)},i.prototype.toString=function(){return"["+this.Jt.map((function(t){return t.toString()})).join(",")+"]"},i}(Lt),Qt=function(){function t(t,e){this.key=t,this.version=e}return t.Rn=function(t,e){return ft.W(t.key,e.key)},t}(),$t=function(t){function i(e,i,n,r,u,s){var o=t.call(this,e,i)||this;return o.Sn=r,o.proto=u,o.converter=s,hn(void 0!==o.Sn||void 0!==o.proto&&void 0!==o.converter,"If objectValue is not defined, proto and converter need to be set."),o.rn=!!n.rn,o.hasCommittedMutations=!!n.hasCommittedMutations,o}return c.__extends(i,t),i.prototype.field=function(t){if(this.Sn)return this.Sn.field(t);this.An||(this.An=new Map);var e=t.it(),i=this.An.get(e);if(void 0===i){var n=this.Cn(t);i=void 0===n?null:this.converter(n),this.An.set(e,i)}return i},i.prototype.data=function(){var t=this;if(!this.Sn){var e=Jt.wn();D(this.proto.fields||{},(function(i,n){e.set(new ht([i]),t.converter(n))})),this.Sn=e.an(),this.An=void 0}return this.Sn},i.prototype.value=function(){return this.data().value()},i.prototype.isEqual=function(t){return t instanceof i&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.rn===t.rn&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},i.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.rn+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.rn||this.hasCommittedMutations},enumerable:!0,configurable:!0}),i.prototype.Cn=function(t){hn(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.X()]:void 0,i=1;i<t.length;++i){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(i)]}return e},i.Pn=function(t,e,i){var n=e.field(t),r=i.field(t);return null!==n&&null!==r?n.B(r):cn("Trying to compare documents on fields that don't exist")},i}(Qt),Zt=function(t){function i(e,i,n){var r=t.call(this,e,i)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}return c.__extends(i,t),i.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),i.prototype.isEqual=function(t){return t instanceof i&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},i}(Qt),te=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(i,t),i.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.isEqual=function(t){return t instanceof i&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},i}(Qt);function ee(t){return null==t}function ne(t){return-0===t&&1/t==-1/0}function re(t){return"number"==typeof t&&Number.isInteger(t)&&!ne(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ie,oe,se=function(){function t(t,e,i,n,r,u,s){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===u&&(u=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=n,this.limit=r,this.startAt=u,this.endAt=s,this.kn=null}return t.prototype.canonicalId=function(){if(null===this.kn){var t=this.path.it();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,i=this.filters;e<i.length;e++)t+=i[e].canonicalId(),t+=",";t+="|ob:";for(var n=0,r=this.orderBy;n<r.length;n++)t+=r[n].canonicalId(),t+=",";ee(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.kn=t}return this.kn},t.prototype.toString=function(){var t=this.path.it();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),ee(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Nn=function(){return ft.ct(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),ae=function(){function t(t,e,i,n,r,u,s,o){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===u&&(u="F"),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.On=i,this.filters=n,this.limit=r,this.Fn=u,this.startAt=s,this.endAt=o,this.Vn=null,this.Un=null,this.startAt&&this.xn(this.startAt),this.endAt&&this.xn(this.endAt)}return t.jn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.Vn){var t=this.Ln(),e=this.qn();if(null!==t&&null===e)t.st()?this.Vn=[ge]:this.Vn=[new me(t),ge];else{hn(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.Vn=[];for(var i=!1,n=0,r=this.On;n<r.length;n++){var u=r[n];this.Vn.push(u),u.field.st()&&(i=!0)}if(!i){var s=this.On.length>0?this.On[this.On.length-1].dir:ve.ASCENDING;this.Vn.push(s===ve.ASCENDING?ge:we)}}}return this.Vn},enumerable:!0,configurable:!0}),t.prototype.Bn=function(e){hn(null==this.Ln()||!(e instanceof ce)||!e.Mn()||e.field.isEqual(this.Ln()),"Query must only have one inequality field."),hn(!this.Nn(),"No filtering allowed for document query");var i=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.On.slice(),i,this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Qn=function(e){hn(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var i=this.On.concat([e]);return new t(this.path,this.collectionGroup,i,this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Gn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Wn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.zn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,e,this.endAt)},t.prototype.Kn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,e)},t.prototype.Hn=function(e){return new t(e,null,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Jn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.On.length||1===this.On.length&&this.On[0].field.st())},t.prototype.canonicalId=function(){return this.Yn().canonicalId()+"|lt:"+this.Fn},t.prototype.toString=function(){return"Query(target="+this.Yn().toString()+"; limitType="+this.Fn+")"},t.prototype.isEqual=function(t){return this.Yn().isEqual(t.Yn())&&this.Fn===t.Fn},t.prototype.Xn=function(t,e){for(var i=!1,n=0,r=this.orderBy;n<r.length;n++){var u=r[n],s=u.compare(t,e);if(0!==s)return s;i=i||u.field.st()}return hn(i,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.$n(t)&&this.Zn(t)&&this.ti(t)&&this.ni(t)},t.prototype.ii=function(){return!ee(this.limit)&&"F"===this.Fn},t.prototype.ei=function(){return!ee(this.limit)&&"L"===this.Fn},t.prototype.qn=function(){return this.On.length>0?this.On[0].field:null},t.prototype.Ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var i=e[t];if(i instanceof ce&&i.Mn())return i.field}return null},t.prototype.ri=function(t){for(var e=0,i=this.filters;e<i.length;e++){var n=i[e];if(n instanceof ce&&t.indexOf(n.op)>=0)return n.op}return null},t.prototype.Nn=function(){return this.Yn().Nn()},t.prototype.ui=function(){return null!==this.collectionGroup},t.prototype.Yn=function(){if(!this.Un)if("F"===this.Fn)this.Un=new se(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,i=this.orderBy;e<i.length;e++){var n=i[e],r=n.dir===ve.DESCENDING?ve.ASCENDING:ve.DESCENDING;t.push(new me(n.field,r))}var u=this.endAt?new ye(this.endAt.position,!this.endAt.before):null,s=this.startAt?new ye(this.startAt.position,!this.startAt.before):null;this.Un=new se(this.path,this.collectionGroup,t,this.filters,this.limit,u,s)}return this.Un},t.prototype.$n=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.at(this.collectionGroup)&&this.path.Z(e):ft.ct(this.path)?this.path.isEqual(e):this.path.tt(e)},t.prototype.Zn=function(t){for(var e=0,i=this.On;e<i.length;e++){var n=i[e];if(!n.field.st()&&null===t.field(n.field))return!1}return!0},t.prototype.ti=function(t){for(var e=0,i=this.filters;e<i.length;e++)if(!i[e].matches(t))return!1;return!0},t.prototype.ni=function(t){return!(this.startAt&&!this.startAt.si(this.orderBy,t)||this.endAt&&this.endAt.si(this.orderBy,t))},t.prototype.xn=function(t){hn(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),ue=function(){function t(t){this.name=t}return t.et=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return cn("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),ce=function(t){function i(e,i,n){var r=t.call(this)||this;return r.field=e,r.op=i,r.value=n,r}return c.__extends(i,t),i.create=function(t,e,n){if(t.st())return e===ue.IN?(hn(n instanceof Xt,"Comparing on key with IN, but filter value not an ArrayValue"),hn(n.Jt.every((function(t){return t instanceof Kt})),"Comparing on key with IN, but an array value was not a RefValue"),new fe(t,n)):(hn(n instanceof Kt,"Comparing on key, but filter value not a RefValue"),hn(e!==ue.ARRAY_CONTAINS&&e!==ue.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new he(t,e,n));if(n.isEqual(Mt.yn)){if(e!==ue.EQUAL)throw new m(y.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new i(t,e,n)}if(n.isEqual(qt.Tn)){if(e!==ue.EQUAL)throw new m(y.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new i(t,e,n)}return e===ue.ARRAY_CONTAINS?new le(t,n):e===ue.IN?(hn(n instanceof Xt,"IN filter has invalid value: "+n.toString()),new pe(t,n)):e===ue.ARRAY_CONTAINS_ANY?(hn(n instanceof Xt,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new de(t,n)):new i(t,e,n)},i.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.pn===e.pn&&this.oi(e.B(this.value))},i.prototype.oi=function(t){switch(this.op){case ue.LESS_THAN:return t<0;case ue.LESS_THAN_OR_EQUAL:return t<=0;case ue.EQUAL:return 0===t;case ue.GREATER_THAN:return t>0;case ue.GREATER_THAN_OR_EQUAL:return t>=0;default:return cn("Unknown FieldFilter operator: "+this.op)}},i.prototype.Mn=function(){return[ue.LESS_THAN,ue.LESS_THAN_OR_EQUAL,ue.GREATER_THAN,ue.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},i.prototype.canonicalId=function(){return this.field.it()+this.op.toString()+this.value.toString()},i.prototype.isEqual=function(t){return t instanceof i&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},i.prototype.toString=function(){return this.field.it()+" "+this.op+" "+this.value.value()},i}((function(){})),he=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(i,t),i.prototype.matches=function(t){var e=this.value,i=ft.W(t.key,e.key);return this.oi(i)},i}(ce),fe=function(t){function i(e,i){var n=t.call(this,e,ue.IN,i)||this;return n.value=i,n}return c.__extends(i,t),i.prototype.matches=function(t){return this.value.Jt.some((function(e){return t.key.isEqual(e.key)}))},i}(ce),le=function(t){function i(e,i){return t.call(this,e,ue.ARRAY_CONTAINS,i)||this}return c.__extends(i,t),i.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Xt&&e.contains(this.value)},i}(ce),pe=function(t){function i(e,i){var n=t.call(this,e,ue.IN,i)||this;return n.value=i,n}return c.__extends(i,t),i.prototype.matches=function(t){var e=this.value,i=t.field(this.field);return null!==i&&e.contains(i)},i}(ce),de=function(t){function i(e,i){var n=t.call(this,e,ue.ARRAY_CONTAINS_ANY,i)||this;return n.value=i,n}return c.__extends(i,t),i.prototype.matches=function(t){var e=this,i=t.field(this.field);return i instanceof Xt&&i.Jt.some((function(t){return e.value.contains(t)}))},i}(ce),ve=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),ye=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,i=this.position;e<i.length;e++)t+=i[e].toString();return t},t.prototype.si=function(t,e){hn(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var i=0,n=0;n<this.position.length;n++){var r=t[n],u=this.position[n];if(r.field.st())hn(u instanceof Kt,"Bound has a non-key value where the key path is being used."),i=ft.W(u.key,e.key);else{var s=e.field(r.field);hn(null!==s,"Field should exist since document matched the orderBy already."),i=u.B(s)}if(r.dir===ve.DESCENDING&&(i*=-1),0!==i)break}return this.before?i<=0:i<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var i=this.position[e],n=t.position[e];if(!i.isEqual(n))return!1}return!0},t}(),me=function(){function t(t,e){this.field=t,void 0===e&&(e=ve.ASCENDING),this.dir=e,this.hi=t.st()}return t.prototype.compare=function(t,e){var i=this.hi?$t.Rn(t,e):$t.Pn(this.field,t,e);switch(this.dir){case ve.ASCENDING:return i;case ve.DESCENDING:return-1*i;default:return cn("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.it()+this.dir.toString()},t.prototype.toString=function(){return this.field.it()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ge=new me(ht.ot(),ve.ASCENDING),we=new me(ht.ot(),ve.DESCENDING),be=function(){function t(t,e,i,n,r,u,s){void 0===r&&(r=dt.MIN),void 0===u&&(u=dt.MIN),void 0===s&&(s=rt.k),this.target=t,this.targetId=e,this.ci=i,this.sequenceNumber=n,this.ai=r,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s}return t.prototype.fi=function(e){return new t(this.target,this.targetId,this.ci,e,this.ai,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.li=function(e,i){return new t(this.target,this.targetId,this.ci,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)},t.prototype.di=function(e){return new t(this.target,this.targetId,this.ci,this.sequenceNumber,this.ai,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.ci===t.ci&&this.sequenceNumber===t.sequenceNumber&&this.ai.isEqual(t.ai)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},t}(),Ie=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function Ee(t){switch(t){case y.OK:return cn("Treated status OK as error");case y.CANCELLED:case y.UNKNOWN:case y.DEADLINE_EXCEEDED:case y.RESOURCE_EXHAUSTED:case y.INTERNAL:case y.UNAVAILABLE:case y.UNAUTHENTICATED:return!1;case y.INVALID_ARGUMENT:case y.NOT_FOUND:case y.ALREADY_EXISTS:case y.PERMISSION_DENIED:case y.FAILED_PRECONDITION:case y.ABORTED:case y.OUT_OF_RANGE:case y.UNIMPLEMENTED:case y.DATA_LOSS:return!0;default:return cn("Unknown status code: "+t)}}function _e(t){if(void 0===t)return an("GRPC error has no .code"),y.UNKNOWN;switch(t){case ie.OK:return y.OK;case ie.CANCELLED:return y.CANCELLED;case ie.UNKNOWN:return y.UNKNOWN;case ie.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case ie.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case ie.INTERNAL:return y.INTERNAL;case ie.UNAVAILABLE:return y.UNAVAILABLE;case ie.UNAUTHENTICATED:return y.UNAUTHENTICATED;case ie.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case ie.NOT_FOUND:return y.NOT_FOUND;case ie.ALREADY_EXISTS:return y.ALREADY_EXISTS;case ie.PERMISSION_DENIED:return y.PERMISSION_DENIED;case ie.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case ie.ABORTED:return y.ABORTED;case ie.OUT_OF_RANGE:return y.OUT_OF_RANGE;case ie.UNIMPLEMENTED:return y.UNIMPLEMENTED;case ie.DATA_LOSS:return y.DATA_LOSS;default:return cn("Unknown status code: "+t)}}function Te(t){if(void 0===t)return ie.OK;switch(t){case y.OK:return ie.OK;case y.CANCELLED:return ie.CANCELLED;case y.UNKNOWN:return ie.UNKNOWN;case y.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case y.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case y.INTERNAL:return ie.INTERNAL;case y.UNAVAILABLE:return ie.UNAVAILABLE;case y.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case y.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case y.NOT_FOUND:return ie.NOT_FOUND;case y.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case y.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case y.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case y.ABORTED:return ie.ABORTED;case y.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case y.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case y.DATA_LOSS:return ie.DATA_LOSS;default:return cn("Unknown status code: "+t)}}(oe=ie||(ie={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";var Ae=new lt(ft.W);function Ne(){return Ae}function Se(){return Ne()}var ke=new lt(ft.W);function Oe(){return ke}var De=new lt(ft.W);function Re(){return De}var Ce=new mt(ft.W);function Pe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=Ce,n=0,r=t;n<r.length;n++){var u=r[n];i=i.add(u)}return i}var xe=new mt(ln);function Le(){return xe}var Me=function(){function t(t){this.W=t?function(e,i){return t(e,i)||ft.W(e.key,i.key)}:function(t,e){return ft.W(t.key,e.key)},this.vi=Oe(),this.wi=new lt(this.W)}return t.mi=function(e){return new t(e.W)},t.prototype.has=function(t){return null!=this.vi.get(t)},t.prototype.get=function(t){return this.vi.get(t)},t.prototype.first=function(){return this.wi.wt()},t.prototype.last=function(){return this.wi.gt()},t.prototype.Y=function(){return this.wi.Y()},t.prototype.indexOf=function(t){var e=this.vi.get(t);return e?this.wi.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.wi.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.wi.bt((function(e,i){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.vi.dt(t.key,t),e.wi.dt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.vi.remove(t),this.wi.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var i=this.wi.yt(),n=e.wi.yt();i.St();){var r=i.Rt().key,u=n.Rt().key;if(!r.isEqual(u))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,i){var n=new t;return n.W=this.W,n.vi=e,n.wi=i,n},t}(),Ue=function(){function t(){this.gi=new lt(ft.W)}return t.prototype.track=function(t){var e=t.doc.key,i=this.gi.get(e);i?0!==t.type&&3===i.type?this.gi=this.gi.dt(e,t):3===t.type&&1!==i.type?this.gi=this.gi.dt(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.gi=this.gi.dt(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.gi=this.gi.dt(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.gi=this.gi.remove(e):1===t.type&&2===i.type?this.gi=this.gi.dt(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.gi=this.gi.dt(e,{type:2,doc:t.doc}):cn("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(i)):this.gi=this.gi.dt(e,t)},t.prototype.bi=function(){var t=[];return this.gi.bt((function(e,i){t.push(i)})),t},t}(),je=function(){function t(t,e,i,n,r,u,s,o){this.query=t,this.docs=e,this.pi=i,this.docChanges=n,this.yi=r,this.fromCache=u,this._i=s,this.Ii=o}return t.Ti=function(e,i,n,r){var u=[];return i.forEach((function(t){u.push({type:0,doc:t})})),new t(e,i,Me.mi(i),u,n,r,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.yi.Y()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this._i===t._i&&this.yi.isEqual(t.yi)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.pi.isEqual(t.pi)))return!1;var e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(var n=0;n<e.length;n++)if(e[n].type!==i[n].type||!e[n].doc.isEqual(i[n].doc))return!1;return!0},t}(),Fe=function(){function t(t,e,i,n,r){this.ai=t,this.Ei=e,this.Di=i,this.Ri=n,this.Si=r}return t.Ai=function(e,i){var n,r=((n={})[e]=Ve.Ci(e,i),n);return new t(dt.MIN,r,Le(),Ne(),Pe())},t}(),Ve=function(){function t(t,e,i,n,r){this.resumeToken=t,this.Pi=e,this.ki=i,this.Ni=n,this.Oi=r}return t.Ci=function(e,i){return new t(rt.k,i,Pe(),Pe(),Pe())},t}(),qe=function(t,e,i,n){this.Fi=t,this.removedTargetIds=e,this.key=i,this.Vi=n},Be=function(t,e){this.targetId=t,this.Ui=e},Ge=function(t,e,i,n){void 0===i&&(i=rt.k),void 0===n&&(n=null),this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=n},ze=function(){function t(){this.xi=0,this.ji=We(),this.Li=rt.k,this.qi=!1,this.Bi=!0}return Object.defineProperty(t.prototype,"Pi",{get:function(){return this.qi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Li},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mi",{get:function(){return 0!==this.xi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Qi",{get:function(){return this.Bi},enumerable:!0,configurable:!0}),t.prototype.Gi=function(t){t.P()>0&&(this.Bi=!0,this.Li=t)},t.prototype.Wi=function(){var t=Pe(),e=Pe(),i=Pe();return this.ji.forEach((function(n,r){switch(r){case 0:t=t.add(n);break;case 2:e=e.add(n);break;case 1:i=i.add(n);break;default:cn("Encountered invalid change type: "+r)}})),new Ve(this.Li,this.qi,t,e,i)},t.prototype.zi=function(){this.Bi=!1,this.ji=We()},t.prototype.Ki=function(t,e){this.Bi=!0,this.ji=this.ji.dt(t,e)},t.prototype.Hi=function(t){this.Bi=!0,this.ji=this.ji.remove(t)},t.prototype.Ji=function(){this.xi+=1},t.prototype.Yi=function(){this.xi-=1},t.prototype.Xi=function(){this.Bi=!0,this.qi=!0},t}(),He=function(){function t(t){this.$i=t,this.Zi={},this.te=Ne(),this.ne=Ke(),this.ie=new mt(ln)}return t.prototype.ee=function(t){for(var e=0,i=t.Fi;e<i.length;e++){var n=i[e];t.Vi instanceof $t?this.re(n,t.Vi):t.Vi instanceof Zt&&this.ue(n,t.key,t.Vi)}for(var r=0,u=t.removedTargetIds;r<u.length;r++)n=u[r],this.ue(n,t.key,t.Vi)},t.prototype.se=function(t){var e=this;this.oe(t,(function(i){var n=e.he(i);switch(t.state){case 0:e.ce(i)&&n.Gi(t.resumeToken);break;case 1:n.Yi(),n.Mi||n.zi(),n.Gi(t.resumeToken);break;case 2:n.Yi(),n.Mi||e.removeTarget(i),hn(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:e.ce(i)&&(n.Xi(),n.Gi(t.resumeToken));break;case 4:e.ce(i)&&(e.ae(i),n.Gi(t.resumeToken));break;default:cn("Unknown target watch change state: "+t.state)}}))},t.prototype.oe=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):O(this.Zi,e)},t.prototype.fe=function(t){var e=t.targetId,i=t.Ui.count,n=this.le(e);if(n){var r=n.target;if(r.Nn())if(0===i){var u=new ft(r.path);this.ue(e,u,new Zt(u,dt.q()))}else hn(1===i,"Single document existence filter with count: "+i);else this.de(e)!==i&&(this.ae(e),this.ie=this.ie.add(e))}},t.prototype.ve=function(t){var e=this,i={};O(this.Zi,(function(n,r){var u=e.le(n);if(u){if(r.Pi&&u.target.Nn()){var s=new ft(u.target.path);null!==e.te.get(s)||e.we(n,s)||e.ue(n,s,new Zt(s,t))}r.Qi&&(i[n]=r.Wi(),r.zi())}}));var n=Pe();this.ne.forEach((function(t,i){var r=!0;i.Bt((function(t){var i=e.le(t);return!i||2===i.ci||(r=!1,!1)})),r&&(n=n.add(t))}));var r=new Fe(t,i,this.ie,this.te,n);return this.te=Ne(),this.ne=Ke(),this.ie=new mt(ln),r},t.prototype.re=function(t,e){if(this.ce(t)){var i=this.we(t,e.key)?2:0;this.he(t).Ki(e.key,i),this.te=this.te.dt(e.key,e),this.ne=this.ne.dt(e.key,this.me(e.key).add(t))}},t.prototype.ue=function(t,e,i){if(this.ce(t)){var n=this.he(t);this.we(t,e)?n.Ki(e,1):n.Hi(e),this.ne=this.ne.dt(e,this.me(e).delete(t)),i&&(this.te=this.te.dt(e,i))}},t.prototype.removeTarget=function(t){delete this.Zi[t]},t.prototype.de=function(t){var e=this.he(t).Wi();return this.$i.ge(t).size+e.ki.size-e.Oi.size},t.prototype.Ji=function(t){this.he(t).Ji()},t.prototype.he=function(t){return this.Zi[t]||(this.Zi[t]=new ze),this.Zi[t]},t.prototype.me=function(t){var e=this.ne.get(t);return e||(e=new mt(ln),this.ne=this.ne.dt(t,e)),e},t.prototype.ce=function(t){var e=null!==this.le(t);return e||sn("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.le=function(t){var e=this.Zi[t];return e&&e.Mi?null:this.$i.be(t)},t.prototype.ae=function(t){var e=this;hn(!this.Zi[t].Mi,"Should only reset active targets"),this.Zi[t]=new ze,this.$i.ge(t).forEach((function(i){e.ue(t,i,null)}))},t.prototype.we=function(t,e){return this.$i.ge(t).has(e)},t}();function Ke(){return new lt(ft.W)}function We(){return new lt(ft.W)}var Je,Ye,Xe=((Je={})[ve.ASCENDING.name]="ASCENDING",Je[ve.DESCENDING.name]="DESCENDING",Je),Qe=((Ye={})[ue.LESS_THAN.name]="LESS_THAN",Ye[ue.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Ye[ue.GREATER_THAN.name]="GREATER_THAN",Ye[ue.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Ye[ue.EQUAL.name]="EQUAL",Ye[ue.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Ye[ue.IN.name]="IN",Ye[ue.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Ye),$e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ze(t,e){hn(!ee(t),e+" is missing")}function tn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):cn("can't parse "+t)}var en=function(){function t(t,e){this.Dn=t,this.options=e}return t.prototype.pe=function(t){var e=void 0===t.code?y.UNKNOWN:_e(t.code);return new m(e,t.message||"")},t.prototype.ye=function(t){return this.options._e||ee(t)?t:{value:t}},t.prototype.Ie=function(t){var e;return ee(e="object"==typeof t?t.value:t)?null:e},t.prototype.G=function(t){return this.options._e?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.L=function(t){if("string"==typeof t)return this.Te(t);hn(!!t,"Cannot deserialize null or undefined timestamp.");var e=tn(t.seconds||"0"),i=t.nanos||0;return new st(e,i)},t.prototype.Te=function(t){var e=0,i=$e.exec(t);if(hn(!!i,"invalid timestamp: "+t),i[1]){var n=i[1];n=(n+"000000000").substr(0,9),e=Number(n)}var r=new Date(t),u=Math.floor(r.getTime()/1e3);return new st(u,e)},t.prototype.Ee=function(t){return this.options._e?t.toBase64():t.toUint8Array()},t.prototype.De=function(t){return this.options._e?(hn(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),rt.fromBase64String(t||"")):(hn(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),rt.fromUint8Array(t||new Uint8Array))},t.prototype.Re=function(t){return"string"==typeof t?(hn(this.options._e,"Expected bytes to be passed in as Uint8Array, but got a string instead."),nt.fromBase64String(t)):(hn(!this.options._e,"Expected bytes to be passed in as Uint8Array, but got a string instead."),nt.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.G(t.G())},t.prototype.fromVersion=function(t){return hn(!!t,"Trying to deserialize version that isn't set"),dt.L(this.L(t))},t.prototype.Se=function(t,e){return this.Ae(t).child("documents").child(e).it()},t.prototype.Ce=function(t){var e=ut.et(t);return hn(this.Pe(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.ke=function(t){return this.Se(this.Dn,t.path)},t.prototype.Ne=function(t){var e=this.Ce(t);return hn(e.get(1)===this.Dn.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.Dn.projectId),hn(!e.get(3)&&!this.Dn.database||e.get(3)===this.Dn.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.Dn.database),new ft(this.Oe(e))},t.prototype.Fe=function(t){return this.Se(this.Dn,t)},t.prototype.Ve=function(t){var e=this.Ce(t);return 4===e.length?ut.rt:this.Oe(e)},Object.defineProperty(t.prototype,"Ue",{get:function(){return new ut(["projects",this.Dn.projectId,"databases",this.Dn.database]).it()},enumerable:!0,configurable:!0}),t.prototype.Ae=function(t){return new ut(["projects",t.projectId,"databases",t.database])},t.prototype.Oe=function(t){return hn(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.H(5)},t.prototype.Pe=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.xe=function(t){if(t instanceof Mt)return{nullValue:"NULL_VALUE"};if(t instanceof Ut)return{booleanValue:t.value()};if(t instanceof Vt)return{integerValue:""+t.value()};if(t instanceof qt){var e=t.value();if(this.options._e){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"};if(ne(e))return{doubleValue:"-0"}}return{doubleValue:t.value()}}return t instanceof Bt?{stringValue:t.value()}:t instanceof Jt?{mapValue:this.je(t)}:t instanceof Xt?{arrayValue:this.Le(t)}:t instanceof Gt?{timestampValue:this.G(t.Jt)}:t instanceof Wt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Ht?{bytesValue:this.Ee(t.value())}:t instanceof Kt?{referenceValue:this.Se(t.Dn,t.key.path)}:cn("Unknown FieldValue "+JSON.stringify(t))},t.prototype.qe=function(t){var e=this;if("nullValue"in t)return Mt.yn;if("booleanValue"in t)return Ut.of(t.booleanValue);if("integerValue"in t)return new Vt(tn(t.integerValue));if("doubleValue"in t){if(this.options._e){if("NaN"===t.doubleValue)return qt.Tn;if("Infinity"===t.doubleValue)return qt.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return qt.NEGATIVE_INFINITY;if("-0"===t.doubleValue)return new qt(-0)}return new qt(t.doubleValue)}if("stringValue"in t)return new Bt(t.stringValue);if("mapValue"in t)return this.Be(t.mapValue.fields||{});if("arrayValue"in t){Ze(t.arrayValue,"arrayValue");var i=t.arrayValue.values||[];return new Xt(i.map((function(t){return e.qe(t)})))}if("timestampValue"in t)return Ze(t.timestampValue,"timestampValue"),new Gt(this.L(t.timestampValue));if("geoPointValue"in t){Ze(t.geoPointValue,"geoPointValue");var n=t.geoPointValue.latitude||0,r=t.geoPointValue.longitude||0;return new Wt(new ot(n,r))}if("bytesValue"in t){Ze(t.bytesValue,"bytesValue");var u=this.Re(t.bytesValue);return new Ht(u)}if("referenceValue"in t){Ze(t.referenceValue,"referenceValue");var s=this.Ce(t.referenceValue),o=new yn(s.get(1),s.get(3)),c=new ft(this.Oe(s));return new Kt(o,c)}return cn("Unknown Value proto "+JSON.stringify(t))},t.prototype.Me=function(t,e){return{name:this.ke(t),fields:this.Qe(e)}},t.prototype.Ge=function(t){return hn(!t.rn,"Can't serialize documents with mutations."),{name:this.ke(t.key),fields:this.Qe(t.data()),updateTime:this.G(t.version.G())}},t.prototype.We=function(t,e){var i=this,n=this.Ne(t.name),r=this.fromVersion(t.updateTime);return new $t(n,r,{hasCommittedMutations:!!e},void 0,t,(function(t){return i.qe(t)}))},t.prototype.Qe=function(t){var e=this,i={};return t.forEach((function(t,n){i[t]=e.xe(n)})),i},t.prototype.Be=function(t){var e=this,i=t,n=Jt.wn();return D(i,(function(t,i){n.set(new ht([t]),e.qe(i))})),n.an()},t.prototype.je=function(t){return{fields:this.Qe(t)}},t.prototype.Le=function(t){var e=this,i=[];return t.forEach((function(t){i.push(e.xe(t))})),{values:i}},t.prototype.ze=function(t){var e=this;hn(!!t.found,"Tried to deserialize a found document from a missing document."),Ze(t.found.name,"doc.found.name"),Ze(t.found.updateTime,"doc.found.updateTime");var i=this.Ne(t.found.name),n=this.fromVersion(t.found.updateTime);return new $t(i,n,{},void 0,t.found,(function(t){return e.qe(t)}))},t.prototype.Ke=function(t){hn(!!t.missing,"Tried to deserialize a missing document from a found document."),hn(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.Ne(t.missing),i=this.fromVersion(t.readTime);return new Zt(e,i)},t.prototype.He=function(t){return"found"in t?this.ze(t):"missing"in t?this.Ke(t):cn("invalid batch get response: "+JSON.stringify(t))},t.prototype.Je=function(t){switch(t){case 1:return"ADD";case 3:return"CURRENT";case 0:return"NO_CHANGE";case 2:return"REMOVE";case 4:return"RESET";default:return cn("Unknown WatchTargetChangeState: "+t)}},t.prototype.Ye=function(t){if(t instanceof Be)return{filter:{count:t.Ui.count,targetId:t.targetId}};if(t instanceof qe){if(t.Vi instanceof $t){var e=t.Vi;return{documentChange:{document:{name:this.ke(e.key),fields:this.Qe(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.Fi,removedTargetIds:t.removedTargetIds}}}if(t.Vi instanceof Zt)return e=t.Vi,{documentDelete:{document:this.ke(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.Vi)return{documentRemove:{document:this.ke(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Ge){var i=void 0;return t.cause&&(i={code:Te(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Je(t.state),targetIds:t.targetIds,resumeToken:this.Ee(t.resumeToken),cause:i}}}return cn("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.Xe=function(t){var e,i=this;if("targetChange"in t){Ze(t.targetChange,"targetChange");var n=this.$e(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],u=this.De(t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&this.pe(s);e=new Ge(n,r,u,o||null)}else if("documentChange"in t){Ze(t.documentChange,"documentChange");var c=t.documentChange;Ze(c.document,"documentChange.name"),Ze(c.document.name,"documentChange.document.name"),Ze(c.document.updateTime,"documentChange.document.updateTime");var h=this.Ne(c.document.name),a=this.fromVersion(c.document.updateTime),f=new $t(h,a,{},void 0,c.document,(function(t){return i.qe(t)})),l=c.targetIds||[],d=c.removedTargetIds||[];e=new qe(l,d,f.key,f)}else if("documentDelete"in t){Ze(t.documentDelete,"documentDelete");var v=t.documentDelete;Ze(v.document,"documentDelete.document"),h=this.Ne(v.document),a=v.readTime?this.fromVersion(v.readTime):dt.q(),f=new Zt(h,a),d=v.removedTargetIds||[],e=new qe([],d,f.key,f)}else if("documentRemove"in t){Ze(t.documentRemove,"documentRemove");var y=t.documentRemove;Ze(y.document,"documentRemove"),h=this.Ne(y.document),d=y.removedTargetIds||[],e=new qe([],d,h,null)}else{if(!("filter"in t))return cn("Unknown change type "+JSON.stringify(t));Ze(t.filter,"filter");var m=t.filter;Ze(m.targetId,"filter.targetId");var g=m.count||0,b=new Ie(g),p=m.targetId;e=new Be(p,b)}return e},t.prototype.$e=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:cn("Got unexpected TargetChange.state: "+t)},t.prototype.Ze=function(t){if(!("targetChange"in t))return dt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?dt.MIN:e.readTime?this.fromVersion(e.readTime):dt.MIN},t.prototype.tr=function(t){var e,i=this;if(t instanceof Ot)e={update:this.Me(t.key,t.value)};else if(t instanceof Ct)e={delete:this.ke(t.key)};else if(t instanceof Dt)e={update:this.Me(t.key,t.data),updateMask:this.nr(t.sn)};else if(t instanceof Rt)e={transform:{document:this.ke(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return i.ir(t)}))}};else{if(!(t instanceof Pt))return cn("Unknown mutation type "+t.type);e={verify:this.ke(t.key)}}return t.en.Zt||(e.currentDocument=this.er(t.en)),e},t.prototype.rr=function(t){var e=this,i=t.currentDocument?this.ur(t.currentDocument):St.NONE;if(t.update){Ze(t.update.name,"name");var n=this.Ne(t.update.name),r=this.Be(t.update.fields||{});if(t.updateMask){var u=this.sr(t.updateMask);return new Dt(n,r,u,i)}return new Ot(n,r,i)}if(t.delete)return n=this.Ne(t.delete),new Ct(n,i);if(t.transform){n=this.Ne(t.transform.document);var s=t.transform.fieldTransforms.map((function(t){return e.or(t)}));return hn(!0===i.exists,'Transforms only support precondition "exists == true"'),new Rt(n,s)}return t.verify?(n=this.Ne(t.verify),new Pt(n,i)):cn("unknown mutation proto: "+JSON.stringify(t))},t.prototype.er=function(t){return hn(!t.Zt,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cn("Unknown precondition")},t.prototype.ur=function(t){return void 0!==t.updateTime?St.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?St.exists(t.exists):St.NONE},t.prototype.hr=function(t,e){var i=this,n=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);n.isEqual(dt.MIN)&&(n=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults.map((function(t){return i.qe(t)}))),new Nt(n,r)},t.prototype.cr=function(t,e){var i=this;return t&&t.length>0?(hn(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return i.hr(t,e)}))):[]},t.prototype.ir=function(t){var e=this,i=t.transform;if(i instanceof wt)return{fieldPath:t.field.it(),setToServerValue:"REQUEST_TIME"};if(i instanceof bt)return{fieldPath:t.field.it(),appendMissingElements:{values:i.elements.map((function(t){return e.xe(t)}))}};if(i instanceof It)return{fieldPath:t.field.it(),removeAllFromArray:{values:i.elements.map((function(t){return e.xe(t)}))}};if(i instanceof Et)return{fieldPath:t.field.it(),increment:this.xe(i.Ht)};throw cn("Unknown transform: "+t.transform)},t.prototype.or=function(t){var e=this,i=null;if("setToServerValue"in t)hn("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),i=wt.instance;else if("appendMissingElements"in t){var n=t.appendMissingElements.values||[];i=new bt(n.map((function(t){return e.qe(t)})))}else if("removeAllFromArray"in t)n=t.removeAllFromArray.values||[],i=new It(n.map((function(t){return e.qe(t)})));else if("increment"in t){var r=this.qe(t.increment);hn(r instanceof jt,"NUMERIC_ADD transform requires a NumberValue"),i=new Et(r)}else cn("Unknown transform proto: "+JSON.stringify(t));var u=ht.ht(t.fieldPath);return new At(u,i)},t.prototype.ar=function(t){return{documents:[this.Fe(t.path)]}},t.prototype.lr=function(t){var e=t.documents.length;hn(1===e,"DocumentsTarget contained other than 1 document: "+e);var i=t.documents[0];return ae.jn(this.Ve(i)).Yn()},t.prototype.dr=function(t){var e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(hn(i.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.Fe(i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(hn(i.length%2!=0,"Document queries with filters are not supported."),e.parent=this.Fe(i.J()),e.structuredQuery.from=[{collectionId:i.$()}]);var n=this.vr(t.filters);n&&(e.structuredQuery.where=n);var r=this.wr(t.orderBy);r&&(e.structuredQuery.orderBy=r);var u=this.ye(t.limit);return null!==u&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=this.mr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.mr(t.endAt)),e},t.prototype.gr=function(t){var e=this.Ve(t.parent),i=t.structuredQuery,n=i.from?i.from.length:0,r=null;if(n>0){hn(1===n,"StructuredQuery.from with more than one collection is not supported.");var u=i.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}var s=[];i.where&&(s=this.br(i.where));var o=[];i.orderBy&&(o=this.pr(i.orderBy));var c=null;i.limit&&(c=this.Ie(i.limit));var h=null;i.startAt&&(h=this.yr(i.startAt));var a=null;return i.endAt&&(a=this.yr(i.endAt)),new ae(e,r,o,s,c,"F",h,a).Yn()},t.prototype._r=function(t){var e=this.Ir(t.ci);return null==e?null:{"goog-listen-tags":e}},t.prototype.Ir=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cn("Unrecognized query purpose: "+t)}},t.prototype.Yn=function(t){var e,i=t.target;return(e=i.Nn()?{documents:this.ar(i)}:{query:this.dr(i)}).targetId=t.targetId,t.resumeToken.P()>0&&(e.resumeToken=this.Ee(t.resumeToken)),e},t.prototype.vr=function(t){var e=this;if(0!==t.length){var i=t.map((function(t){return t instanceof ce?e.Tr(t):cn("Unrecognized filter: "+JSON.stringify(t))}));return 1===i.length?i[0]:{compositeFilter:{op:"AND",filters:i}}}},t.prototype.br=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Er(t)]:void 0!==t.fieldFilter?[this.Dr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.br(t)})).reduce((function(t,e){return t.concat(e)})):cn("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.wr=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.Rr(t)}))},t.prototype.pr=function(t){var e=this;return t.map((function(t){return e.Sr(t)}))},t.prototype.mr=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.xe(t)}))}},t.prototype.yr=function(t){var e=this,i=!!t.before,n=t.values.map((function(t){return e.qe(t)}));return new ye(n,i)},t.prototype.Ar=function(t){return Xe[t.name]},t.prototype.Cr=function(t){switch(t){case"ASCENDING":return ve.ASCENDING;case"DESCENDING":return ve.DESCENDING;default:return}},t.prototype.Pr=function(t){return Qe[t.name]},t.prototype.kr=function(t){switch(t){case"EQUAL":return ue.EQUAL;case"GREATER_THAN":return ue.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return ue.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return ue.LESS_THAN;case"LESS_THAN_OR_EQUAL":return ue.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return ue.ARRAY_CONTAINS;case"IN":return ue.IN;case"ARRAY_CONTAINS_ANY":return ue.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return cn("Unspecified operator");default:return cn("Unknown operator")}},t.prototype.Nr=function(t){return{fieldPath:t.it()}},t.prototype.Or=function(t){return ht.ht(t.fieldPath)},t.prototype.Rr=function(t){return{field:this.Nr(t.field),direction:this.Ar(t.dir)}},t.prototype.Sr=function(t){return new me(this.Or(t.field),this.Cr(t.direction))},t.prototype.Dr=function(t){return ce.create(this.Or(t.fieldFilter.field),this.kr(t.fieldFilter.op),this.qe(t.fieldFilter.value))},t.prototype.Tr=function(t){if(t.op===ue.EQUAL){if(t.value.isEqual(qt.Tn))return{unaryFilter:{field:this.Nr(t.field),op:"IS_NAN"}};if(t.value.isEqual(Mt.yn))return{unaryFilter:{field:this.Nr(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.Nr(t.field),op:this.Pr(t.op),value:this.xe(t.value)}}},t.prototype.Er=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.Or(t.unaryFilter.field);return ce.create(e,ue.EQUAL,qt.Tn);case"IS_NULL":var i=this.Or(t.unaryFilter.field);return ce.create(i,ue.EQUAL,Mt.yn);case"OPERATOR_UNSPECIFIED":return cn("Unspecified filter");default:return cn("Unknown filter")}},t.prototype.nr=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.it())})),{fieldPaths:e}},t.prototype.sr=function(t){var e=(t.fieldPaths||[]).map((function(t){return ht.ht(t)}));return Tt.Xt(e)},t}(),nn=function(){function t(){}return t.Fr=function(e){t.platform&&cn("Platform already defined"),t.platform=e},t.C=function(){return t.platform||cn("Platform not set"),t.platform},t}(),rn=new h.Logger("@firebase/firestore");function li(){return rn.logLevel===h.LogLevel.DEBUG?0:rn.logLevel===h.LogLevel.SILENT?2:1}function on(t){switch(t){case 0:rn.logLevel=h.LogLevel.DEBUG;break;case 1:rn.logLevel=h.LogLevel.ERROR;break;case 2:rn.logLevel=h.LogLevel.SILENT;break;default:rn.error("Firestore ("+d+"): Invalid value passed to `setLogLevel`")}}function sn(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(rn.logLevel<=h.LogLevel.DEBUG){var u=i.map(un);rn.debug.apply(rn,c.__spreadArrays(["Firestore ("+d+") ["+t+"]: "+e],u))}}function an(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(rn.logLevel<=h.LogLevel.ERROR){var n=e.map(un);rn.error.apply(rn,c.__spreadArrays(["Firestore ("+d+"): "+t],n))}}function un(t){if("string"==typeof t)return t;var e=nn.C();try{return e.Vr(t)}catch(e){return t}}function cn(t){var e="FIRESTORE ("+d+") INTERNAL ASSERTION FAILED: "+t;throw an(e),new Error(e)}function hn(t,e){t||cn(e)}var fn=function(){function t(){}return t.Ur=function(){for(var t="";t.length<20;)nn.C().randomBytes(40).forEach((function(e){t.length<20&&e<=247&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(e%62))}));return hn(20===t.length,"Invalid auto ID: "+t),t},t}();function ln(t,e){return t<e?-1:t>e?1:0}function pn(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].isEqual(e[i]))return!1;return!0}function dn(t){return t+"\0"}var vn=function(t,e,i,n,r){this.Dn=t,this.persistenceKey=e,this.host=i,this.ssl=n,this.forceLongPolling=r},yn=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"xr",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.B=function(t){return ln(this.projectId,t.projectId)||ln(this.database,t.database)},t}(),mn=function(){function t(t,e,i,n){this.batchId=t,this.En=e,this.baseMutations=i,this.mutations=n,hn(n.length>0,"Cannot create an empty mutation batch")}return t.prototype.zt=function(t,e,i){e&&hn(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var n=i.jr;hn(n.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+n.length+").");for(var r=0;r<this.mutations.length;r++){var u=this.mutations[r];if(u.key.isEqual(t)){var s=n[r];e=u.zt(e,s)}}return e},t.prototype.Wt=function(t,e){e&&hn(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var i=0,n=this.baseMutations;i<n.length;i++)(o=n[i]).key.isEqual(t)&&(e=o.Wt(e,e,this.En));for(var r=e,u=0,s=this.mutations;u<s.length;u++){var o;(o=s[u]).key.isEqual(t)&&(e=o.Wt(e,r,this.En))}return e},t.prototype.Lr=function(t){var e=this,i=t;return this.mutations.forEach((function(n){var r=e.Wt(n.key,t.get(n.key));r&&(i=i.dt(n.key,r))})),i},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Pe())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&pn(this.mutations,t.mutations)&&pn(this.baseMutations,t.baseMutations)},t}(),gn=function(){function t(t,e,i,n,r){this.batch=t,this.qr=e,this.jr=i,this.streamToken=n,this.Br=r}return t.from=function(e,i,n,r){hn(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var u=Re(),s=e.mutations,o=0;o<s.length;o++)u=u.dt(s[o].key,n[o].version);return new t(e,i,n,r,u)},t}(),wn=function(){function t(t){this.Mr=t,this.Qr={}}return t.prototype.get=function(t){var e=this.Mr(t),i=this.Qr[e];if(void 0!==i)for(var n=0,r=i;n<r.length;n++){var u=r[n],s=u[0],o=u[1];if(s.isEqual(t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var i=this.Mr(t),n=this.Qr[i];if(void 0!==n){for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return void(n[r]=[t,e]);n.push([t,e])}else this.Qr[i]=[[t,e]]},t.prototype.delete=function(t){var e=this.Mr(t),i=this.Qr[e];if(void 0===i)return!1;for(var n=0;n<i.length;n++)if(i[n][0].isEqual(t))return 1===i.length?delete this.Qr[e]:i.splice(n,1),!0;return!1},t.prototype.forEach=function(t){D(this.Qr,(function(e,i){for(var n=0,r=i;n<r.length;n++){var u=r[n],s=u[0],o=u[1];t(s,o)}}))},t.prototype.Y=function(){return R(this.Qr)},t}(),bn=function(){function t(t,e,i,n){this.targetId=t,this.fromCache=e,this.Gr=i,this.Wr=n}return t.zr=function(e,i){for(var n=Pe(),r=Pe(),u=0,s=i.docChanges;u<s.length;u++){var o=s[u];switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}}return new t(e,i.fromCache,n,r)},t}(),In=function(){function t(t,e){var i=this;this.previousValue=t,e&&(e.Kr=function(t){return i.Hr(t)},this.Jr=function(t){return e.Yr(t)})}return t.prototype.Hr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Jr&&this.Jr(t),t},t.Xr=-1,t}(),En=function(){var t=this;this.promise=new Promise((function(e,i){t.resolve=e,t.reject=i}))},_n=function(){function t(t,e,i,n,r){this.$r=t,this.Zr=e,this.tu=i,this.op=n,this.nu=r,this.iu=new En,this.then=this.iu.promise.then.bind(this.iu.promise),this.catch=this.iu.promise.catch.bind(this.iu.promise),this.iu.promise.catch((function(t){}))}return t.eu=function(e,i,n,r,u){var s=new t(e,i,Date.now()+n,r,u);return s.start(n),s},t.prototype.start=function(t){var e=this;this.ru=setTimeout((function(){return e.uu()}),t)},t.prototype.su=function(){return this.uu()},t.prototype.cancel=function(t){null!==this.ru&&(this.clearTimeout(),this.iu.reject(new m(y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.uu=function(){var t=this;this.$r.ou((function(){return null!==t.ru?(t.clearTimeout(),t.op().then((function(e){return t.iu.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.ru&&(this.nu(this),clearTimeout(this.ru),this.ru=null)},t}(),Tn=function(){function t(){this.hu=Promise.resolve(),this.cu=!1,this.au=[],this.fu=null,this.lu=!1,this.du=[]}return Object.defineProperty(t.prototype,"vu",{get:function(){return this.cu},enumerable:!0,configurable:!0}),t.prototype.ou=function(t){this.enqueue(t)},t.prototype.wu=function(t){this.mu(),this.gu(t)},t.prototype.bu=function(t){return this.mu(),this.gu(t)},t.prototype.pu=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){switch(e.label){case 0:return this.mu(),this.cu?[3,2]:(this.cu=!0,[4,this.bu(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.mu(),this.cu?new Promise((function(t){})):this.gu(t)},t.prototype.gu=function(t){var e=this,i=this.hu.then((function(){return e.lu=!0,t().catch((function(t){e.fu=t,e.lu=!1;var i=t.stack||t.message||"";throw an("INTERNAL UNHANDLED ERROR: ",i),i.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.lu=!1,t}))}));return this.hu=i,i},t.prototype.yu=function(t,e,i){var n=this;this.mu(),hn(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.du.indexOf(t)>-1&&(e=0);var r=_n.eu(this,t,e,i,(function(t){return n._u(t)}));return this.au.push(r),r},t.prototype.mu=function(){this.fu&&cn("AsyncQueue is already failed: "+(this.fu.stack||this.fu.message))},t.prototype.Iu=function(){hn(this.lu,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.Tu=function(){return c.__awaiter(this,void 0,void 0,(function(){var t;return c.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.hu];case 1:e.sent(),e.label=2;case 2:if(t!==this.hu)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Eu=function(t){for(var e=0,i=this.au;e<i.length;e++)if(i[e].Zr===t)return!0;return!1},t.prototype.Du=function(t){var e=this;return this.Tu().then((function(){hn("all"===t||e.Eu(t),"Attempted to drain to missing operation "+t),e.au.sort((function(t,e){return t.tu-e.tu}));for(var i=0,n=e.au;i<n.length;i++){var r=n[i];if(r.su(),"all"!==t&&r.Zr===t)break}return e.Tu()}))},t.prototype.Ru=function(t){this.du.push(t)},t.prototype._u=function(t){var e=this.au.indexOf(t);hn(e>=0,"Delayed operation not found."),this.au.splice(e,1)},t}(),An=function(){function t(t){var e=this;this.Su=null,this.Au=null,this.result=void 0,this.error=void 0,this.Cu=!1,this.Pu=!1,t((function(t){e.Cu=!0,e.result=t,e.Su&&e.Su(t)}),(function(t){e.Cu=!0,e.error=t,e.Au&&e.Au(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,i){var n=this;return this.Pu&&cn("Called next() or catch() twice for PersistencePromise"),this.Pu=!0,this.Cu?this.error?this.ku(i,this.error):this.Nu(e,this.result):new t((function(t,r){n.Su=function(i){n.Nu(e,i).next(t,r)},n.Au=function(e){n.ku(i,e).next(t,r)}}))},t.prototype.Ou=function(){var t=this;return new Promise((function(e,i){t.next(e,i)}))},t.prototype.Fu=function(e){try{var i=e();return i instanceof t?i:t.resolve(i)}catch(e){return t.reject(e)}},t.prototype.Nu=function(e,i){return e?this.Fu((function(){return e(i)})):t.resolve(i)},t.prototype.ku=function(e,i){return e?this.Fu((function(){return e(i)})):t.reject(i)},t.resolve=function(e){return new t((function(t,i){t(e)}))},t.reject=function(e){return new t((function(t,i){i(e)}))},t.Vu=function(e){return new t((function(t,i){var n=0,r=0,u=!1;e.forEach((function(e){++n,e.next((function(){++r,u&&r===n&&t()}),(function(t){return i(t)}))})),u=!0,r===n&&t()}))},t.Uu=function(e){for(var i=t.resolve(!1),n=function(e){i=i.next((function(i){return i?t.resolve(i):e()}))},r=0,u=e;r<u.length;r++)n(u[r]);return i},t.forEach=function(t,e){var i=this,n=[];return t.forEach((function(t,r){n.push(e.call(i,t,r))})),this.Vu(n)},t}();function Nn(t,e){var i=t[0],n=t[1],r=e[0],u=e[1],s=ln(i,r);return 0===s?ln(n,u):s}var Sn=function(){function t(t){this.xu=t,this.buffer=new mt(Nn),this.ju=0}return t.prototype.Lu=function(){return++this.ju},t.prototype.qu=function(t){var e=[t,this.Lu()];if(this.buffer.size<this.xu)this.buffer=this.buffer.add(e);else{var i=this.buffer.last();Nn(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),kn={Bu:!1,Mu:0,Qu:0,Gu:0},On=function(){function t(t,e,i){this.Wu=t,this.zu=e,this.Ku=i}return t.Hu=function(e){return new t(e,t.Ju,t.Yu)},t.Xu=-1,t.$u=1048576,t.Zu=41943040,t.Ju=10,t.Yu=1e3,t.ts=new t(t.Zu,t.Ju,t.Yu),t.DISABLED=new t(t.Xu,0,0),t}(),Dn=function(){function t(t,e){this.ns=t,this.$r=e,this.es=!1,this.rs=null}return t.prototype.start=function(t){hn(null===this.rs,"Cannot start an already started LruScheduler"),this.ns.params.Wu!==On.Xu&&this.us(t)},t.prototype.stop=function(){this.rs&&(this.rs.cancel(),this.rs=null)},Object.defineProperty(t.prototype,"ss",{get:function(){return null!==this.rs},enumerable:!0,configurable:!0}),t.prototype.us=function(t){var e=this;hn(null===this.rs,"Cannot schedule GC while a task is pending");var i=this.es?3e5:6e4;sn("LruGarbageCollector","Garbage collection scheduled in "+i+"ms"),this.rs=this.$r.yu("lru_garbage_collection",i,(function(){return e.rs=null,e.es=!0,t.os(e.ns).then((function(){return e.us(t)})).catch(Mn)}))},t}(),Rn=function(){function t(t,e){this.hs=t,this.params=e}return t.prototype.cs=function(t,e){return this.hs.as(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.fs=function(t,e){var i=this;if(0===e)return An.resolve(In.Xr);var n=new Sn(e);return this.hs.oe(t,(function(t){return n.qu(t.sequenceNumber)})).next((function(){return i.hs.ls(t,(function(t){return n.qu(t)}))})).next((function(){return n.maxValue}))},t.prototype.ds=function(t,e,i){return this.hs.ds(t,e,i)},t.prototype.vs=function(t,e){return this.hs.vs(t,e)},t.prototype.ws=function(t,e){var i=this;return this.params.Wu===On.Xu?(sn("LruGarbageCollector","Garbage collection skipped; disabled"),An.resolve(kn)):this.ms(t).next((function(n){return n<i.params.Wu?(sn("LruGarbageCollector","Garbage collection skipped; Cache size "+n+" is lower than threshold "+i.params.Wu),kn):i.gs(t,e)}))},t.prototype.ms=function(t){return this.hs.ms(t)},t.prototype.gs=function(t,e){var i,n,r,u,s,o,c,h=this,a=Date.now();return this.cs(t,this.params.zu).next((function(e){return e>h.params.Ku?(sn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Ku+" from "+e),n=h.params.Ku):n=e,u=Date.now(),h.fs(t,n)})).next((function(n){return i=n,s=Date.now(),h.ds(t,i,e)})).next((function(e){return r=e,o=Date.now(),h.vs(t,i)})).next((function(t){return c=Date.now(),li()<=0&&sn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(u-a)+"ms\n\tDetermined least recently used "+n+" in "+(s-u)+"ms\n\tRemoved "+r+" targets in "+(o-s)+"ms\n\tRemoved "+t+" documents in "+(c-o)+"ms\nTotal Duration: "+(c-a)+"ms"),An.resolve({Bu:!0,Mu:n,Qu:r,Gu:t})}))},t}(),Cn=function(){function t(){this.bs=new mt(Pn.Rn),this.ps=new mt(Pn.ys)}return t.prototype.Y=function(){return this.bs.Y()},t.prototype._s=function(t,e){var i=new Pn(t,e);this.bs=this.bs.add(i),this.ps=this.ps.add(i)},t.prototype.Is=function(t,e){var i=this;t.forEach((function(t){return i._s(t,e)}))},t.prototype.Ts=function(t,e){this.Es(new Pn(t,e))},t.prototype.Ds=function(t,e){var i=this;t.forEach((function(t){return i.Ts(t,e)}))},t.prototype.Rs=function(t){var e=this,i=ft.EMPTY,n=new Pn(i,t),r=new Pn(i,t+1),u=[];return this.ps.qt([n,r],(function(t){e.Es(t),u.push(t.key)})),u},t.prototype.Ss=function(){var t=this;this.bs.forEach((function(e){return t.Es(e)}))},t.prototype.Es=function(t){this.bs=this.bs.delete(t),this.ps=this.ps.delete(t)},t.prototype.As=function(t){var e=ft.EMPTY,i=new Pn(e,t),n=new Pn(e,t+1),r=Pe();return this.ps.qt([i,n],(function(t){r=r.add(t.key)})),r},t.prototype.Cs=function(t){var e=new Pn(t,0),i=this.bs.Mt(e);return null!==i&&t.isEqual(i.key)},t}(),Pn=function(){function t(t,e){this.key=t,this.Ps=e}return t.Rn=function(t,e){return ft.W(t.key,e.key)||ln(t.Ps,e.Ps)},t.ys=function(t,e){return ln(t.Ps,e.Ps)||ft.W(t.key,e.key)},t}(),xn=function(){function t(){this.ks=new wn((function(t){return t.toString()})),this.Ns=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return hn(void 0!==this.Os,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.Os},set:function(t){hn(void 0===this.Os||this.Os.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.Os=t},enumerable:!0,configurable:!0}),t.prototype.Fs=function(t,e){this.Vs(),this.readTime=e,this.ks.set(t.key,t)},t.prototype.Us=function(t,e){this.Vs(),e&&(this.readTime=e),this.ks.set(t,null)},t.prototype.xs=function(t,e){this.Vs();var i=this.ks.get(e);return void 0!==i?An.resolve(i):this.js(t,e)},t.prototype.getEntries=function(t,e){return this.Ls(t,e)},t.prototype.apply=function(t){return this.Vs(),this.Ns=!0,this.qs(t)},t.prototype.Vs=function(){hn(!this.Ns,"Changes have already been applied.")},t}(),Ln=function(){function t(t,e,i){this.persistence=t,this.Bs=e,this.Ms=new Cn,this.Qs=new lt(ln),this.Gs=new wn((function(t){return t.canonicalId()})),this.Ws=dt.MIN,hn(t.ss,"LocalStore was passed an unstarted persistence implementation"),this.persistence.Ks.zs(this.Ms),this.Hs=t.Js(i),this.Ys=t.Xs(),this.$s=t.Zs(),this.to=new Yn(this.Ys,this.Hs,this.persistence.no()),this.Bs.io(this.to)}return t.prototype.start=function(){return this.eo()},t.prototype.ro=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r=this;return c.__generator(this,(function(u){switch(u.label){case 0:return e=this.Hs,i=this.to,[4,this.persistence.runTransaction("Handle user change","readonly",(function(n){var u;return r.Hs.uo(n).next((function(s){return u=s,e=r.persistence.Js(t),i=new Yn(r.Ys,e,r.persistence.no()),e.uo(n)})).next((function(t){for(var e=[],r=[],s=Pe(),o=0,c=u;o<c.length;o++){var h=c[o];e.push(h.batchId);for(var a=0,f=h.mutations;a<f.length;a++){var l=f[a];s=s.add(l.key)}}for(var d=0,v=t;d<v.length;d++){h=v[d],r.push(h.batchId);for(var y=0,m=h.mutations;y<m.length;y++)l=m[y],s=s.add(l.key)}return i.so(n,s).next((function(t){return{oo:t,ho:e,co:r}}))}))}))];case 1:return n=u.sent(),this.Hs=e,this.to=i,this.Bs.io(this.to),[2,n]}}))}))},t.prototype.ao=function(t){var e,i=this,n=st.now(),r=t.reduce((function(t,e){return t.add(e.key)}),Pe());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(u){return i.to.so(u,r).next((function(r){e=r;for(var s=[],o=0,c=t;o<c.length;o++){var h=c[o],a=h.un(e.get(h.key));null!=a&&s.push(new Dt(h.key,a,a.sn(),St.exists(!0)))}return i.Hs.fo(u,n,s,t)}))})).then((function(t){var i=t.Lr(e);return{batchId:t.batchId,ks:i}}))},t.prototype.lo=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(i){return e.Hs.do(i,t).next((function(t){return t?e.to.so(i,t):An.resolve(null)}))}))},t.prototype.vo=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(i){var n=t.batch.keys(),r=e.Ys.wo({mo:!0});return e.Hs.vo(i,t.batch,t.streamToken).next((function(){return e.bo(i,t,r)})).next((function(){return r.apply(i)})).next((function(){return e.Hs.po(i)})).next((function(){return e.to.so(i,n)}))}))},t.prototype.yo=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(i){var n;return e.Hs._o(i,t).next((function(t){return hn(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),e.Hs.Io(i,t)})).next((function(){return e.Hs.po(i)})).next((function(){return e.to.so(i,n)}))}))},t.prototype.To=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Hs.To(e)}))},t.prototype.Eo=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",(function(e){return t.Hs.Eo(e)}))},t.prototype.Do=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",(function(i){return e.Hs.Do(i,t)}))},t.prototype.Ro=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.$s.Ro(e)}))},t.prototype.So=function(e){var i=this,n=e.ai,r=this.Qs;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(u){var s=i.Ys.wo({mo:!0});r=i.Qs;var o=[];O(e.Ei,(function(e,s){var c=r.get(e);if(c){o.push(i.$s.Ao(u,s.Oi,e).next((function(){return i.$s.Co(u,s.ki,e)})));var h=s.resumeToken;if(h.P()>0){var a=c.li(h,n).fi(u.Po);r=r.dt(e,a),t.ko(c,a,s)&&o.push(i.$s.No(u,a))}}}));var c=Ne(),h=Pe();if(e.Ri.forEach((function(t,e){h=h.add(t)})),o.push(s.getEntries(u,h).next((function(t){e.Ri.forEach((function(r,h){var a=t.get(r);h instanceof Zt&&h.version.isEqual(dt.MIN)?(s.Us(r,n),c=c.dt(r,h)):null==a||h.version.B(a.version)>0||0===h.version.B(a.version)&&a.hasPendingWrites?(hn(!dt.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),s.Fs(h,n),c=c.dt(r,h)):sn("LocalStore","Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",h.version),e.Si.has(r)&&o.push(i.persistence.Ks.Oo(u,r))}))}))),!n.isEqual(dt.MIN)){var a=i.$s.Ro(u).next((function(t){return hn(n.B(t)>=0,"Watch stream reverted to previous snapshot?? "+n+" < "+t),i.$s.Fo(u,u.Po,n)}));o.push(a)}return An.Vu(o).next((function(){return s.apply(u)})).next((function(){return i.to.Vo(u,c)}))})).then((function(t){return i.Qs=r,t}))},t.ko=function(t,e,i){return hn(e.resumeToken.P()>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.P()||e.ai.M()-t.ai.M()>=this.Uo||i.ki.size+i.Ni.size+i.Oi.size>0},t.prototype.xo=function(t){for(var e=this,i=0,n=t;i<n.length;i++){var r=n[i],u=r.targetId;if(this.Ms.Is(r.Gr,u),this.Ms.Ds(r.Wr,u),!r.fromCache){var s=this.Qs.get(u);hn(null!==s,"Can't set limbo-free snapshot version for unknown target: "+u);var o=s.ai,c=s.di(o);this.Qs=this.Qs.dt(u,c)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(i){return An.forEach(t,(function(t){return An.forEach(t.Wr,(function(t){return e.persistence.Ks.Ts(i,t)}))}))}))},t.prototype.jo=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(i){return void 0===t&&(t=-1),e.Hs.Lo(i,t)}))},t.prototype.qo=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(i){return e.to.Bo(i,t)}))},t.prototype.Mo=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(i){var n;return e.$s.Qo(i,t).next((function(r){return r?(n=r,An.resolve(n)):e.$s.Go(i).next((function(r){return n=new be(t,r,0,i.Po),e.$s.Wo(i,n).next((function(){return n}))}))}))})).then((function(i){return null===e.Qs.get(i.targetId)&&(e.Qs=e.Qs.dt(i.targetId,i),e.Gs.set(t,i.targetId)),i}))},t.prototype.Qo=function(t,e){var i=this.Gs.get(e);return void 0!==i?An.resolve(this.Qs.get(i)):this.$s.Qo(t,e)},t.prototype.zo=function(t,e){var i=this,n=this.Qs.get(t);hn(null!==n,"Tried to release nonexistent target: "+t);var r=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",r,(function(r){var u=i.Ms.Rs(t);return e?An.resolve():An.forEach(u,(function(t){return i.persistence.Ks.Ts(r,t)})).next((function(){i.persistence.Ks.removeTarget(r,n)}))})).then((function(){i.Qs=i.Qs.remove(t),i.Gs.delete(n.target)}))},t.prototype.Ko=function(t,e){var i=this,n=dt.MIN,r=Pe();return this.persistence.runTransaction("Execute query","readonly",(function(u){return i.Qo(u,t.Yn()).next((function(t){if(t)return n=t.lastLimboFreeSnapshotVersion,i.$s.Ho(u,t.targetId).next((function(t){r=t}))})).next((function(){return i.Bs.Jo(u,t,e?n:dt.MIN,e?r:Pe())})).next((function(t){return{documents:t,Yo:r}}))}))},t.prototype.Xo=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",(function(i){return e.$s.Ho(i,t)}))},t.prototype.$o=function(){return this.persistence.$o()},t.prototype.Zo=function(t){this.Hs.th(t)},t.prototype.nh=function(t){this.persistence.nh(t)},t.prototype.bo=function(t,e,i){var n=this,r=e.batch,u=r.keys(),s=An.resolve();return u.forEach((function(n){s=s.next((function(){return i.xs(t,n)})).next((function(t){var u=t,s=e.Br.get(n);hn(null!==s,"ackVersions should contain every doc in the write."),(!u||u.version.B(s)<0)&&((u=r.zt(n,u,e))?i.Fs(u,e.qr):hn(!t,"Mutation batch "+r+" applied to document "+t+" resulted in null"))}))})),s.next((function(){return n.Hs.Io(t,r)}))},t.prototype.os=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(i){return t.ws(i,e.Qs)}))},t.prototype.ih=function(t){var e=this,i=this.Qs.get(t);return i?Promise.resolve(i.target):this.persistence.runTransaction("Get target data","readonly",(function(i){return e.$s.be(i,t).next((function(t){return t?t.target:null}))}))},t.prototype.eh=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Ys.eh(e,t.Ws)})).then((function(e){var i=e.rh,n=e.readTime;return t.Ws=n,i}))},t.prototype.eo=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e=this;return c.__generator(this,(function(i){switch(i.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Ys.uh(t)}))];case 1:return t.Ws=i.sent(),[2]}}))}))},t.Uo=3e8,t}();function Mn(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){if(t.code!==y.FAILED_PRECONDITION||t.message!==Wn)throw t;return sn("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Un(t,e){return hn(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function jn(t,e,i){var n="firestore_mutations_"+t+"_"+i;return e.t()&&(n+="_"+e.uid),n}function Fn(t,e){return"firestore_targets_"+t+"_"+e}var Vn=function(){function t(t,e,i,n){this.user=t,this.batchId=e,this.state=i,this.error=n,hn(void 0!==n==("rejected"===i),"MutationMetadata must contain an error iff state is 'rejected'")}return t.sh=function(e,i,n){var r=JSON.parse(n),u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new m(r.error.code,r.error.message)),u?new t(e,i,r.state,s):(an("SharedClientState","Failed to parse mutation state for ID '"+i+"': "+n),null)},t.prototype.oh=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),qn=function(){function t(t,e,i){this.targetId=t,this.state=e,this.error=i,hn(void 0!==i==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.sh=function(e,i){var n=JSON.parse(i),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),u=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(u=new m(n.error.code,n.error.message)),r?new t(e,n.state,u):(an("SharedClientState","Failed to parse target state for ID '"+e+"': "+i),null)},t.prototype.oh=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Bn=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.sh=function(e,i){for(var n=JSON.parse(i),r="object"==typeof n&&n.activeTargetIds instanceof Array,u=Le(),s=0;r&&s<n.activeTargetIds.length;++s)r=re(n.activeTargetIds[s]),u=u.add(n.activeTargetIds[s]);return r?new t(e,u):(an("SharedClientState","Failed to parse client data for instance '"+e+"': "+i),null)},t}(),Gn=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.sh=function(e){var i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new t(i.clientId,i.onlineState):(an("SharedClientState","Failed to parse online state: "+e),null)},t}(),zn=function(){function t(){this.activeTargetIds=Le()}return t.prototype.hh=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ah=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.oh=function(){var t={activeTargetIds:this.activeTargetIds.nt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Hn=function(){function t(e,i,n,r,u){if(this.fh=e,this.platform=i,this.persistenceKey=n,this.lh=r,this.dh=null,this.vh=null,this.Kr=null,this.wh={},this.mh=this.gh.bind(this),this.ss=!1,this.bh=[],!t.ph(this.platform))throw new m(y.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=u,this.yh=Un(this.persistenceKey,this.lh),this._h=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.wh[this.lh]=new zn,this.Ih=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Th=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Eh=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Dh=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.mh)}return t.ph=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e,i,n,r,s,o,h,f,a,l,d=this;return c.__generator(this,(function(u){switch(u.label){case 0:return hn(!this.ss,"WebStorageSharedClientState already started"),hn(null!==this.dh,"syncEngine property must be set before calling start()"),hn(null!==this.vh,"onlineStateHandler property must be set before calling start()"),[4,this.dh.$o()];case 1:for(t=u.sent(),e=0,i=t;e<i.length;e++)(n=i[e])!==this.lh&&(r=this.getItem(Un(this.persistenceKey,n)))&&(s=Bn.sh(n,r))&&(this.wh[s.clientId]=s);for(this.Rh(),(o=this.storage.getItem(this.Dh))&&(h=this.Sh(o))&&this.Ah(h),f=0,a=this.bh;f<a.length;f++)l=a[f],this.gh(l);return this.bh=[],this.platform.window.addEventListener("unload",(function(){return d.shutdown()})),this.ss=!0,[2]}}))}))},t.prototype.Yr=function(t){this.setItem(this._h,JSON.stringify(t))},t.prototype.Ch=function(){var t=Le();return D(this.wh,(function(e,i){t=t.Qt(i.activeTargetIds)})),t},t.prototype.Ph=function(t){for(var e in this.wh)if(this.wh.hasOwnProperty(e)&&this.wh[e].activeTargetIds.has(t))return!0;return!1},t.prototype.kh=function(t){this.Nh(t,"pending")},t.prototype.Oh=function(t,e,i){this.Nh(t,e,i),this.Fh(t)},t.prototype.Vh=function(t){var e="not-current";if(this.Ph(t)){var i=this.storage.getItem(Fn(this.persistenceKey,t));if(i){var n=qn.sh(t,i);n&&(e=n.state)}}return this.Uh.hh(t),this.Rh(),e},t.prototype.xh=function(t){this.Uh.ah(t),this.Rh()},t.prototype.jh=function(t){return this.Uh.activeTargetIds.has(t)},t.prototype.Lh=function(t){this.removeItem(Fn(this.persistenceKey,t))},t.prototype.qh=function(t,e,i){this.Bh(t,e,i)},t.prototype.ro=function(t,e,i){var n=this;e.forEach((function(t){n.Fh(t)})),this.currentUser=t,i.forEach((function(t){n.kh(t)}))},t.prototype.Mh=function(t){this.Qh(t)},t.prototype.shutdown=function(){this.ss&&(this.platform.window.removeEventListener("storage",this.mh),this.removeItem(this.yh),this.ss=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return sn("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){sn("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){sn("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.gh=function(t){var e=this;if(t.storageArea===this.storage){if(sn("SharedClientState","EVENT",t.key,t.newValue),t.key===this.yh)return void an("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fh.ou((function(){return c.__awaiter(e,void 0,void 0,(function(){var e,i,n,r,s,o;return c.__generator(this,(function(u){if(!this.ss)return this.bh.push(t),[2];if(null===t.key)return[2];if(this.Ih.test(t.key)){if(null==t.newValue)return i=this.Gh(t.key),[2,this.Wh(i,null)];if(e=this.zh(t.key,t.newValue))return[2,this.Wh(e.clientId,e)]}else if(this.Th.test(t.key)){if(null!==t.newValue&&(n=this.Kh(t.key,t.newValue)))return[2,this.Hh(n)]}else if(this.Eh.test(t.key)){if(null!==t.newValue&&(r=this.Jh(t.key,t.newValue)))return[2,this.Yh(r)]}else if(t.key===this.Dh){if(null!==t.newValue&&(s=this.Sh(t.newValue)))return[2,this.Ah(s)]}else t.key===this._h&&(hn(!!this.Kr,"Missing sequenceNumberHandler"),(o=function(t){var e=In.Xr;if(null!=t)try{var i=JSON.parse(t);hn("number"==typeof i,"Found non-numeric sequence number"),e=i}catch(t){an("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==In.Xr&&this.Kr(o));return[2]}))}))}))}},Object.defineProperty(t.prototype,"Uh",{get:function(){return this.wh[this.lh]},enumerable:!0,configurable:!0}),t.prototype.Rh=function(){this.setItem(this.yh,this.Uh.oh())},t.prototype.Nh=function(t,e,i){var n=new Vn(this.currentUser,t,e,i),r=jn(this.persistenceKey,this.currentUser,t);this.setItem(r,n.oh())},t.prototype.Fh=function(t){var e=jn(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Qh=function(t){var e={clientId:this.lh,onlineState:t};this.storage.setItem(this.Dh,JSON.stringify(e))},t.prototype.Bh=function(t,e,i){var n=Fn(this.persistenceKey,t),r=new qn(t,e,i);this.setItem(n,r.oh())},t.prototype.Gh=function(t){var e=this.Ih.exec(t);return e?e[1]:null},t.prototype.zh=function(t,e){var i=this.Gh(t);return hn(null!==i,"Cannot parse client state key '"+t+"'"),Bn.sh(i,e)},t.prototype.Kh=function(t,e){var i=this.Th.exec(t);hn(null!==i,"Cannot parse mutation batch key '"+t+"'");var n=Number(i[1]),r=void 0!==i[2]?i[2]:null;return Vn.sh(new v(r),n,e)},t.prototype.Jh=function(t,e){var i=this.Eh.exec(t);hn(null!==i,"Cannot parse query target key '"+t+"'");var n=Number(i[1]);return qn.sh(n,e)},t.prototype.Sh=function(t){return Gn.sh(t)},t.prototype.Hh=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(sn("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.dh.Xh(t.batchId,t.state,t.error)]}))}))},t.prototype.Yh=function(t){return this.dh.$h(t.targetId,t.state,t.error)},t.prototype.Wh=function(t,e){var i=this,n=this.Ch();e?this.wh[t]=e:delete this.wh[t];var s=this.Ch(),r=[],o=[];return s.forEach((function(t){return c.__awaiter(i,void 0,void 0,(function(){return c.__generator(this,(function(e){return n.has(t)||r.push(t),[2]}))}))})),n.forEach((function(t){return c.__awaiter(i,void 0,void 0,(function(){return c.__generator(this,(function(e){return s.has(t)||o.push(t),[2]}))}))})),this.dh.Zh(r,o)},t.prototype.Ah=function(t){this.wh[t.clientId]&&this.vh(t.onlineState)},t}(),Kn=function(){function t(){this.tc=new zn,this.nc={},this.dh=null,this.vh=null,this.Kr=null}return t.prototype.kh=function(t){},t.prototype.Oh=function(t,e,i){},t.prototype.Vh=function(t){return this.tc.hh(t),this.nc[t]||"not-current"},t.prototype.qh=function(t,e,i){this.nc[t]=e},t.prototype.xh=function(t){this.tc.ah(t)},t.prototype.jh=function(t){return this.tc.activeTargetIds.has(t)},t.prototype.Lh=function(t){delete this.nc[t]},t.prototype.Ch=function(){return this.tc.activeTargetIds},t.prototype.Ph=function(t){return this.tc.activeTargetIds.has(t)},t.prototype.start=function(){return this.tc=new zn,Promise.resolve()},t.prototype.ro=function(t,e,i){},t.prototype.Mh=function(t){},t.prototype.shutdown=function(){},t.prototype.Yr=function(t){},t}(),Wn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jn=function(){function t(){this.ic=[]}return t.prototype.ec=function(t){this.ic.push(t)},t.prototype.rc=function(){this.ic.forEach((function(t){return t()}))},t}(),Yn=function(){function t(t,e,i){this.uc=t,this.Hs=e,this.sc=i}return t.prototype.Bo=function(t,e){var i=this;return this.Hs.oc(t,e).next((function(n){return i.hc(t,e,n)}))},t.prototype.hc=function(t,e,i){return this.uc.xs(t,e).next((function(t){for(var n=0,r=i;n<r.length;n++)t=r[n].Wt(e,t);return t}))},t.prototype.cc=function(t,e,i){var n=Se();return e.forEach((function(t,e){for(var r=0,u=i;r<u.length;r++)e=u[r].Wt(t,e);n=n.dt(t,e)})),n},t.prototype.so=function(t,e){var i=this;return this.uc.getEntries(t,e).next((function(e){return i.Vo(t,e)}))},t.prototype.Vo=function(t,e){var i=this;return this.Hs.ac(t,e).next((function(n){var r=i.cc(t,e,n),u=Ne();return r.forEach((function(t,e){e||(e=new Zt(t,dt.q())),u=u.dt(t,e)})),u}))},t.prototype.Jo=function(t,e,i){return e.Nn()?this.fc(t,e.path):e.ui()?this.lc(t,e,i):this.dc(t,e,i)},t.prototype.fc=function(t,e){return this.Bo(t,new ft(e)).next((function(t){var e=Oe();return t instanceof $t&&(e=e.dt(t.key,t)),e}))},t.prototype.lc=function(t,e,i){var n=this;hn(e.path.Y(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,u=Oe();return this.sc.vc(t,r).next((function(s){return An.forEach(s,(function(s){var o=e.Hn(s.child(r));return n.dc(t,o,i).next((function(t){t.forEach((function(t,e){u=u.dt(t,e)}))}))})).next((function(){return u}))}))},t.prototype.dc=function(t,e,i){var n,r,u=this;return this.uc.Jo(t,e,i).next((function(i){return n=i,u.Hs.wc(t,e)})).next((function(e){return r=e,u.mc(t,r,n).next((function(t){n=t;for(var e=0,i=r;e<i.length;e++)for(var u=i[e],s=0,o=u.mutations;s<o.length;s++){var c=o[s],h=c.key,a=n.get(h),f=c.Wt(a,a,u.En);n=f instanceof $t?n.dt(h,f):n.remove(h)}}))})).next((function(){return n.forEach((function(t,i){e.matches(i)||(n=n.remove(t))})),n}))},t.prototype.mc=function(t,e,i){for(var n=Pe(),r=0,u=e;r<u.length;r++)for(var s=0,o=u[r].mutations;s<o.length;s++){var c=o[s];c instanceof Dt&&null===i.get(c.key)&&(n=n.add(c.key))}var h=i;return this.uc.getEntries(t,n).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof $t&&(h=h.dt(t,e))})),h}))},t}(),Xn=function(){function t(){}return t.prototype.io=function(t){this.gc=t},t.prototype.Jo=function(t,e,i,n){var r=this;return hn(void 0!==this.gc,"setLocalDocumentsView() not called"),e.Jn()||i.isEqual(dt.MIN)?this.bc(t,e):this.gc.so(t,n).next((function(u){var s=r.pc(e,u);return(e.ii()||e.ei())&&r.yc(e.Fn,s,n,i)?r.bc(t,e):(li()<=0&&sn("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),e.toString()),r.gc.Jo(t,e,i).next((function(t){return s.forEach((function(e){t=t.dt(e.key,e)})),t})))}))},t.prototype.pc=function(t,e){var i=new mt((function(e,i){return t.Xn(e,i)}));return e.forEach((function(e,n){n instanceof $t&&t.matches(n)&&(i=i.add(n))})),i},t.prototype.yc=function(t,e,i,n){if(i.size!==e.size)return!0;var r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.B(n)>0)},t.prototype.bc=function(t,e){return li()<=0&&sn("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.gc.Jo(t,e,dt.MIN)},t}();function Qn(t){for(var e="",i=0;i<t.length;i++)e.length>0&&(e=Zn(e)),e=$n(t.get(i),e);return Zn(e)}function $n(t,e){for(var i=e,n=t.length,r=0;r<n;r++){var u=t.charAt(r);switch(u){case"\0":i+="";break;case"":i+="";break;default:i+=u}}return i}function Zn(t){return t+""}function er(t){var e=t.length;if(hn(e>=2,"Invalid path "+t),2===e)return hn(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),ut.rt;for(var i=e-2,n=[],r="",u=0;u<e;){var s=t.indexOf("",u);switch((s<0||s>i)&&cn('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var o=t.substring(u,s),c=void 0;0===r.length?c=o:(c=r+=o,r=""),n.push(c);break;case"":r+=t.substring(u,s),r+="\0";break;case"":r+=t.substring(u,s+1);break;default:cn('Invalid encoded resource path: "'+t+'"')}u=s+2}return new ut(n)}var nr=function(){function t(){this._c=new rr}return t.prototype.Ic=function(t,e){return this._c.add(e),An.resolve()},t.prototype.vc=function(t,e){return An.resolve(this._c.getEntries(e))},t}(),rr=function(){function t(){this.index={}}return t.prototype.add=function(t){hn(t.length%2==1,"Expected a collection path.");var e=t.$(),i=t.J(),n=this.index[e]||new mt(ut.W),r=!n.has(i);return this.index[e]=n.add(i),r},t.prototype.has=function(t){var e=t.$(),i=t.J(),n=this.index[e];return n&&n.has(i)},t.prototype.getEntries=function(t){return(this.index[t]||new mt(ut.W)).nt()},t}(),ir=function(){function t(t,e){this.sc=t,this.Ks=e,this.Hs=[],this.Tc=1,this.lastStreamToken=rt.k,this.Ec=new mt(Pn.Rn)}return t.prototype.Dc=function(t){return An.resolve(0===this.Hs.length)},t.prototype.vo=function(t,e,i){var n=e.batchId,r=this.Rc(n,"acknowledged");hn(0===r,"Can only acknowledge the first batch in the mutation queue");var u=this.Hs[r];return hn(n===u.batchId,"Queue ordering failure: expected batch "+n+", got batch "+u.batchId),this.lastStreamToken=i,An.resolve()},t.prototype.Eo=function(t){return An.resolve(this.lastStreamToken)},t.prototype.Do=function(t,e){return this.lastStreamToken=e,An.resolve()},t.prototype.fo=function(t,e,i,n){hn(0!==n.length,"Mutation batches should not be empty");var r=this.Tc;this.Tc++,this.Hs.length>0&&hn(this.Hs[this.Hs.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var u=new mn(r,e,i,n);this.Hs.push(u);for(var s=0,o=n;s<o.length;s++){var c=o[s];this.Ec=this.Ec.add(new Pn(c.key,r)),this.sc.Ic(t,c.key.path.J())}return An.resolve(u)},t.prototype._o=function(t,e){return An.resolve(this.Sc(e))},t.prototype.do=function(t,e){var i=this.Sc(e);return hn(null!=i,"Failed to find local mutation batch."),An.resolve(i.keys())},t.prototype.Lo=function(t,e){var i=e+1,n=this.Ac(i),r=n<0?0:n;return An.resolve(this.Hs.length>r?this.Hs[r]:null)},t.prototype.To=function(){return An.resolve(0===this.Hs.length?-1:this.Tc-1)},t.prototype.uo=function(t){return An.resolve(this.Hs.slice())},t.prototype.oc=function(t,e){var i=this,n=new Pn(e,0),r=new Pn(e,Number.POSITIVE_INFINITY),u=[];return this.Ec.qt([n,r],(function(t){hn(e.isEqual(t.key),"Should only iterate over a single key's batches");var n=i.Sc(t.Ps);hn(null!==n,"Batches in the index must exist in the main table"),u.push(n)})),An.resolve(u)},t.prototype.ac=function(t,e){var i=this,n=new mt(ln);return e.forEach((function(t){var e=new Pn(t,0),r=new Pn(t,Number.POSITIVE_INFINITY);i.Ec.qt([e,r],(function(e){hn(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),n=n.add(e.Ps)}))})),An.resolve(this.Cc(n))},t.prototype.wc=function(t,e){hn(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=e.path,n=i.length+1,r=i;ft.ct(r)||(r=r.child(""));var u=new Pn(new ft(r),0),s=new mt(ln);return this.Ec.Bt((function(t){var e=t.key.path;return!!i.Z(e)&&(e.length===n&&(s=s.add(t.Ps)),!0)}),u),An.resolve(this.Cc(s))},t.prototype.Cc=function(t){var e=this,i=[];return t.forEach((function(t){var n=e.Sc(t);null!==n&&i.push(n)})),i},t.prototype.Io=function(t,e){var i=this;hn(0===this.Rc(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.Hs.shift();var n=this.Ec;return An.forEach(e.mutations,(function(r){var u=new Pn(r.key,e.batchId);return n=n.delete(u),i.Ks.Pc(t,r.key)})).next((function(){i.Ec=n}))},t.prototype.th=function(t){},t.prototype.Cs=function(t,e){var i=new Pn(e,0),n=this.Ec.Mt(i);return An.resolve(e.isEqual(n&&n.key))},t.prototype.po=function(t){return 0===this.Hs.length&&hn(this.Ec.Y(),"Document leak -- detected dangling mutation references when queue is empty."),An.resolve()},t.prototype.Rc=function(t,e){var i=this.Ac(t);return hn(i>=0&&i<this.Hs.length,"Batches must exist to be "+e),i},t.prototype.Ac=function(t){return 0===this.Hs.length?0:t-this.Hs[0].batchId},t.prototype.Sc=function(t){var e=this.Ac(t);if(e<0||e>=this.Hs.length)return null;var i=this.Hs[e];return hn(i.batchId===t,"If found batch must match"),i},t}(),or=function(){function t(t,e){this.sc=t,this.kc=e,this.docs=new lt(ft.W),this.size=0}return t.prototype.Fs=function(t,e,i){hn(!i.isEqual(dt.MIN),"Cannot add a document with a read time of zero");var n=e.key,r=this.docs.get(n),u=r?r.size:0,s=this.kc(e);return this.docs=this.docs.dt(n,{Nc:e,size:s,readTime:i}),this.size+=s-u,this.sc.Ic(t,n.path.J())},t.prototype.Us=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.xs=function(t,e){var i=this.docs.get(e);return An.resolve(i?i.Nc:null)},t.prototype.getEntries=function(t,e){var i=this,n=Se();return e.forEach((function(t){var e=i.docs.get(t);n=n.dt(t,e?e.Nc:null)})),An.resolve(n)},t.prototype.Jo=function(t,e,i){hn(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Oe(),r=new ft(e.path.child("")),u=this.docs._t(r);u.St();){var s=u.Rt(),o=s.key,c=s.value,h=c.Nc,a=c.readTime;if(!e.path.Z(o.path))break;a.B(i)<=0||h instanceof $t&&e.matches(h)&&(n=n.dt(h.key,h))}return An.resolve(n)},t.prototype.Oc=function(t,e){return An.forEach(this.docs,(function(t){return e(t)}))},t.prototype.eh=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.uh=function(t){return An.resolve(dt.MIN)},t.prototype.wo=function(e){return new t.Fc(this)},t.prototype.Vc=function(t){return An.resolve(this.size)},t.Fc=function(t){function i(e){var i=t.call(this)||this;return i.Uc=e,i}return c.__extends(i,t),i.prototype.qs=function(t){var e=this,i=[];return this.ks.forEach((function(n,r){r?i.push(e.Uc.Fs(t,r,e.readTime)):e.Uc.Us(n)})),An.Vu(i)},i.prototype.js=function(t,e){return this.Uc.xs(t,e)},i.prototype.Ls=function(t,e){return this.Uc.getEntries(t,e)},i}(xn),t}(),sr=function(){function t(t,e){this.xc=t,hn((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.jc(void 0!==e?e:this.xc)}return t.prototype.next=function(){var t=this.Lc;return this.Lc+=2,t},t.prototype.after=function(t){return this.jc(t+2),this.next()},t.prototype.jc=function(t){hn((1&t)===this.xc,"Cannot supply target ID from different generator ID"),this.Lc=t},t.qc=function(){return new t(0,2)},t.Bc=function(){return new t(1)},t}(),ar=function(){function t(t){this.persistence=t,this.Mc=new wn((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=dt.MIN,this.highestTargetId=0,this.Qc=0,this.Gc=new Cn,this.targetCount=0,this.Wc=sr.qc()}return t.prototype.oe=function(t,e){return this.Mc.forEach((function(t,i){return e(i)})),An.resolve()},t.prototype.Ro=function(t){return An.resolve(this.lastRemoteSnapshotVersion)},t.prototype.zc=function(t){return An.resolve(this.Qc)},t.prototype.Go=function(t){var e=this.Wc.after(this.highestTargetId);return this.highestTargetId=e,An.resolve(e)},t.prototype.Fo=function(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Qc&&(this.Qc=e),An.resolve()},t.prototype.Kc=function(t){this.Mc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.Qc&&(this.Qc=t.sequenceNumber)},t.prototype.Wo=function(t,e){return hn(!this.Mc.has(e.target),"Adding a target that already exists"),this.Kc(e),this.targetCount+=1,An.resolve()},t.prototype.No=function(t,e){return hn(this.Mc.has(e.target),"Updating a non-existent target"),this.Kc(e),An.resolve()},t.prototype.Hc=function(t,e){return hn(this.targetCount>0,"Removing a target from an empty cache"),hn(this.Mc.has(e.target),"Removing a non-existent target from the cache"),this.Mc.delete(e.target),this.Gc.Rs(e.targetId),this.targetCount-=1,An.resolve()},t.prototype.ds=function(t,e,i){var n=this,r=0,u=[];return this.Mc.forEach((function(s,o){o.sequenceNumber<=e&&null===i.get(o.targetId)&&(n.Mc.delete(s),u.push(n.Jc(t,o.targetId)),r++)})),An.Vu(u).next((function(){return r}))},t.prototype.Yc=function(t){return An.resolve(this.targetCount)},t.prototype.Qo=function(t,e){var i=this.Mc.get(e)||null;return An.resolve(i)},t.prototype.be=function(t,e){return cn("Not yet implemented.")},t.prototype.Co=function(t,e,i){this.Gc.Is(e,i);var n=this.persistence.Ks,r=[];return n&&e.forEach((function(e){r.push(n._s(t,e))})),An.Vu(r)},t.prototype.Ao=function(t,e,i){this.Gc.Ds(e,i);var n=this.persistence.Ks,r=[];return n&&e.forEach((function(e){r.push(n.Ts(t,e))})),An.Vu(r)},t.prototype.Jc=function(t,e){return this.Gc.Rs(e),An.resolve()},t.prototype.Ho=function(t,e){var i=this.Gc.As(e);return An.resolve(i)},t.prototype.Cs=function(t,e){return An.resolve(this.Gc.Cs(e))},t}(),ur="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",cr=function(){function t(t,e){var i=this;this.clientId=t,this.Xc={},this.$c=new In(0),this.Zc=!1,this.Zc=!0,this.Ks=e(this),this.$s=new ar(this),this.sc=new nr,this.uc=new or(this.sc,(function(t){return i.Ks.ta(t)}))}return t.prototype.shutdown=function(){return this.Zc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"ss",{get:function(){return this.Zc},enumerable:!0,configurable:!0}),t.prototype.$o=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.na=function(t){return t(!0)},t.prototype.ia=function(){},t.prototype.nh=function(t){},t.prototype.no=function(){return this.sc},t.prototype.Js=function(t){var e=this.Xc[t.i()];return e||(e=new ir(this.sc,this.Ks),this.Xc[t.i()]=e),e},t.prototype.Zs=function(){return this.$s},t.prototype.Xs=function(){return this.uc},t.prototype.runTransaction=function(t,e,i){var n=this;sn("MemoryPersistence","Starting transaction:",t);var r=new fr(this.$c.next());return this.Ks.ea(),i(r).next((function(t){return n.Ks.ra(r).next((function(){return t}))})).Ou().then((function(t){return r.rc(),t}))},t.prototype.ua=function(t,e){return An.Uu((i=this.Xc,n=[],D(i,(function(t,e){return n.push(e)})),n).map((function(i){return function(){return i.Cs(t,e)}})));var i,n},t}(),fr=function(t){function i(e){var i=t.call(this)||this;return i.Po=e,i}return c.__extends(i,t),i}(Jn),lr=function(){function t(t){this.persistence=t,this.sa=null,this.oa=null}return Object.defineProperty(t.prototype,"ha",{get:function(){if(this.oa)return this.oa;throw cn("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.zs=function(t){this.sa=t},t.prototype._s=function(t,e){return this.ha.delete(e),An.resolve()},t.prototype.Ts=function(t,e){return this.ha.add(e),An.resolve()},t.prototype.Pc=function(t,e){return this.ha.add(e),An.resolve()},t.prototype.removeTarget=function(t,e){var i=this,n=this.persistence.Zs();return n.Ho(t,e.targetId).next((function(t){t.forEach((function(t){return i.ha.add(t)}))})).next((function(){return n.Hc(t,e)}))},t.prototype.ea=function(){this.oa=new Set},t.prototype.ra=function(t){var e=this,i=this.persistence.Xs().wo();return An.forEach(this.ha,(function(n){return e.ca(t,n).next((function(t){t||i.Us(n)}))})).next((function(){return e.oa=null,i.apply(t)}))},t.prototype.Oo=function(t,e){var i=this;return this.ca(t,e).next((function(t){t?i.ha.delete(e):i.ha.add(e)}))},t.prototype.ta=function(t){return 0},t.prototype.ca=function(t,e){var i=this;return An.Uu([function(){return i.persistence.Zs().Cs(t,e)},function(){return i.persistence.ua(t,e)},function(){return An.resolve(i.sa.Cs(e))}])},t}(),pr=function(){function t(){}return t.prototype.initialize=function(t,e,i,n,r,u){if(u.aa)throw new m(y.FAILED_PRECONDITION,ur);return this.clientId=n,Promise.resolve()},t.prototype.fa=function(){var t=!1;return{ss:t,start:function(){return t=!0},stop:function(){return t=!1}}},t.prototype.la=function(){return hn(!!this.clientId,"initialize() not called"),new cr(this.clientId,(function(t){return new lr(t)}))},t.prototype.da=function(){return new Kn},t.prototype.clearPersistence=function(){throw new m(y.FAILED_PRECONDITION,ur)},t}(),dr=function(){function t(t,e,i,n,r){void 0===i&&(i=1e3),void 0===n&&(n=1.5),void 0===r&&(r=6e4),this.fh=t,this.Zr=e,this.va=i,this.wa=n,this.ma=r,this.ga=0,this.ba=null,this.pa=Date.now(),this.reset()}return t.prototype.reset=function(){this.ga=0},t.prototype.ya=function(){this.ga=this.ma},t.prototype._a=function(t){var e=this;this.cancel();var i=Math.floor(this.ga+this.Ia()),n=Math.max(0,Date.now()-this.pa),r=Math.max(0,i-n);this.ga>0&&sn("ExponentialBackoff","Backing off for "+r+" ms (base delay: "+this.ga+" ms, delay with jitter: "+i+" ms, last attempt: "+n+" ms ago)"),this.ba=this.fh.yu(this.Zr,r,(function(){return e.pa=Date.now(),t()})),this.ga*=this.wa,this.ga<this.va&&(this.ga=this.va),this.ga>this.ma&&(this.ga=this.ma)},t.prototype.cancel=function(){null!==this.ba&&(this.ba.cancel(),this.ba=null)},t.prototype.Ia=function(){return(Math.random()-.5)*this.ga},t}(),vr=function(){function t(t,e,i,n,r,u){this.fh=t,this.Ta=i,this.connection=n,this.Ea=r,this.listener=u,this.state=0,this.Da=0,this.Ra=null,this.stream=null,this.Sa=new dr(t,e)}return t.prototype.Aa=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ca=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?(hn(0===this.state,"Already started"),this.auth()):this.Pa()},t.prototype.stop=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.Aa()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ka=function(){hn(!this.Aa(),"Can only inhibit backoff in a stopped state"),this.state=0,this.Sa.reset()},t.prototype.Na=function(){var t=this;this.Ca()&&null===this.Ra&&(this.Ra=this.fh.yu(this.Ta,6e4,(function(){return t.Oa()})))},t.prototype.Fa=function(t){this.Va(),this.stream.send(t)},t.prototype.Oa=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){return this.Ca()?[2,this.close(0)]:[2]}))}))},t.prototype.Va=function(){this.Ra&&(this.Ra.cancel(),this.Ra=null)},t.prototype.close=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(i){switch(i.label){case 0:return hn(this.Aa(),"Only started streams should be closed."),hn(3===t||ee(e),"Can't provide an error when not in an error state."),this.Va(),this.Sa.cancel(),this.Da++,3!==t?this.Sa.reset():e&&e.code===y.RESOURCE_EXHAUSTED?(an(e.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.Sa.ya()):e&&e.code===y.UNAUTHENTICATED&&this.Ea.l(),null!==this.stream&&(this.Ua(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.xa(e)];case 1:return i.sent(),[2]}}))}))},t.prototype.Ua=function(){},t.prototype.auth=function(){var t=this;hn(0===this.state,"Must be in initial state to auth"),this.state=1;var e=this.ja(this.Da),i=this.Da;this.Ea.getToken().then((function(e){t.Da===i&&t.La(e)}),(function(i){e((function(){var e=new m(y.UNKNOWN,"Fetching auth token failed: "+i.message);return t.qa(e)}))}))},t.prototype.La=function(t){var e=this;hn(1===this.state,"Trying to start stream in a non-starting state");var i=this.ja(this.Da);this.stream=this.Ba(t),this.stream.Ma((function(){i((function(){return hn(1===e.state,"Expected stream to be in state Starting, but was "+e.state),e.state=2,e.listener.Ma()}))})),this.stream.xa((function(t){i((function(){return e.qa(t)}))})),this.stream.onMessage((function(t){i((function(){return e.onMessage(t)}))}))},t.prototype.Pa=function(){var t=this;hn(3===this.state,"Should only perform backoff when in Error state"),this.state=4,this.Sa._a((function(){return c.__awaiter(t,void 0,void 0,(function(){return c.__generator(this,(function(t){return hn(4===this.state,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),hn(this.Aa(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.qa=function(t){return hn(this.Aa(),"Can't handle server close on non-started stream"),sn("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ja=function(t){var e=this;return function(i){e.fh.ou((function(){return e.Da===t?i():(sn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),yr=function(t){function i(e,i,n,r,u){var s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",i,n,u)||this;return s.serializer=r,s}return c.__extends(i,t),i.prototype.Ba=function(t){return this.connection.Qa("Listen",t)},i.prototype.onMessage=function(t){this.Sa.reset();var e=this.serializer.Xe(t),i=this.serializer.Ze(t);return this.listener.Ga(e,i)},i.prototype.watch=function(t){var e={};e.database=this.serializer.Ue,e.addTarget=this.serializer.Yn(t);var i=this.serializer._r(t);i&&(e.labels=i),this.Fa(e)},i.prototype.Wa=function(t){var e={};e.database=this.serializer.Ue,e.removeTarget=t,this.Fa(e)},i}(vr),mr=function(t){function i(e,i,n,r,u){var s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",i,n,u)||this;return s.serializer=r,s.za=!1,s.lastStreamToken=rt.k,s}return c.__extends(i,t),Object.defineProperty(i.prototype,"Ka",{get:function(){return this.za},enumerable:!0,configurable:!0}),i.prototype.start=function(){this.za=!1,t.prototype.start.call(this)},i.prototype.Ua=function(){this.za&&this.Ha([])},i.prototype.Ba=function(t){return this.connection.Qa("Write",t)},i.prototype.onMessage=function(t){if(hn(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.De(t.streamToken),this.za){this.Sa.reset();var e=this.serializer.cr(t.writeResults,t.commitTime),i=this.serializer.fromVersion(t.commitTime);return this.listener.Ja(i,e)}return hn(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.za=!0,this.listener.Ya()},i.prototype.Xa=function(){hn(this.Ca(),"Writing handshake requires an opened stream"),hn(!this.za,"Handshake already completed");var t={};t.database=this.serializer.Ue,this.Fa(t)},i.prototype.Ha=function(t){var e=this;hn(this.Ca(),"Writing mutations requires an opened stream"),hn(this.za,"Handshake must be complete before writing mutations"),hn(this.lastStreamToken.P()>0,"Trying to write mutation without a token");var i={streamToken:this.serializer.Ee(this.lastStreamToken),writes:t.map((function(t){return e.serializer.tr(t)}))};this.Fa(i)},i}(vr),gr=function(){function t(t,e,i,n){this.fh=t,this.connection=e,this.credentials=i,this.serializer=n}return t.prototype.$a=function(t){return new mr(this.fh,this.connection,this.credentials,this.serializer,t)},t.prototype.Za=function(t){return new yr(this.fh,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,i={database:this.serializer.Ue,writes:t.map((function(t){return e.serializer.tr(t)}))};return this.tf("Commit",i).then((function(t){return e.serializer.cr(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,i={database:this.serializer.Ue,documents:t.map((function(t){return e.serializer.ke(t)}))};return this.nf("BatchGetDocuments",i).then((function(i){var n=Ne();i.forEach((function(t){var i=e.serializer.He(t);n=n.dt(i.key,i)}));var r=[];return t.forEach((function(t){var e=n.get(t);hn(!!e,"Missing entity in write response for "+t),r.push(e)})),r}))},t.prototype.tf=function(t,e){var i=this;return this.credentials.getToken().then((function(n){return i.connection.tf(t,e,n)})).catch((function(t){throw t.code===y.UNAUTHENTICATED&&i.credentials.l(),t}))},t.prototype.nf=function(t,e){var i=this;return this.credentials.getToken().then((function(n){return i.connection.nf(t,e,n)})).catch((function(t){throw t.code===y.UNAUTHENTICATED&&i.credentials.l(),t}))},t}(),wr=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];L("FieldPath",t,"fieldNames",1);for(var i=0;i<t.length;++i)if(M("FieldPath","string",i,t[i]),0===t[i].length)throw new m(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.if=new ht(t)}return t.documentId=function(){return t.ef},t.prototype.isEqual=function(e){if(!(e instanceof t))throw J("isEqual","FieldPath",1,e);return this.if.isEqual(e.if)},t.ef=new t(ht.ot().it()),t}(),Ir=new RegExp("[~\\*/\\[\\]]"),Er=function(){function t(t){this.rf=t}return t.delete=function(){return C("FieldValue.delete",arguments),_r.instance},t.serverTimestamp=function(){return C("FieldValue.serverTimestamp",arguments),Tr.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x("FieldValue.arrayUnion",arguments,1),new Ar(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x("FieldValue.arrayRemove",arguments,1),new Nr(t)},t.increment=function(t){return M("FieldValue.increment","number",1,t),P("FieldValue.increment",arguments,1),new Sr(t)},t.prototype.isEqual=function(t){return this===t},t}(),_r=function(t){function i(){return t.call(this,"FieldValue.delete")||this}return c.__extends(i,t),i.instance=new i,i}(Er),Tr=function(t){function i(){return t.call(this,"FieldValue.serverTimestamp")||this}return c.__extends(i,t),i.instance=new i,i}(Er),Ar=function(t){function i(e){var i=t.call(this,"FieldValue.arrayUnion")||this;return i.uf=e,i}return c.__extends(i,t),i}(Er),Nr=function(t){function i(e){var i=t.call(this,"FieldValue.arrayRemove")||this;return i.uf=e,i}return c.__extends(i,t),i}(Er),Sr=function(t){function i(e){var i=t.call(this,"FieldValue.increment")||this;return i.sf=e,i}return c.__extends(i,t),i}(Er),kr=N(Er,"Use FieldValue.<field>() instead."),Or=/^__.*__$/,Dr=function(){function t(t,e,i){this.data=t,this.sn=e,this.fieldTransforms=i}return t.prototype.hf=function(t,e){var i=[];return null!==this.sn?i.push(new Dt(t,this.data,this.sn,e)):i.push(new Ot(t,this.data,e)),this.fieldTransforms.length>0&&i.push(new Rt(t,this.fieldTransforms)),i},t}(),Rr=function(){function t(t,e,i){this.data=t,this.sn=e,this.fieldTransforms=i}return t.prototype.hf=function(t,e){var i=[new Dt(t,this.data,this.sn,e)];return this.fieldTransforms.length>0&&i.push(new Rt(t,this.fieldTransforms)),i},t}();function Cr(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cn("Unexpected case for UserDataSource: "+t)}}var Pr=function(){function t(t,e,i,n,r,u){this.cf=t,this.methodName=e,this.path=i,this.af=n,void 0===r&&this.ff(),this.af=void 0!==n&&n,this.fieldTransforms=r||[],this.sn=u||[]}return t.prototype.lf=function(e){var i=null==this.path?null:this.path.child(e),n=new t(this.cf,this.methodName,i,!1,this.fieldTransforms,this.sn);return n.df(e),n},t.prototype.vf=function(e){var i=null==this.path?null:this.path.child(e),n=new t(this.cf,this.methodName,i,!1,this.fieldTransforms,this.sn);return n.ff(),n},t.prototype.wf=function(e){return new t(this.cf,this.methodName,null,!0,this.fieldTransforms,this.sn)},t.prototype.mf=function(t){var e=null===this.path||this.path.Y()?"":" (found in field "+this.path.toString()+")";return new m(y.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.sn.find((function(e){return t.Z(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.Z(e.field)}))},t.prototype.ff=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.df(this.path.get(t))},t.prototype.df=function(t){if(0===t.length)throw this.mf("Document fields must not be empty");if(Cr(this.cf)&&Or.test(t))throw this.mf('Document fields cannot begin and end with "__"')},t}(),xr=function(t,e){this.Dn=t,this.key=e},Lr=function(){function t(t){this.gf=t}return t.prototype.bf=function(t,e){var i=new Pr(0,t,ht.rt);Ur("Data must be an object, but it was:",i,e);var n=this.pf(e,i);return new Dr(n,null,i.fieldTransforms)},t.prototype.yf=function(t,e,i){var n=new Pr(2,t,ht.rt);Ur("Data must be an object, but it was:",n,e);var r,u,s=this.pf(e,n);if(i){for(var o=new mt(ht.W),c=0,h=i;c<h.length;c++){var a=h[c],f=void 0;if(a instanceof wr)f=a.if;else{if("string"!=typeof a)throw cn("Expected stringOrFieldPath to be a string or a FieldPath");f=Fr(t,a)}if(!n.contains(f))throw new m(y.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");o=o.add(f)}r=Tt.Yt(o),u=n.fieldTransforms.filter((function(t){return r.$t(t.field)}))}else r=Tt.Xt(n.sn),u=n.fieldTransforms;return new Dr(s,r,u)},t.prototype._f=function(t,e){var i=this,n=new Pr(1,t,ht.rt);Ur("Data must be an object, but it was:",n,e);var r=new mt(ht.W),u=Jt.wn();D(e,(function(e,s){var o=Fr(t,e),c=n.vf(o);if((s=i.If(s,c))instanceof _r)r=r.add(o);else{var h=i.pf(s,c);null!=h&&(r=r.add(o),u.set(o,h))}}));var s=Tt.Yt(r);return new Rr(u.an(),s,n.fieldTransforms)},t.prototype.Tf=function(t,e,i,n){var r=new Pr(1,t,ht.rt),u=[jr(t,e)],s=[i];if(n.length%2!=0)throw new m(y.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var o=0;o<n.length;o+=2)u.push(jr(t,n[o])),s.push(n[o+1]);var c=new mt(ht.W),h=Jt.wn();for(o=0;o<u.length;++o){var a=u[o],f=r.vf(a),l=this.If(s[o],f);if(l instanceof _r)c=c.add(a);else{var d=this.pf(l,f);null!=d&&(c=c.add(a),h.set(a,d))}}var v=Tt.Yt(c);return new Rr(h.an(),v,r.fieldTransforms)},t.prototype.Ef=function(t,e,i){void 0===i&&(i=!1);var n=new Pr(i?4:3,t,ht.rt),r=this.pf(e,n);return hn(null!=r,"Parsed data should not be null."),hn(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.If=function(t,e){try{return this.gf(t)}catch(t){var i=Vr(t);throw e.mf(i)}},t.prototype.pf=function(t,e){if(Mr(t=this.If(t,e)))return Ur("Unsupported field value:",e,t),this.Df(t,e);if(t instanceof Er)return this.Rf(t,e),null;if(e.path&&e.sn.push(e.path),t instanceof Array){if(e.af&&4!==e.cf)throw e.mf("Nested arrays are not supported");return this.Sf(t,e)}return this.Af(t,e)},t.prototype.Df=function(t,e){var i=this,n=new lt(ln);return R(t)?e.path&&e.path.length>0&&e.sn.push(e.path):D(t,(function(t,r){var u=i.pf(r,e.lf(t));null!=u&&(n=n.dt(t,u))})),new Jt(n)},t.prototype.Sf=function(t,e){for(var i=[],n=0,r=0,u=t;r<u.length;r++){var s=u[r],o=this.pf(s,e.wf(n));null==o&&(o=Mt.yn),i.push(o),n++}return new Xt(i)},t.prototype.Rf=function(t,e){if(!Cr(e.cf))throw e.mf(t.rf+"() can only be used with update() and set()");if(null===e.path)throw e.mf(t.rf+"() is not currently supported inside arrays");if(t instanceof _r){if(2!==e.cf)throw 1===e.cf?(hn(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.mf("FieldValue.delete() can only appear at the top level of your update data")):e.mf("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.sn.push(e.path)}else if(t instanceof Tr)e.fieldTransforms.push(new At(e.path,wt.instance));else if(t instanceof Ar){var i=this.Cf(t.rf,t.uf),n=new bt(i);e.fieldTransforms.push(new At(e.path,n))}else if(t instanceof Nr){i=this.Cf(t.rf,t.uf);var r=new It(i);e.fieldTransforms.push(new At(e.path,r))}else if(t instanceof Sr){var u=this.Ef("FieldValue.increment",t.sf),s=new Et(u);e.fieldTransforms.push(new At(e.path,s))}else cn("Unknown FieldValue type: "+t)},t.prototype.Af=function(t,e){if(null===t)return Mt.yn;if("number"==typeof t)return re(t)?new Vt(t):new qt(t);if("boolean"==typeof t)return Ut.of(t);if("string"==typeof t)return new Bt(t);if(t instanceof Date)return new Gt(st.fromDate(t));if(t instanceof st)return new Gt(new st(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof ot)return new Wt(t);if(t instanceof nt)return new Ht(t);if(t instanceof xr)return new Kt(t.Dn,t.key);throw e.mf("Unsupported field value: "+H(t))},t.prototype.Cf=function(t,e){var i=this;return e.map((function(e,n){var r=new Pr(3,t,ht.rt);return i.pf(e,r.wf(n))}))},t}();function Mr(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof st||t instanceof ot||t instanceof nt||t instanceof xr||t instanceof Er)}function Ur(t,e,i){if(!Mr(i)||!z(i)){var n=H(i);throw"an object"===n?e.mf(t+" a custom object"):e.mf(t+" "+n)}}function jr(t,e){if(e instanceof wr)return e.if;if("string"==typeof e)return Fr(t,e);throw new m(y.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Fr(t,e){try{return function(t){if(t.search(Ir)>=0)throw new m(y.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(wr.bind.apply(wr,c.__spreadArrays([void 0],t.split("."))))}catch(e){throw new m(y.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).if}catch(e){var i=Vr(e);throw new m(y.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+i)}}function Vr(t){return t instanceof Error?t.message:t.toString()}var qr=function(){function t(t){this.Pf=t,this.kf=Re(),this.mutations=[],this.Nf=!1,this.Of=null,this.Ff=new Set}return t.prototype.lookup=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i=this;return c.__generator(this,(function(n){switch(n.label){case 0:if(this.Vf(),this.mutations.length>0)throw new m(y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.Pf.lookup(t)];case 1:return(e=n.sent()).forEach((function(t){t instanceof Zt||t instanceof $t?i.Uf(t):cn("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.hf(t,this.en(t))),this.Ff.add(t)},t.prototype.update=function(t,e){try{this.write(e.hf(t,this.xf(t)))}catch(t){this.Of=t}this.Ff.add(t)},t.prototype.delete=function(t){this.write([new Ct(t,this.en(t))]),this.Ff.add(t)},t.prototype.commit=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e=this;return c.__generator(this,(function(i){switch(i.label){case 0:if(this.Vf(),this.Of)throw this.Of;return t=this.kf,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,i){e.mutations.push(new Pt(t,e.en(t)))})),[4,this.Pf.commit(this.mutations)];case 1:return i.sent(),this.Nf=!0,[2]}}))}))},t.prototype.Uf=function(t){var e;if(t instanceof $t)e=t.version;else{if(!(t instanceof Zt))throw cn("Document in a transaction was a "+t.constructor.name);e=dt.q()}var i=this.kf.get(t.key);if(null!==i){if(!e.isEqual(i))throw new m(y.ABORTED,"Document version changed between two reads.")}else this.kf=this.kf.dt(t.key,e)},t.prototype.en=function(t){var e=this.kf.get(t);return!this.Ff.has(t)&&e?St.updateTime(e):St.NONE},t.prototype.xf=function(t){var e=this.kf.get(t);if(!this.Ff.has(t)&&e){if(e.isEqual(dt.q()))throw new m(y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(e)}return St.exists(!0)},t.prototype.write=function(t){this.Vf(),this.mutations=this.mutations.concat(t)},t.prototype.Vf=function(){hn(!this.Nf,"A transaction object cannot be used after its update callback has been invoked.")},t}(),Br=function(){function t(t,e){this.$r=t,this.vh=e,this.state="Unknown",this.jf=0,this.Lf=null,this.qf=!0}return t.prototype.Bf=function(){var t=this;0===this.jf&&(this.Mf("Unknown"),hn(null===this.Lf,"onlineStateTimer shouldn't be started yet"),this.Lf=this.$r.yu("online_state_timeout",1e4,(function(){return t.Lf=null,hn("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Qf("Backend didn't respond within 10 seconds."),t.Mf("Offline"),Promise.resolve()})))},t.prototype.Gf=function(t){"Online"===this.state?(this.Mf("Unknown"),hn(0===this.jf,"watchStreamFailures must be 0"),hn(null===this.Lf,"onlineStateTimer must be null")):(this.jf++,this.jf>=1&&(this.Wf(),this.Qf("Connection failed 1 times. Most recent error: "+t.toString()),this.Mf("Offline")))},t.prototype.set=function(t){this.Wf(),this.jf=0,"Online"===t&&(this.qf=!1),this.Mf(t)},t.prototype.Mf=function(t){t!==this.state&&(this.state=t,this.vh(t))},t.prototype.Qf=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qf?(an(e),this.qf=!1):sn("OnlineStateTracker",e)},t.prototype.Wf=function(){null!==this.Lf&&(this.Lf.cancel(),this.Lf=null)},t}(),Gr=function(){function t(t,e,i,n,s){var r=this;this.zf=t,this.Pf=e,this.Kf=[],this.Hf={},this.Jf=null,this.networkEnabled=!1,this.isPrimary=!1,this.Yf=s,this.Yf.Xf((function(t){i.ou((function(){return c.__awaiter(r,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.$f()?(sn("RemoteStore","Restarting streams for network reachability change."),[4,this.Zf()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.tl=new Br(i,n),this.nl=this.Pf.Za({Ma:this.il.bind(this),xa:this.el.bind(this),Ga:this.rl.bind(this)}),this.ul=this.Pf.$a({Ma:this.sl.bind(this),xa:this.ol.bind(this),Ya:this.hl.bind(this),Ja:this.Ja.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return c.__awaiter(this,void 0,void 0,(function(){var t;return c.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.$f()?(t=this.ul,[4,this.zf.Eo()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.cl()?this.al():this.tl.set("Unknown"),[4,this.fl()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.ll()];case 1:return t.sent(),this.tl.set("Offline"),[2]}}))}))},t.prototype.ll=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return[4,this.ul.stop()];case 1:return t.sent(),[4,this.nl.stop()];case 2:return t.sent(),this.Kf.length>0&&(sn("RemoteStore","Stopping write stream with "+this.Kf.length+" pending writes"),this.Kf=[]),this.dl(),[2]}}))}))},t.prototype.shutdown=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return sn("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.ll()];case 1:return t.sent(),this.Yf.shutdown(),this.tl.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){S(this.Hf,t.targetId)||(this.Hf[t.targetId]=t,this.cl()?this.al():this.nl.Ca()&&this.vl(t))},t.prototype.wl=function(t){hn(S(this.Hf,t),"unlisten called on target no currently watched: "+t),delete this.Hf[t],this.nl.Ca()&&this.ml(t),R(this.Hf)&&(this.nl.Ca()?this.nl.Na():this.$f()&&this.tl.set("Unknown"))},t.prototype.be=function(t){return this.Hf[t]||null},t.prototype.ge=function(t){return this.dh.ge(t)},t.prototype.vl=function(t){this.Jf.Ji(t.targetId),this.nl.watch(t)},t.prototype.ml=function(t){this.Jf.Ji(t),this.nl.Wa(t)},t.prototype.al=function(){hn(this.cl(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Jf=new He(this),this.nl.start(),this.tl.Bf()},t.prototype.cl=function(){return this.$f()&&!this.nl.Aa()&&!R(this.Hf)},t.prototype.$f=function(){return this.isPrimary&&this.networkEnabled},t.prototype.dl=function(){this.Jf=null},t.prototype.il=function(){return c.__awaiter(this,void 0,void 0,(function(){var t=this;return c.__generator(this,(function(e){return O(this.Hf,(function(e,i){t.vl(i)})),[2]}))}))},t.prototype.el=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){return void 0===t&&hn(!this.cl(),"Watch stream was stopped gracefully while still needed."),this.dl(),this.cl()?(this.tl.Gf(t),this.al()):this.tl.set("Unknown"),[2]}))}))},t.prototype.rl=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:return this.tl.set("Online"),t instanceof Ge&&2===t.state&&t.cause?[2,this.gl(t)]:(t instanceof qe?this.Jf.ee(t):t instanceof Be?this.Jf.fe(t):(hn(t instanceof Ge,"Expected watchChange to be an instance of WatchTargetChange"),this.Jf.se(t)),e.isEqual(dt.MIN)?[3,3]:[4,this.zf.Ro()]);case 1:return i=n.sent(),e.B(i)>=0?[4,this.bl(e)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.bl=function(t){var e=this;hn(!t.isEqual(dt.MIN),"Can't raise event for unknown SnapshotVersion");var i=this.Jf.ve(t);return O(i.Ei,(function(i,n){if(n.resumeToken.P()>0){var r=e.Hf[i];r&&(e.Hf[i]=r.li(n.resumeToken,t))}})),i.Di.forEach((function(t){var i=e.Hf[t];if(i){e.Hf[t]=i.li(rt.k,i.ai),e.ml(t);var n=new be(i.target,t,1,i.sequenceNumber);e.vl(n)}})),this.dh.So(i)},t.prototype.gl=function(t){var e=this;hn(!!t.cause,"Handling target error without a cause");var i=t.cause,n=Promise.resolve();return t.targetIds.forEach((function(t){n=n.then((function(){return c.__awaiter(e,void 0,void 0,(function(){return c.__generator(this,(function(e){return S(this.Hf,t)?(delete this.Hf[t],this.Jf.removeTarget(t),[2,this.dh.pl(t,i)]):[2]}))}))}))})),n},t.prototype.fl=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e;return c.__generator(this,(function(i){switch(i.label){case 0:return this.yl()?(t=this.Kf.length>0?this.Kf[this.Kf.length-1].batchId:-1,[4,this.zf.jo(t)]):[3,4];case 1:return null!==(e=i.sent())?[3,2]:(0===this.Kf.length&&this.ul.Na(),[3,4]);case 2:return this._l(e),[4,this.fl()];case 3:i.sent(),i.label=4;case 4:return this.Il()&&this.Tl(),[2]}}))}))},t.prototype.yl=function(){return this.$f()&&this.Kf.length<10},t.prototype.El=function(){return this.Kf.length},t.prototype._l=function(t){hn(this.yl(),"addToWritePipeline called when pipeline is full"),this.Kf.push(t),this.ul.Ca()&&this.ul.Ka&&this.ul.Ha(t.mutations)},t.prototype.Il=function(){return this.$f()&&!this.ul.Aa()&&this.Kf.length>0},t.prototype.Tl=function(){hn(this.Il(),"startWriteStream() called when shouldStartWriteStream() is false."),this.ul.start()},t.prototype.sl=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){return this.ul.Xa(),[2]}))}))},t.prototype.hl=function(){var t=this;return this.zf.Do(this.ul.lastStreamToken).then((function(){for(var e=0,i=t.Kf;e<i.length;e++){var n=i[e];t.ul.Ha(n.mutations)}})).catch(Mn)},t.prototype.Ja=function(t,e){var i=this;hn(this.Kf.length>0,"Got result for empty write pipeline");var n=this.Kf.shift(),r=gn.from(n,t,e,this.ul.lastStreamToken);return this.dh.Dl(r).then((function(){return i.fl()}))},t.prototype.ol=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e=this;return c.__generator(this,(function(i){return void 0===t&&hn(!this.Il(),"Write stream was stopped gracefully while still needed."),t&&this.Kf.length>0?[2,(this.ul.Ka?this.Rl(t):this.Sl(t)).then((function(){e.Il()&&e.Tl()}))]:[2]}))}))},t.prototype.Sl=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){return Ee(t.code)?(sn("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.ul.lastStreamToken),this.ul.lastStreamToken=rt.k,[2,this.zf.Do(rt.k).catch(Mn)]):[2]}))}))},t.prototype.Rl=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i=this;return c.__generator(this,(function(n){return Ee(r=t.code)&&r!==y.ABORTED?(e=this.Kf.shift(),this.ul.ka(),[2,this.dh.Al(e.batchId,t).then((function(){return i.fl()}))]):[2];var r}))}))},t.prototype.Cl=function(){return new qr(this.Pf)},t.prototype.Zf=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.ll()];case 1:return t.sent(),this.tl.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.Pl=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.$f()?(sn("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Zf()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.kl=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.ll()];case 3:e.sent(),this.tl.set("Unknown"),e.label=4;case 4:return[2]}}))}))},t}(),zr=function(t){this.key=t},Hr=function(t){this.key=t},Kr=function(){function t(t,e){this.query=t,this.Nl=e,this.Ol=null,this.Pi=!1,this.Fl=Pe(),this.yi=Pe(),this.Vl=new Me(t.Xn.bind(t))}return Object.defineProperty(t.prototype,"Ul",{get:function(){return this.Nl},enumerable:!0,configurable:!0}),t.prototype.xl=function(t,e){var i=this,n=e?e.jl:new Ue,r=e?e.Vl:this.Vl,u=e?e.yi:this.yi,s=r,o=!1,c=this.query.ii()&&r.size===this.query.limit?r.last():null,h=this.query.ei()&&r.size===this.query.limit?r.first():null;if(t.bt((function(t,e){var a=r.get(t),f=e instanceof $t?e:null;f&&(hn(t.isEqual(f.key),"Mismatching keys found in document changes: "+t+" != "+f.key),f=i.query.matches(f)?f:null);var l=!!a&&i.yi.has(a.key),d=!!f&&(f.rn||i.yi.has(f.key)&&f.hasCommittedMutations),v=!1;a&&f?a.data().isEqual(f.data())?l!==d&&(n.track({type:3,doc:f}),v=!0):i.Ll(a,f)||(n.track({type:2,doc:f}),v=!0,(c&&i.query.Xn(f,c)>0||h&&i.query.Xn(f,h)<0)&&(o=!0)):!a&&f?(n.track({type:0,doc:f}),v=!0):a&&!f&&(n.track({type:1,doc:a}),v=!0,(c||h)&&(o=!0)),v&&(f?(s=s.add(f),u=d?u.add(t):u.delete(t)):(s=s.delete(t),u=u.delete(t)))})),this.query.ii()||this.query.ei())for(;s.size>this.query.limit;){var a=this.query.ii()?s.last():s.first();s=s.delete(a.key),u=u.delete(a.key),n.track({type:1,doc:a})}return hn(!o||!e,"View was refilled using docs that themselves needed refilling."),{Vl:s,jl:n,yc:o,yi:u}},t.prototype.Ll=function(t,e){return t.rn&&e.hasCommittedMutations&&!e.rn},t.prototype.qs=function(t,e,i){var n=this;hn(!t.yc,"Cannot apply changes that need a refill");var r=this.Vl;this.Vl=t.Vl,this.yi=t.yi;var u=t.jl.bi();u.sort((function(t,e){return function(t,e){var i=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cn("Unknown ChangeType: "+t)}};return i(t)-i(e)}(t.type,e.type)||n.query.Xn(t.doc,e.doc)})),this.ql(i);var s=e?this.Bl():[],o=0===this.Fl.size&&this.Pi?1:0,c=o!==this.Ol;return this.Ol=o,0!==u.length||c?{snapshot:new je(this.query,t.Vl,r,u,t.yi,0===o,c,!1),Ml:s}:{Ml:s}},t.prototype.Ql=function(t){return this.Pi&&"Offline"===t?(this.Pi=!1,this.qs({Vl:this.Vl,jl:new Ue,yi:this.yi,yc:!1},!1)):{Ml:[]}},t.prototype.Gl=function(t){return!this.Nl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).rn},t.prototype.ql=function(t){var e=this;t&&(t.ki.forEach((function(t){return e.Nl=e.Nl.add(t)})),t.Ni.forEach((function(t){return hn(e.Nl.has(t),"Modified document "+t+" not found in view.")})),t.Oi.forEach((function(t){return e.Nl=e.Nl.delete(t)})),this.Pi=t.Pi)},t.prototype.Bl=function(){var t=this;if(!this.Pi)return[];var e=this.Fl;this.Fl=Pe(),this.Vl.forEach((function(e){t.Gl(e.key)&&(t.Fl=t.Fl.add(e.key))}));var i=[];return e.forEach((function(e){t.Fl.has(e)||i.push(new Hr(e))})),this.Fl.forEach((function(t){e.has(t)||i.push(new zr(t))})),i},t.prototype.Wl=function(t){this.Nl=t.Yo,this.Fl=Pe();var e=this.xl(t.documents);return this.qs(e,!0)},t.prototype.zl=function(){return je.Ti(this.query,this.Vl,this.yi,0===this.Ol)},t}(),Wr=function(){function t(t,e,i,n){this.$r=t,this.Kl=e,this.updateFunction=i,this.iu=n,this.Hl=5,this.Sa=new dr(this.$r,"retry_transaction")}return t.prototype.run=function(){this.Jl()},t.prototype.Jl=function(){var t=this;this.Sa._a((function(){return c.__awaiter(t,void 0,void 0,(function(){var t,e,i=this;return c.__generator(this,(function(n){return t=this.Kl.Cl(),(e=this.Yl(t))&&e.then((function(e){i.$r.ou((function(){return t.commit().then((function(){i.iu.resolve(e)})).catch((function(t){i.Xl(t)}))}))})).catch((function(t){i.Xl(t)})),[2]}))}))}))},t.prototype.Yl=function(t){try{var e=this.updateFunction(t);return!ee(e)&&e.catch&&e.then?e:(this.iu.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.iu.reject(t),null}},t.prototype.Xl=function(t){var e=this;this.Hl>0&&this.$l(t)?(this.Hl-=1,this.$r.ou((function(){return e.Jl(),Promise.resolve()}))):this.iu.reject(t)},t.prototype.$l=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ee(e)}return!1},t}(),Jr=function(t,e,i){this.query=t,this.targetId=e,this.view=i},tr=function(t){this.key=t,this.Zl=!1},Yr=function(){function t(t,e,i,n){this.zf=t,this.Kl=e,this.td=i,this.currentUser=n,this.nd=null,this.ed=new wn((function(t){return t.canonicalId()})),this.rd={},this.ud=new lt(ft.W),this.sd={},this.od=new Cn,this.hd={},this.ad=new Map,this.fd=sr.Bc(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"ld",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){hn(null!==t,"SyncEngine listener cannot be null"),hn(null===this.nd,"SyncEngine already has a subscriber."),this.nd=t},t.prototype.listen=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r,s;return c.__generator(this,(function(u){switch(u.label){case 0:return this.dd("listen()"),(n=this.ed.get(t))?(e=n.targetId,this.td.Vh(e),i=n.view.zl(),[3,4]):[3,1];case 1:return[4,this.zf.Mo(t.Yn())];case 2:return r=u.sent(),s=this.td.Vh(r.targetId),e=r.targetId,[4,this.vd(t,e,"current"===s)];case 3:i=u.sent(),this.isPrimary&&this.Kl.listen(r),u.label=4;case 4:return this.nd.Ga([i]),[2,e]}}))}))},t.prototype.vd=function(t,e,i){return c.__awaiter(this,void 0,void 0,(function(){var n,r,s,o,h,f;return c.__generator(this,(function(u){switch(u.label){case 0:return[4,this.zf.Ko(t,!0)];case 1:return n=u.sent(),r=new Kr(t,n.Yo),s=r.xl(n.documents),o=Ve.Ci(e,i&&"Offline"!==this.onlineState),hn(0===(h=r.qs(s,!0===this.isPrimary,o)).Ml.length,"View returned limbo docs before target ack from the server."),hn(!!h.snapshot,"applyChanges for new view should always return a snapshot"),f=new Jr(t,e,r),this.ed.set(t,f),this.rd[e]||(this.rd[e]=[]),this.rd[e].push(t),[2,h.snapshot]}}))}))},t.prototype.wd=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:return[4,this.zf.Ko(t.query,!0)];case 1:return e=n.sent(),i=t.view.Wl(e),this.isPrimary&&this.md(t.targetId,i.Ml),[2,i]}}))}))},t.prototype.wl=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n=this;return c.__generator(this,(function(r){switch(r.label){case 0:return this.dd("unlisten()"),hn(!!(e=this.ed.get(t)),"Trying to unlisten on query not found:"+t),(i=this.rd[e.targetId]).length>1?(this.rd[e.targetId]=i.filter((function(e){return!e.isEqual(t)})),this.ed.delete(t),[2]):this.isPrimary?(this.td.xh(e.targetId),this.td.Ph(e.targetId)?[3,2]:[4,this.zf.zo(e.targetId,!1).then((function(){n.td.Lh(e.targetId),n.Kl.wl(e.targetId),n.gd(e.targetId)})).catch(Mn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.gd(e.targetId),[4,this.zf.zo(e.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:return this.dd("write()"),[4,this.zf.ao(t)];case 1:return i=n.sent(),this.td.kh(i.batchId),this.bd(i.batchId,e),[4,this.pd(i.ks)];case 2:return n.sent(),[4,this.Kl.fl()];case 3:return n.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,i){new Wr(t,this.Kl,e,i).run()},t.prototype.So=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i=this;return c.__generator(this,(function(n){switch(n.label){case 0:this.dd("applyRemoteEvent()"),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.zf.So(t)];case 2:return e=n.sent(),D(t.Ei,(function(t,e){var n=i.sd[Number(t)];n&&(hn(e.ki.size+e.Ni.size+e.Oi.size<=1,"Limbo resolution for single document contains multiple changes."),e.ki.size>0?n.Zl=!0:e.Ni.size>0?hn(n.Zl,"Received change for limbo target document without add."):e.Oi.size>0&&(hn(n.Zl,"Received remove for limbo target document without add."),n.Zl=!1))})),[4,this.pd(e,t)];case 3:return n.sent(),[3,6];case 4:return[4,Mn(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Ql=function(t,e){if(this.isPrimary&&0===e||!this.isPrimary&&1===e){this.dd("applyOnlineStateChange()");var i=[];this.ed.forEach((function(e,n){var r=n.view.Ql(t);hn(0===r.Ml.length,"OnlineState should not affect limbo documents."),r.snapshot&&i.push(r.snapshot)})),this.nd.yd(t),this.nd.Ga(i),this.onlineState=t,this.isPrimary&&this.td.Mh(t)}},t.prototype.pl=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i,n,r,s,o,h=this;return c.__generator(this,(function(u){switch(u.label){case 0:return this.dd("rejectListens()"),this.td.qh(t,"rejected",e),i=this.sd[t],(n=i&&i.key)?(this.ud=this.ud.remove(n),delete this.sd[t],r=(r=new lt(ft.W)).dt(n,new Zt(n,dt.q())),s=Pe().add(n),o=new Fe(dt.MIN,{},new mt(ln),r,s),[2,this.So(o)]):[3,1];case 1:return[4,this.zf.zo(t,!1).then((function(){return h.gd(t,e)})).catch(Mn)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},t.prototype.Xh=function(t,e,i){return c.__awaiter(this,void 0,void 0,(function(){var n;return c.__generator(this,(function(r){switch(r.label){case 0:return this.dd("applyBatchState()"),[4,this.zf.lo(t)];case 1:return null===(n=r.sent())?(sn("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.Kl.fl()];case 2:return r.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this._d(t,i||null),this.zf.Zo(t)):cn("Unknown batchState: "+e),r.label=4;case 4:return[4,this.pd(n)];case 5:return r.sent(),[2]}}))}))},t.prototype.Dl=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:this.dd("applySuccessfulWrite()"),e=t.batch.batchId,this._d(e,null),this.Id(e),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.zf.vo(t)];case 2:return i=n.sent(),this.td.Oh(e,"acknowledged"),[4,this.pd(i)];case 3:return n.sent(),[3,6];case 4:return[4,Mn(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Al=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:this.dd("rejectFailedWrite()"),this._d(t,e),this.Id(t),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.zf.yo(t)];case 2:return i=n.sent(),this.td.Oh(t,"rejected",e),[4,this.pd(i)];case 3:return n.sent(),[3,6];case 4:return[4,Mn(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Td=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:return this.Kl.$f()||sn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.zf.To()];case 1:return-1===(e=n.sent())?(t.resolve(),[2]):((i=this.ad.get(e)||[]).push(t),this.ad.set(e,i),[2])}}))}))},t.prototype.Id=function(t){(this.ad.get(t)||[]).forEach((function(t){t.resolve()})),this.ad.delete(t)},t.prototype.Ed=function(t){this.ad.forEach((function(e){e.forEach((function(e){e.reject(new m(y.CANCELLED,t))}))})),this.ad.clear()},t.prototype.bd=function(t,e){var i=this.hd[this.currentUser.i()];i||(i=new lt(ln)),i=i.dt(t,e),this.hd[this.currentUser.i()]=i},t.prototype._d=function(t,e){var i=this.hd[this.currentUser.i()];if(i){var n=i.get(t);n&&(hn(t===i.wt(),"Mutation callbacks processed out-of-order?"),e?n.reject(e):n.resolve(),i=i.remove(t)),this.hd[this.currentUser.i()]=i}},t.prototype.gd=function(t,e){var i=this;void 0===e&&(e=null),this.td.xh(t),hn(this.rd[t]&&0!==this.rd[t].length,"There are no queries mapped to target id "+t);for(var n=0,r=this.rd[t];n<r.length;n++){var u=r[n];this.ed.delete(u),e&&this.nd.Dd(u,e)}if(delete this.rd[t],this.isPrimary){var s=this.od.As(t);this.od.Rs(t),s.forEach((function(t){i.od.Cs(t)||i.Rd(t)}))}},t.prototype.Rd=function(t){var e=this.ud.get(t);null!==e&&(this.Kl.wl(e),this.ud=this.ud.remove(t),delete this.sd[e])},t.prototype.md=function(t,e){for(var i=0,n=e;i<n.length;i++){var r=n[i];r instanceof zr?(this.od._s(r.key,t),this.Sd(r)):r instanceof Hr?(sn("SyncEngine","Document no longer in limbo: "+r.key),this.od.Ts(r.key,t),this.od.Cs(r.key)||this.Rd(r.key)):cn("Unknown limbo change: "+JSON.stringify(r))}},t.prototype.Sd=function(t){var e=t.key;if(!this.ud.get(e)){sn("SyncEngine","New document in limbo: "+e);var i=this.fd.next(),n=ae.jn(e.path);this.sd[i]=new tr(e),this.Kl.listen(new be(n.Yn(),i,2,In.Xr)),this.ud=this.ud.dt(e,i)}},t.prototype.Ad=function(){return this.ud},t.prototype.pd=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i,n,r,s=this;return c.__generator(this,(function(u){switch(u.label){case 0:return i=[],n=[],r=[],this.ed.forEach((function(u,o){r.push(Promise.resolve().then((function(){var e=o.view.xl(t);return e.yc?s.zf.Ko(o.query,!1).then((function(t){var i=t.documents;return o.view.xl(i,e)})):e})).then((function(t){var r=e&&e.Ei[o.targetId],u=o.view.qs(t,!0===s.isPrimary,r);if(s.md(o.targetId,u.Ml),u.snapshot){s.isPrimary&&s.td.qh(o.targetId,u.snapshot.fromCache?"not-current":"current"),i.push(u.snapshot);var c=bn.zr(o.targetId,u.snapshot);n.push(c)}})))})),[4,Promise.all(r)];case 1:return u.sent(),this.nd.Ga(i),[4,this.zf.xo(n)];case 2:return u.sent(),[2]}}))}))},t.prototype.dd=function(t){hn(null!==this.nd,"Trying to call "+t+" before calling subscribe().")},t.prototype.Pl=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.Ed("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.zf.ro(t)]):[3,3];case 1:return i=n.sent(),this.td.ro(t,i.ho,i.co),[4,this.pd(i.oo)];case 2:n.sent(),n.label=3;case 3:return[4,this.Kl.Pl()];case 4:return n.sent(),[2]}}))}))},t.prototype.kl=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r,s,o,h=this;return c.__generator(this,(function(u){switch(u.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Kl.kl(!0)]);case 1:return u.sent(),s=this.td.Ch(),[4,this.Cd(s.nt())];case 2:for(e=u.sent(),i=0,n=e;i<n.length;i++)r=n[i],this.Kl.listen(r);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],o=Promise.resolve(),O(this.rd,(function(t,e){h.td.jh(t)?s.push(t):o=o.then((function(){return h.gd(t),h.zf.zo(t,!0)})),h.Kl.wl(t)})),[4,o]);case 4:return u.sent(),[4,this.Cd(s)];case 5:return u.sent(),this.Pd(),[4,this.Kl.kl(!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))},t.prototype.Pd=function(){var t=this;O(this.sd,(function(e){t.Kl.wl(e)})),this.od.Ss(),this.sd=[],this.ud=new lt(ft.W)},t.prototype.Cd=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r,s,o,h,f,a,l,d,v,y;return c.__generator(this,(function(u){switch(u.label){case 0:e=[],i=[],n=0,r=t,u.label=1;case 1:return n<r.length?(s=r[n],o=void 0,(h=this.rd[s])&&0!==h.length?[4,this.zf.zo(s,!0)]:[3,8]):[3,14];case 2:return u.sent(),[4,this.zf.Mo(h[0].Yn())];case 3:o=u.sent(),f=0,a=h,u.label=4;case 4:return f<a.length?(l=a[f],hn(!!(d=this.ed.get(l)),"No query view found for "+l),[4,this.wd(d)]):[3,7];case 5:(v=u.sent()).snapshot&&i.push(v.snapshot),u.label=6;case 6:return f++,[3,4];case 7:return[3,12];case 8:return hn(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.zf.ih(s)];case 9:return hn(!!(y=u.sent()),"Target for id "+s+" not found"),[4,this.zf.Mo(y)];case 10:return o=u.sent(),[4,this.vd(this.kd(y),s,!1)];case 11:u.sent(),u.label=12;case 12:e.push(o),u.label=13;case 13:return n++,[3,1];case 14:return this.nd.Ga(i),[2,e]}}))}))},t.prototype.kd=function(t){return new ae(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},t.prototype.$o=function(){return this.zf.$o()},t.prototype.$h=function(t,e,i){return c.__awaiter(this,void 0,void 0,(function(){var n,r;return c.__generator(this,(function(u){switch(u.label){case 0:if(this.isPrimary)return sn("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.rd[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.zf.eh()];case 2:return n=u.sent(),r=Fe.Ai(t,"current"===e),[4,this.pd(n,r)];case 3:return u.sent(),[3,7];case 4:return[4,this.zf.zo(t,!0)];case 5:return u.sent(),this.gd(t,i),[3,7];case 6:cn("Unexpected target state: "+e),u.label=7;case 7:return[2]}}))}))},t.prototype.Zh=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i,n,r,s,o,h,f,a,l,d=this;return c.__generator(this,(function(v){switch(v.label){case 0:if(!this.isPrimary)return[2];i=0,n=t,v.label=1;case 1:return i<n.length?(l=n[i],hn(!this.rd[l],"Trying to add an already active target"),[4,this.zf.ih(l)]):[3,6];case 2:return hn(!!(r=v.sent()),"Query data for active target "+l+" not found"),[4,this.zf.Mo(r)];case 3:return s=v.sent(),[4,this.vd(this.kd(r),s.targetId,!1)];case 4:v.sent(),this.Kl.listen(s),v.label=5;case 5:return i++,[3,1];case 6:o=function(t){return c.__generator(this,(function(e){switch(e.label){case 0:return h.rd[t]?[4,h.zf.zo(t,!1).then((function(){d.Kl.wl(t),d.gd(t)})).catch(Mn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},h=this,f=0,a=e,v.label=7;case 7:return f<a.length?(l=a[f],[5,o(l)]):[3,10];case 8:v.sent(),v.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.zf.nh(!0),this.Kl.enableNetwork()},t.prototype.disableNetwork=function(){return this.zf.nh(!1),this.Kl.disableNetwork()},t.prototype.ge=function(t){var e=this.sd[t];if(e&&e.Zl)return Pe().add(e.key);var i=Pe(),n=this.rd[t];if(!n)return i;for(var r=0,u=n;r<u.length;r++){var s=u[r],o=this.ed.get(s);hn(!!o,"No query view found for "+s),i=i.Qt(o.view.Ul)}return i},t}(),Xr=function(){this.Nd=null,this.targetId=0,this.listeners=[]},Qr=function(){function t(t){this.dh=t,this.Od=new wn((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.Fd=new Set,this.dh.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,i=!1,n=this.Od.get(e);return n||(i=!0,n=new Xr,this.Od.set(e,n)),n.listeners.push(t),hn(!t.Ql(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),n.Nd&&t.Vd(n.Nd)&&this.Ud(),i?this.dh.listen(e).then((function(t){return n.targetId=t,t})):Promise.resolve(n.targetId)},t.prototype.wl=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r;return c.__generator(this,(function(u){return e=t.query,i=!1,(n=this.Od.get(e))&&(r=n.listeners.indexOf(t))>=0&&(n.listeners.splice(r,1),i=0===n.listeners.length),i?(this.Od.delete(e),[2,this.dh.wl(e)]):[2]}))}))},t.prototype.Ga=function(t){for(var e=!1,i=0,n=t;i<n.length;i++){var r=n[i],u=r.query,s=this.Od.get(u);if(s){for(var o=0,c=s.listeners;o<c.length;o++)c[o].Vd(r)&&(e=!0);s.Nd=r}}e&&this.Ud()},t.prototype.Dd=function(t,e){var i=this.Od.get(t);if(i)for(var n=0,r=i.listeners;n<r.length;n++)r[n].onError(e);this.Od.delete(t)},t.prototype.yd=function(t){this.onlineState=t;var e=!1;this.Od.forEach((function(i,n){for(var r=0,u=n.listeners;r<u.length;r++)u[r].Ql(t)&&(e=!0)})),e&&this.Ud()},t.prototype.xd=function(t){this.Fd.add(t),t.next()},t.prototype.jd=function(t){this.Fd.delete(t)},t.prototype.Ud=function(){this.Fd.forEach((function(t){t.next()}))},t}(),$r=function(){function t(t,e,i){this.query=t,this.Ld=e,this.qd=!1,this.Bd=null,this.onlineState="Unknown",this.options=i||{}}return t.prototype.Vd=function(t){if(hn(t.docChanges.length>0||t._i,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],i=0,n=t.docChanges;i<n.length;i++){var r=n[i];3!==r.type&&e.push(r)}t=new je(t.query,t.docs,t.pi,e,t.yi,t.fromCache,t._i,!0)}var u=!1;return this.qd?this.Md(t)&&(this.Ld.next(t),u=!0):this.Qd(t,this.onlineState)&&(this.Gd(t),u=!0),this.Bd=t,u},t.prototype.onError=function(t){this.Ld.error(t)},t.prototype.Ql=function(t){this.onlineState=t;var e=!1;return this.Bd&&!this.qd&&this.Qd(this.Bd,t)&&(this.Gd(this.Bd),e=!0),e},t.prototype.Qd=function(t,e){if(hn(!this.qd,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var i="Offline"!==e;return this.options.Wd&&i?(hn(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.Y()||"Offline"===e},t.prototype.Md=function(t){if(t.docChanges.length>0)return!0;var e=this.Bd&&this.Bd.hasPendingWrites!==t.hasPendingWrites;return!(!t._i&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Gd=function(t){hn(!this.qd,"Trying to raise initial events for second time"),t=je.Ti(t.query,t.docs,t.yi,t.fromCache),this.qd=!0,this.Ld.next(t)},t}(),Zr=function(){function t(t,e,i,n){this.platform=t,this.zd=e,this.credentials=i,this.$r=n,this.clientId=fn.Ur()}return t.prototype.start=function(t,e){var i=this;this.Kd();var n=new En,r=new En,u=!1;return this.credentials.v((function(s){u?i.$r.ou((function(){return i.Pl(s)})):(u=!0,i.Hd(t,e,s,r).then((function(){return i.Jd(s)})).then(n.resolve,n.reject))})),this.$r.ou((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.Kd(),this.$r.enqueue((function(){return t.dh.enableNetwork()}))},t.prototype.Hd=function(t,e,i,n){return c.__awaiter(this,void 0,void 0,(function(){var r;return c.__generator(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,t.initialize(this.$r,this.zd,this.platform,this.clientId,i,e)];case 1:return u.sent(),this.persistence=t.la(),this.Yd=t.fa(),this.td=t.da(),n.resolve(),[3,3];case 2:if(r=u.sent(),n.reject(r),!this.Xd(r))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),[2,this.Hd(new pr,{aa:!1},i,n)];case 3:return[2]}}))}))},t.prototype.Xd=function(t){return"FirebaseError"===t.name?t.code===y.FAILED_PRECONDITION||t.code===y.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Kd=function(){if(this.$r.vu)throw new m(y.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Jd=function(t){var e=this;return sn("FirestoreClient","Initializing. user=",t.uid),this.platform.$d(this.zd).then((function(i){return c.__awaiter(e,void 0,void 0,(function(){var e,n,s,r,o,h,a=this;return c.__generator(this,(function(f){switch(f.label){case 0:return e=new Xn,this.zf=new Ln(this.persistence,e,t),[4,this.zf.start()];case 1:return f.sent(),n=this.platform.Zd(),s=this.platform.tv(this.zd.Dn),r=new gr(this.$r,i,this.credentials,s),o=function(t){return a.dh.Ql(t,0)},h=function(t){return a.dh.Ql(t,1)},this.Kl=new Gr(this.zf,r,this.$r,o,n),this.dh=new Yr(this.zf,this.Kl,this.td,t),this.td.vh=h,this.Kl.dh=this.dh,this.td.dh=this.dh,this.nv=new Qr(this.dh),[4,this.td.start()];case 2:return f.sent(),[4,this.Kl.start()];case 3:return f.sent(),[4,this.persistence.na((function(t){return c.__awaiter(a,void 0,void 0,(function(){return c.__generator(this,(function(e){switch(e.label){case 0:return[4,this.dh.kl(t)];case 1:return e.sent(),t&&!this.Yd.ss?this.Yd.start(this.zf):t||this.Yd.stop(),[2]}}))}))}))];case 4:return f.sent(),[4,this.persistence.ia((function(){return c.__awaiter(a,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return f.sent(),[2]}}))}))}))},t.prototype.Pl=function(t){return this.$r.Iu(),sn("FirestoreClient","Credential Changed. Current user: "+t.uid),this.dh.Pl(t)},t.prototype.disableNetwork=function(){var t=this;return this.Kd(),this.$r.enqueue((function(){return t.dh.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.$r.pu((function(){return c.__awaiter(t,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.Yd.stop(),[4,this.Kl.shutdown()];case 1:return t.sent(),[4,this.td.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.m(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Kd();var e=new En;return this.$r.ou((function(){return t.dh.Td(e)})),e.promise},t.prototype.listen=function(t,e,i){var n=this;this.Kd();var r=new $r(t,e,i);return this.$r.ou((function(){return n.nv.listen(r)})),r},t.prototype.wl=function(t){var e=this;this.iv||this.$r.ou((function(){return e.nv.wl(t)}))},t.prototype.ev=function(t){var e=this;return this.Kd(),this.$r.enqueue((function(){return e.zf.qo(t)})).then((function(t){if(t instanceof $t)return t;if(t instanceof Zt)return null;throw new m(y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.rv=function(t){var e=this;return this.Kd(),this.$r.enqueue((function(){return c.__awaiter(e,void 0,void 0,(function(){var e,i,n;return c.__generator(this,(function(r){switch(r.label){case 0:return[4,this.zf.Ko(t,!0)];case 1:return e=r.sent(),i=new Kr(t,e.Yo),n=i.xl(e.documents),[2,i.qs(n,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.Kd();var i=new En;return this.$r.ou((function(){return e.dh.write(t,i)})),i.promise},t.prototype.Dn=function(){return this.zd.Dn},t.prototype.xd=function(t){var e=this;this.Kd(),this.$r.ou((function(){return e.nv.xd(t),Promise.resolve()}))},t.prototype.jd=function(t){this.iv||this.nv.jd(t)},Object.defineProperty(t.prototype,"iv",{get:function(){return this.$r.vu},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Kd();var i=new En;return this.$r.ou((function(){return e.dh.runTransaction(e.$r,t,i),Promise.resolve()})),i.promise},t}(),ti=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.uv(this.observer.next,t)},t.prototype.error=function(t){this.uv(this.observer.error,t)},t.prototype.sv=function(){this.muted=!0},t.prototype.uv=function(t,e){var i=this;this.muted||setTimeout((function(){i.muted||t(e)}),0)},t}();function ei(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var i=t,n=0,r=["next","error","complete"];n<r.length;n++){var u=r[n];if(u in i&&"function"==typeof i[u])return!0}return!1}(t)}var hr=On.Xu,ni=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new m(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else j("settings","non-empty string","host",t.host),this.host=t.host,F("settings","boolean","ssl",t.ssl),this.ssl=k(t.ssl,!0);if(W("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),F("settings","object","credentials",t.credentials),this.credentials=t.credentials,F("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?an("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&an("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=k(t.timestampsInSnapshots,!0),F("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=On.Zu;else{if(t.cacheSizeBytes!==hr&&t.cacheSizeBytes<On.$u)throw new m(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+On.$u);this.cacheSizeBytes=t.cacheSizeBytes}F("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),ri=function(){function t(e,i,n){var s=this;if(void 0===n&&(n=new pr),this.ov=null,this.hv=new Tn,this.INTERNAL={delete:function(){return c.__awaiter(s,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.cv(),[4,this.av.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var r=e;this.ov=r,this.fv=t.lv(r),this.dv=r.name,this.vv=new E(i)}else{var o=e;if(!o.projectId)throw new m(y.INVALID_ARGUMENT,"Must provide projectId");this.fv=new yn(o.projectId,o.database),this.dv="[DEFAULT]",this.vv=new I}this.wv=n,this.mv=new ni({}),this.gv=this.bv(this.fv)}return t.prototype.settings=function(t){if(P("Firestore.settings",arguments,1),M("Firestore.settings","object",1,t),S(t,"persistence"))throw new m(y.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new ni(t);if(this.av&&!this.mv.isEqual(e))throw new m(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.mv=e,void 0!==e.credentials&&(this.vv=A(e.credentials))},t.prototype.enableNetwork=function(){return this.cv(),this.av.enableNetwork()},t.prototype.disableNetwork=function(){return this.cv(),this.av.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.av)throw new m(y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&an("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=k(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.pv(this.wv,{aa:!0,cacheSizeBytes:this.mv.cacheSizeBytes,synchronizeTabs:e})},t.prototype.clearPersistence=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e=this;return c.__generator(this,(function(i){if(void 0!==this.av&&!this.av.iv)throw new m(y.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new En,this.hv.wu((function(){return c.__awaiter(e,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this.yv(),[4,this.wv.clearPersistence(e)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return i=n.sent(),t.reject(i),[3,3];case 3:return[2]}}))}))})),[2,t.promise]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_v",{get:function(){return this.cv(),this.av.iv},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.cv(),this.av.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.cv(),ei(t))return this.Iv(t);M("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.Iv(e)},t.prototype.Iv=function(t){var e=this,i=new ti({next:function(){t.next&&t.next()},error:function(t){throw cn("Uncaught Error in onSnapshotsInSync")}});return this.av.xd(i),function(){i.sv(),e.av.jd(i)}},t.prototype.cv=function(){return this.av||this.pv(new pr,{aa:!1}),this.av},t.prototype.yv=function(){return new vn(this.fv,this.dv,this.mv.host,this.mv.ssl,this.mv.forceLongPolling)},t.prototype.pv=function(t,e){hn(!!this.mv.host,"FirestoreSettings.host is not set"),hn(!this.av,"configureClient() called multiple times");var i=this.yv();return this.av=new Zr(nn.C(),i,this.vv,this.hv),this.av.start(t,e)},t.prototype.bv=function(t){return new Lr((function(e){if(e instanceof si){var i=t,n=e.firestore.fv;if(!n.isEqual(i))throw new m(y.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+i.projectId+"/"+i.database);return new xr(t,e.Tv)}return e}))},t.lv=function(t){var e=t.options;if(!S(e,"projectId"))throw new m(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var i=e.projectId;if(!i||"string"!=typeof i)throw new m(y.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new yn(i)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ov)throw new m(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ov},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return P("Firestore.collection",arguments,1),M("Firestore.collection","non-empty string",1,t),this.cv(),new fi(ut.et(t),this)},t.prototype.doc=function(t){return P("Firestore.doc",arguments,1),M("Firestore.doc","non-empty string",1,t),this.cv(),si.Ev(ut.et(t),this)},t.prototype.collectionGroup=function(t){if(P("Firestore.collectionGroup",arguments,1),M("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new m(y.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.cv(),new hi(new ae(ut.rt,t),this)},t.prototype.runTransaction=function(t){var e=this;return P("Firestore.runTransaction",arguments,1),M("Firestore.runTransaction","function",1,t),this.cv().transaction((function(i){return t(new ii(e,i))}))},t.prototype.batch=function(){return this.cv(),new oi(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(li()){case 0:return"debug";case 1:return"error";case 2:return"silent";default:return cn("Unknown log level: "+li())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(P("Firestore.setLogLevel",arguments,1),M("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":on(0);break;case"error":on(1);break;case"silent":on(2);break;default:throw new m(y.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.Dv=function(){return this.mv.timestampsInSnapshots},t}(),ii=function(){function t(t,e){this.Rv=t,this.Sv=e}return t.prototype.get=function(t){var e=this;P("Transaction.get",arguments,1);var i=yi("Transaction.get",t,this.Rv);return this.Sv.lookup([i.Tv]).then((function(t){if(!t||1!==t.length)return cn("Mismatch in docs returned from document lookup.");var n=t[0];if(n instanceof Zt)return new ui(e.Rv,i.Tv,null,!1,!1,i.Av);if(n instanceof $t)return new ui(e.Rv,i.Tv,n,!1,!1,i.Av);throw cn("BatchGetDocumentsRequest returned unexpected document type: "+n.constructor.name)}))},t.prototype.set=function(t,e,i){q("Transaction.set",arguments,2,3);var n=yi("Transaction.set",t,this.Rv);i=pi("Transaction.set",i);var r=gi(n.Av,e,"Transaction.set"),u=r[0],s=r[1],o=i.merge||i.mergeFields?this.Rv.gv.yf(s,u,i.mergeFields):this.Rv.gv.bf(s,u);return this.Sv.set(n.Tv,o),this},t.prototype.update=function(t,e,i){for(var n,r,u=[],s=3;s<arguments.length;s++)u[s-3]=arguments[s];return"string"==typeof e||e instanceof wr?(x("Transaction.update",arguments,3),n=yi("Transaction.update",t,this.Rv),r=this.Rv.gv.Tf("Transaction.update",e,i,u)):(P("Transaction.update",arguments,2),n=yi("Transaction.update",t,this.Rv),r=this.Rv.gv._f("Transaction.update",e)),this.Sv.update(n.Tv,r),this},t.prototype.delete=function(t){P("Transaction.delete",arguments,1);var e=yi("Transaction.delete",t,this.Rv);return this.Sv.delete(e.Tv),this},t}(),oi=function(){function t(t){this.Rv=t,this.Cv=[],this.Pv=!1}return t.prototype.set=function(t,e,i){q("WriteBatch.set",arguments,2,3),this.kv();var n=yi("WriteBatch.set",t,this.Rv);i=pi("WriteBatch.set",i);var r=gi(n.Av,e,"WriteBatch.set"),u=r[0],s=r[1],o=i.merge||i.mergeFields?this.Rv.gv.yf(s,u,i.mergeFields):this.Rv.gv.bf(s,u);return this.Cv=this.Cv.concat(o.hf(n.Tv,St.NONE)),this},t.prototype.update=function(t,e,i){for(var n,r,u=[],s=3;s<arguments.length;s++)u[s-3]=arguments[s];return this.kv(),"string"==typeof e||e instanceof wr?(x("WriteBatch.update",arguments,3),n=yi("WriteBatch.update",t,this.Rv),r=this.Rv.gv.Tf("WriteBatch.update",e,i,u)):(P("WriteBatch.update",arguments,2),n=yi("WriteBatch.update",t,this.Rv),r=this.Rv.gv._f("WriteBatch.update",e)),this.Cv=this.Cv.concat(r.hf(n.Tv,St.exists(!0))),this},t.prototype.delete=function(t){P("WriteBatch.delete",arguments,1),this.kv();var e=yi("WriteBatch.delete",t,this.Rv);return this.Cv=this.Cv.concat(new Ct(e.Tv,St.NONE)),this},t.prototype.commit=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){return this.kv(),this.Pv=!0,this.Cv.length>0?[2,this.Rv.cv().write(this.Cv)]:[2]}))}))},t.prototype.kv=function(){if(this.Pv)throw new m(y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),si=function(){function t(t,e,i){this.Tv=t,this.firestore=e,this.Av=i,this.av=this.firestore.cv()}return t.Ev=function(e,i,n){if(e.length%2!=0)throw new m(y.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.it()+" has "+e.length);return new t(new ft(e),i,n)},Object.defineProperty(t.prototype,"id",{get:function(){return this.Tv.path.$()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new fi(this.Tv.path.J(),this.firestore,this.Av)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.Tv.path.it()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(P("DocumentReference.collection",arguments,1),M("DocumentReference.collection","non-empty string",1,t),!t)throw new m(y.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=ut.et(t);return new fi(this.Tv.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw J("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.Tv.isEqual(e.Tv)&&this.Av===e.Av},t.prototype.set=function(t,e){q("DocumentReference.set",arguments,1,2),e=pi("DocumentReference.set",e);var i=gi(this.Av,t,"DocumentReference.set"),n=i[0],r=i[1],u=e.merge||e.mergeFields?this.firestore.gv.yf(r,n,e.mergeFields):this.firestore.gv.bf(r,n);return this.av.write(u.hf(this.Tv,St.NONE))},t.prototype.update=function(t,e){for(var i,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return"string"==typeof t||t instanceof wr?(x("DocumentReference.update",arguments,2),i=this.firestore.gv.Tf("DocumentReference.update",t,e,n)):(P("DocumentReference.update",arguments,1),i=this.firestore.gv._f("DocumentReference.update",t)),this.av.write(i.hf(this.Tv,St.exists(!0)))},t.prototype.delete=function(){return P("DocumentReference.delete",arguments,0),this.av.write([new Ct(this.Tv,St.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];q("DocumentReference.onSnapshot",arguments,1,4);var i,n={includeMetadataChanges:!1},r=0;"object"!=typeof t[r]||ei(t[r])||(W("DocumentReference.onSnapshot",n=t[r],["includeMetadataChanges"]),F("DocumentReference.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),r++);var u={includeMetadataChanges:n.includeMetadataChanges};return ei(t[r])?i=t[r]:(M("DocumentReference.onSnapshot","function",r,t[r]),U("DocumentReference.onSnapshot","function",r+1,t[r+1]),U("DocumentReference.onSnapshot","function",r+2,t[r+2]),i={next:t[r],error:t[r+1],complete:t[r+2]}),this.Nv(u,i)},t.prototype.Nv=function(t,e){var i=this,n=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(n=e.error.bind(e));var r=new ti({next:function(t){if(e.next){hn(t.docs.size<=1,"Too many documents returned on a document query");var n=t.docs.get(i.Tv);e.next(new ui(i.firestore,i.Tv,n,t.fromCache,t.hasPendingWrites,i.Av))}},error:n}),u=this.av.listen(ae.jn(this.Tv.path),r,t);return function(){r.sv(),i.av.wl(u)}},t.prototype.get=function(t){var e=this;return q("DocumentReference.get",arguments,0,1),vi("DocumentReference.get",t),new Promise((function(i,n){t&&"cache"===t.source?e.firestore.cv().ev(e.Tv).then((function(t){i(new ui(e.firestore,e.Tv,t,!0,t instanceof $t&&t.rn,e.Av))}),n):e.Ov(i,n,t)}))},t.prototype.Ov=function(t,e,i){var n=this.Nv({includeMetadataChanges:!0,Wd:!0},{next:function(r){n(),!r.exists&&r.metadata.fromCache?e(new m(y.UNAVAILABLE,"Failed to get document because the client is offline.")):r.exists&&r.metadata.fromCache&&i&&"server"===i.source?e(new m(y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(r)},error:e})},t.prototype.withConverter=function(e){return new t(this.Tv,this.firestore,e)},t}(),ai=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ui=function(){function t(t,e,i,n,r,u){this.Rv=t,this.Tv=e,this.Fv=i,this.Vv=n,this.Uv=r,this.Av=u}return t.prototype.data=function(t){if(q("DocumentSnapshot.data",arguments,0,1),t=di("DocumentSnapshot.data",t),this.Fv){if(this.Av){var e=new ci(this.Rv,this.Tv,this.Fv,this.Vv,this.Uv);return this.Av.fromFirestore(e,t)}return this.xv(this.Fv.data(),xt.gn(t,this.Rv.Dv()))}},t.prototype.get=function(t,e){if(q("DocumentSnapshot.get",arguments,1,2),e=di("DocumentSnapshot.get",e),this.Fv){var i=this.Fv.data().field(jr("DocumentSnapshot.get",t));if(null!==i)return this.jv(i,xt.gn(e,this.Rv.Dv()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this.Tv.path.$()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new si(this.Tv,this.Rv,this.Av)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Fv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ai(this.Uv,this.Vv)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw J("isEqual","DocumentSnapshot",1,e);return this.Rv===e.Rv&&this.Vv===e.Vv&&this.Tv.isEqual(e.Tv)&&(null===this.Fv?null===e.Fv:this.Fv.isEqual(e.Fv))&&this.Av===e.Av},t.prototype.xv=function(t,e){var i=this,n={};return t.forEach((function(t,r){n[t]=i.jv(r,e)})),n},t.prototype.jv=function(t,e){if(t instanceof Jt)return this.xv(t,e);if(t instanceof Xt)return this.Lv(t,e);if(t instanceof Kt){var i=t.value(e),n=this.Rv.cv().Dn();return t.Dn.isEqual(n)||an("Document "+this.Tv.path+" contains a document reference within a different database ("+t.Dn.projectId+"/"+t.Dn.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),new si(i,this.Rv,this.Av)}return t.value(e)},t.prototype.Lv=function(t,e){var i=this;return t.Jt.map((function(t){return i.jv(t,e)}))},t}(),ci=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(i,t),i.prototype.data=function(e){var i=t.prototype.data.call(this,e);return hn(void 0!==i,"Document in a QueryDocumentSnapshot should exist"),i},i}(ui),hi=function(){function t(t,e,i){this.qv=t,this.firestore=e,this.Av=i}return t.prototype.where=function(e,i,n){P("Query.where",arguments,3),K("Query.where",3,n);var r,u=["<","<=","==",">=",">","array-contains","in","array-contains-any"];B("Query.where",u,2,i);var s=jr("Query.where",e),o=ue.et(i);if(s.st()){if(o===ue.ARRAY_CONTAINS||o===ue.ARRAY_CONTAINS_ANY)throw new m(y.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===ue.IN){this.Bv(n,o);for(var c=[],h=0,a=n;h<a.length;h++){var f=a[h];c.push(this.Mv(f))}r=new Xt(c)}else r=this.Mv(n)}else o!==ue.IN&&o!==ue.ARRAY_CONTAINS_ANY||this.Bv(n,o),r=this.firestore.gv.Ef("Query.where",n,o===ue.IN);var l=ce.create(s,o,r);return this.Qv(l),new t(this.qv.Bn(l),this.firestore,this.Av)},t.prototype.orderBy=function(e,i){var n;if(q("Query.orderBy",arguments,1,2),U("Query.orderBy","non-empty string",2,i),void 0===i||"asc"===i)n=ve.ASCENDING;else{if("desc"!==i)throw new m(y.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+i+"', expected 'asc' or 'desc'.");n=ve.DESCENDING}if(null!==this.qv.startAt)throw new m(y.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.qv.endAt)throw new m(y.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=jr("Query.orderBy",e),u=new me(r,n);return this.Gv(u),new t(this.qv.Qn(u),this.firestore,this.Av)},t.prototype.limit=function(e){return P("Query.limit",arguments,1),M("Query.limit","number",1,e),Y("Query.limit",1,e),new t(this.qv.Gn(e),this.firestore,this.Av)},t.prototype.limitToLast=function(e){return P("Query.limitToLast",arguments,1),M("Query.limitToLast","number",1,e),Y("Query.limitToLast",1,e),new t(this.qv.Wn(e),this.firestore,this.Av)},t.prototype.startAt=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];x("Query.startAt",arguments,1);var r=this.Wv("Query.startAt",e,i,!0);return new t(this.qv.zn(r),this.firestore,this.Av)},t.prototype.startAfter=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];x("Query.startAfter",arguments,1);var r=this.Wv("Query.startAfter",e,i,!1);return new t(this.qv.zn(r),this.firestore,this.Av)},t.prototype.endBefore=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];x("Query.endBefore",arguments,1);var r=this.Wv("Query.endBefore",e,i,!0);return new t(this.qv.Kn(r),this.firestore,this.Av)},t.prototype.endAt=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];x("Query.endAt",arguments,1);var r=this.Wv("Query.endAt",e,i,!1);return new t(this.qv.Kn(r),this.firestore,this.Av)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw J("isEqual","Query",1,e);return this.firestore===e.firestore&&this.qv.isEqual(e.qv)},t.prototype.withConverter=function(e){return new t(this.qv,this.firestore,e)},t.prototype.Wv=function(t,e,i,n){if(K(t,1,e),e instanceof ui){if(i.length>0)throw new m(y.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var r=e;if(!r.exists)throw new m(y.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.zv(t,r.Fv,n)}var u=[e].concat(i);return this.Kv(t,u,n)},t.prototype.zv=function(t,e,i){for(var n=[],r=0,u=this.qv.orderBy;r<u.length;r++){var s=u[r];if(s.field.st())n.push(new Kt(this.firestore.fv,e.key));else{var o=e.field(s.field);if(o instanceof zt)throw new m(y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===o){var c=s.field.it();throw new m(y.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}n.push(o)}}return new ye(n,i)},t.prototype.Kv=function(t,e,i){var n=this.qv.On;if(e.length>n.length)throw new m(y.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var r=[],u=0;u<e.length;u++){var s=e[u];if(n[u].field.st()){if("string"!=typeof s)throw new m(y.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.qv.ui()&&-1!==s.indexOf("/"))throw new m(y.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var o=this.qv.path.child(ut.et(s));if(!ft.ct(o))throw new m(y.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+o+"' is not because it contains an odd number of segments.");var c=new ft(o);r.push(new Kt(this.firestore.fv,c))}else{var h=this.firestore.gv.Ef(t,s);r.push(h)}}return new ye(r,i)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];q("Query.onSnapshot",arguments,1,4);var i,n={},r=0;return"object"!=typeof t[r]||ei(t[r])||(W("Query.onSnapshot",n=t[r],["includeMetadataChanges"]),F("Query.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),r++),ei(t[r])?i=t[r]:(M("Query.onSnapshot","function",r,t[r]),U("Query.onSnapshot","function",r+1,t[r+1]),U("Query.onSnapshot","function",r+2,t[r+2]),i={next:t[r],error:t[r+1],complete:t[r+2]}),this.Hv(this.qv),this.Nv(n,i)},t.prototype.Nv=function(t,e){var i=this,n=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(n=e.error.bind(e));var r=new ti({next:function(t){e.next&&e.next(new br(i.firestore,i.qv,t,i.Av))},error:n}),u=this.firestore.cv(),s=u.listen(this.qv,r,t);return function(){r.sv(),u.wl(s)}},t.prototype.Hv=function(t){if(t.ei()&&0===t.On.length)throw new m(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return q("Query.get",arguments,0,1),vi("Query.get",t),this.Hv(this.qv),new Promise((function(i,n){t&&"cache"===t.source?e.firestore.cv().rv(e.qv).then((function(t){i(new br(e.firestore,e.qv,t,e.Av))}),n):e.Ov(i,n,t)}))},t.prototype.Ov=function(t,e,i){var n=this.Nv({includeMetadataChanges:!0,Wd:!0},{next:function(r){n(),r.metadata.fromCache&&i&&"server"===i.source?e(new m(y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(r)},error:e})},t.prototype.Mv=function(t){if("string"==typeof t){if(""===t)throw new m(y.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.qv.ui()&&-1!==t.indexOf("/"))throw new m(y.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.qv.path.child(ut.et(t));if(!ft.ct(e))throw new m(y.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Kt(this.firestore.fv,new ft(e))}if(t instanceof si){var i=t;return new Kt(this.firestore.fv,i.Tv)}throw new m(y.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+H(t)+".")},t.prototype.Bv=function(t,e){if(!Array.isArray(t)||0===t.length)throw new m(y.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new m(y.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new m(y.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new m(y.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Qv=function(t){if(t instanceof ce){var e=[ue.ARRAY_CONTAINS,ue.ARRAY_CONTAINS_ANY],i=[ue.IN,ue.ARRAY_CONTAINS_ANY],n=e.indexOf(t.op)>=0,r=i.indexOf(t.op)>=0;if(t.Mn()){var u=this.qv.Ln();if(null!==u&&!u.isEqual(t.field))throw new m(y.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+u.toString()+"' and '"+t.field.toString()+"'");var s=this.qv.qn();null!==s&&this.Jv(t.field,s)}else if(r||n){var o=null;if(r&&(o=this.qv.ri(i)),null===o&&n&&(o=this.qv.ri(e)),null!=o)throw o===t.op?new m(y.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new m(y.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+o.toString()+"' filters.")}}},t.prototype.Gv=function(t){if(null===this.qv.qn()){var e=this.qv.Ln();null!==e&&this.Jv(e,t.field)}},t.prototype.Jv=function(t,e){if(!e.isEqual(t))throw new m(y.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),br=function(){function t(t,e,i,n){this.Rv=t,this.Yv=e,this.Xv=i,this.Av=n,this.$v=null,this.Zv=null,this.metadata=new ai(i.hasPendingWrites,i.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Xv.docs.Y()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Xv.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var i=this;q("QuerySnapshot.forEach",arguments,1,2),M("QuerySnapshot.forEach","function",1,t),this.Xv.docs.forEach((function(n){t.call(e,i.tw(n))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new hi(this.Yv,this.Rv,this.Av)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(W("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),F("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Xv.Ii)throw new m(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.$v&&this.Zv===e||(this.$v=function(t,e,i,n){if(i.pi.Y()){var r,u=0;return i.docChanges.map((function(e){var s=new ci(t,e.doc.key,e.doc,i.fromCache,i.yi.has(e.doc.key),n);return hn(0===e.type,"Invalid event type for first snapshot"),hn(!r||i.query.Xn(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:s,oldIndex:-1,newIndex:u++}}))}var s=i.pi;return i.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=new ci(t,e.doc.key,e.doc,i.fromCache,i.yi.has(e.doc.key),n),u=-1,o=-1;return 0!==e.type&&(hn((u=s.indexOf(e.doc.key))>=0,"Index for document not found"),s=s.delete(e.doc.key)),1!==e.type&&(o=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:mi(e.type),doc:r,oldIndex:u,newIndex:o}}))}(this.Rv,e,this.Xv,this.Av),this.Zv=e),this.$v},t.prototype.isEqual=function(e){if(!(e instanceof t))throw J("isEqual","QuerySnapshot",1,e);return this.Rv===e.Rv&&this.Yv.isEqual(e.Yv)&&this.Xv.isEqual(e.Xv)&&this.Av===e.Av},t.prototype.tw=function(t){return new ci(this.Rv,t.key,t,this.metadata.fromCache,this.Xv.yi.has(t.key),this.Av)},t}();c.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(br.prototype.docChanges,t,{get:function(){return function(){throw new m(y.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var fi=function(t){function i(e,i,n){var r=t.call(this,ae.jn(e),i,n)||this;if(r.nw=e,e.length%2!=1)throw new m(y.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.it()+" has "+e.length);return r}return c.__extends(i,t),Object.defineProperty(i.prototype,"id",{get:function(){return this.qv.path.$()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){var t=this.qv.path.J();return t.Y()?null:new si(new ft(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this.qv.path.it()},enumerable:!0,configurable:!0}),i.prototype.doc=function(t){if(q("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=fn.Ur()),M("CollectionReference.doc","non-empty string",1,t),""===t)throw new m(y.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=ut.et(t);return si.Ev(this.qv.path.child(e),this.firestore,this.Av)},i.prototype.add=function(t){P("CollectionReference.add",arguments,1);var e=this.Av?this.Av.toFirestore(t):t;M("CollectionReference.add","object",1,e);var i=this.doc();return i.set(t).then((function(){return i}))},i.prototype.withConverter=function(t){return new i(this.nw,this.firestore,t)},i}(hi);function pi(t,e){if(void 0===e)return{merge:!1};if(W(t,e,["merge","mergeFields"]),F(t,"boolean","merge",e.merge),function(t,e,i,n,r){void 0!==n&&function(t,e,i,n,r){if(!(n instanceof Array))throw new m(y.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+H(n));for(var u=0;u<n.length;++u)if(!r(n[u]))throw new m(y.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+i+", but the value at index "+u+" was: "+H(n[u]))}(t,e,i,n,r)}(t,"mergeFields","a string or a FieldPath",e.mergeFields,(function(t){return"string"==typeof t||t instanceof wr})),void 0!==e.mergeFields&&void 0!==e.merge)throw new m(y.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function di(t,e){return void 0===e?{}:(W(t,e,["serverTimestamps"]),V(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function vi(t,e){U(t,"object",1,e),e&&(W(t,e,["source"]),V(t,0,"source",e.source,["default","server","cache"]))}function yi(t,e,i){if(e instanceof si){if(e.firestore!==i)throw new m(y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw J(t,"DocumentReference",1,e)}function mi(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cn("Unknown change type: "+t)}}function gi(t,e,i){var n;return t?(n=t.toFirestore(e),i="toFirestore() in "+i):n=e,[n,i]}var wi=N(ri,"Use firebase.firestore() instead."),bi=N(ii,"Use firebase.firestore().runTransaction() instead."),Ii=N(oi,"Use firebase.firestore().batch() instead."),Ei=N(si,"Use firebase.firestore().doc() instead."),_i=N(ui),Ti=N(ci),Ai=N(hi),Ni=N(br),Si=N(fi,"Use firebase.firestore().collection() instead."),ki=function(){function e(t){this.db=t,12.2===e.iw(f.getUA())&&an("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.ew=function(t,i,n){return hn(e.ph(),"IndexedDB not supported in current environment."),sn("SimpleDb","Opening database:",t),new An((function(r,u){var s=window.indexedDB.open(t,i);s.onsuccess=function(t){var i=t.target.result;r(new e(i))},s.onblocked=function(){u(new m(y.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?u(new m(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u(e)},s.onupgradeneeded=function(e){sn("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var i=e.target.result;n.createOrUpgrade(i,s.transaction,e.oldVersion,Qi).next((function(){sn("SimpleDb","Database upgrade to version "+Qi+" complete")}))}})).Ou()},e.delete=function(t){return sn("SimpleDb","Removing database:",t),Ci(window.indexedDB.deleteDatabase(t)).Ou()},e.ph=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(e.rw())return!0;if(void 0===window.navigator)return!1;var t=f.getUA(),i=e.iw(t),n=0<i&&i<10,r=e.uw(t),u=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||u)},e.rw=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.sw)},e.ow=function(t,e){return t.store(e)},e.iw=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)},e.uw=function(t){var e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)},e.prototype.hw=function(t){this.db.onversionchange=function(e){return t(e)}},e.prototype.runTransaction=function(t,e,i){return c.__awaiter(this,void 0,void 0,(function(){var n,r,s,o,h;return c.__generator(this,(function(f){switch(f.label){case 0:n="readonly"===t,r=0,s=function(){var t,s,h,f;return c.__generator(this,(function(u){switch(u.label){case 0:++r,t=Di.open(o.db,n?"readonly":"readwrite",e),u.label=1;case 1:return u.trys.push([1,3,,4]),(s=i(t).catch((function(e){return t.abort(e),An.reject(e)})).Ou()).catch((function(){})),[4,t.cw];case 2:return u.sent(),[2,{value:s}];case 3:return h=u.sent(),f="FirebaseError"!==h.name&&r<3,sn("SimpleDb","Transaction failed with error: %s. Retrying: %s.",h.message,f),f?[3,4]:[2,{value:Promise.reject(h)}];case 4:return[2]}}))},o=this,f.label=1;case 1:return[5,s()];case 2:return"object"==typeof(h=f.sent())?[2,h.value]:[3,1];case 3:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),Oi=function(){function t(t){this.aw=t,this.fw=!1,this.lw=null}return Object.defineProperty(t.prototype,"Cu",{get:function(){return this.fw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dw",{get:function(){return this.lw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.aw=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.fw=!0},t.prototype.vw=function(t){this.lw=t},t.prototype.delete=function(){return Ci(this.aw.delete())},t}(),Di=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.ww=new En,this.transaction.oncomplete=function(){e.ww.resolve()},this.transaction.onabort=function(){t.error?e.ww.reject(t.error):e.ww.resolve()},this.transaction.onerror=function(t){var i=xi(t.target.error);e.ww.reject(i)}}return t.open=function(e,i,n){return new t(e.transaction(n,i))},Object.defineProperty(t.prototype,"cw",{get:function(){return this.ww.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.ww.reject(t),this.aborted||(sn("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return hn(!!e,"Object store not part of transaction: "+t),new Ri(e)},t}(),Ri=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var i;return void 0!==e?(sn("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(sn("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Ci(i)},t.prototype.add=function(t){return sn("SimpleDb","ADD",this.store.name,t,t),Ci(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ci(this.store.get(t)).next((function(i){return void 0===i&&(i=null),sn("SimpleDb","GET",e.store.name,t,i),i}))},t.prototype.delete=function(t){return sn("SimpleDb","DELETE",this.store.name,t),Ci(this.store.delete(t))},t.prototype.count=function(){return sn("SimpleDb","COUNT",this.store.name),Ci(this.store.count())},t.prototype.mw=function(t,e){var i=this.cursor(this.options(t,e)),n=[];return this.gw(i,(function(t,e){n.push(e)})).next((function(){return n}))},t.prototype.bw=function(t,e){sn("SimpleDb","DELETE ALL",this.store.name);var i=this.options(t,e);i.pw=!1;var n=this.cursor(i);return this.gw(n,(function(t,e,i){return i.delete()}))},t.prototype.yw=function(t,e){var i;e?i=t:(i={},e=t);var n=this.cursor(i);return this.gw(n,e)},t.prototype._w=function(t){var e=this.cursor({});return new An((function(i,n){e.onerror=function(t){var e=xi(t.target.error);n(e)},e.onsuccess=function(e){var n=e.target.result;n?t(n.primaryKey,n.value).next((function(t){t?n.continue():i()})):i()}}))},t.prototype.gw=function(t,e){var i=[];return new An((function(n,r){t.onerror=function(t){r(t.target.error)},t.onsuccess=function(t){var r=t.target.result;if(r){var u=new Oi(r),s=e(r.primaryKey,r.value,u);if(s instanceof An){var o=s.catch((function(t){return u.done(),An.reject(t)}));i.push(o)}u.Cu?n():null===u.dw?r.continue():r.continue(u.dw)}else n()}})).next((function(){return An.Vu(i)}))},t.prototype.options=function(t,e){var i=void 0;return void 0!==t&&("string"==typeof t?i=t:(hn(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:i,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var i=this.store.index(t.index);return t.pw?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ci(t){return new An((function(e,i){t.onsuccess=function(t){var i=t.target.result;e(i)},t.onerror=function(t){var e=xi(t.target.error);i(e)}}))}var Pi=!1;function xi(t){var e=ki.iw(f.getUA());if(e>=12.2&&e<13){var i="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(i)>=0){var n=new m("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+i+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Pi||(Pi=!0,setTimeout((function(){throw n}),0)),n}}return t}var Li=function(){function t(t,e,i,n){this.userId=t,this.serializer=e,this.sc=i,this.Ks=n,this.Iw={}}return t.Tw=function(e,i,n,r){return hn(""!==e.uid,"UserID must not be an empty string."),new t(e.t()?e.uid:"",i,n,r)},t.prototype.Dc=function(t){var e=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ji(t).yw({index:no.userMutationsIndex,range:i},(function(t,i,n){e=!1,n.done()})).next((function(){return e}))},t.prototype.vo=function(t,e,i){return this.Ew(t).next((function(e){return e.lastStreamToken=i.toBase64(),Vi(t).put(e)}))},t.prototype.Eo=function(t){return this.Ew(t).next((function(t){return rt.fromBase64String(t.lastStreamToken)}))},t.prototype.Do=function(t,e){return this.Ew(t).next((function(i){return i.lastStreamToken=e.toBase64(),Vi(t).put(i)}))},t.prototype.fo=function(t,e,i,n){var r=this,u=Fi(t),s=ji(t);return s.add({}).next((function(o){hn("number"==typeof o,"Auto-generated key is not a number");for(var c=new mn(o,e,i,n),h=r.serializer.Dw(r.userId,c),a=[],f=new mt((function(t,e){return ln(t.it(),e.it())})),l=0,d=n;l<d.length;l++){var v=d[l],y=ro.key(r.userId,v.key.path,o);f=f.add(v.key.path.J()),a.push(s.put(h)),a.push(u.put(y,ro.PLACEHOLDER))}return f.forEach((function(e){a.push(r.sc.Ic(t,e))})),t.ec((function(){r.Iw[o]=c.keys()})),An.Vu(a).next((function(){return c}))}))},t.prototype._o=function(t,e){var i=this;return ji(t).get(e).next((function(t){return t?(hn(t.userId===i.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),i.serializer.Rw(t)):null}))},t.prototype.do=function(t,e){var i=this;return this.Iw[e]?An.resolve(this.Iw[e]):this._o(t,e).next((function(t){if(t){var n=t.keys();return i.Iw[e]=n,n}return null}))},t.prototype.Lo=function(t,e){var i=this,n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]),u=null;return ji(t).yw({index:no.userMutationsIndex,range:r},(function(t,e,r){e.userId===i.userId&&(hn(e.batchId>=n,"Should have found mutation after "+n),u=i.serializer.Rw(e)),r.done()})).next((function(){return u}))},t.prototype.To=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return ji(t).yw({index:no.userMutationsIndex,range:e,reverse:!0},(function(t,e,n){i=e.batchId,n.done()})).next((function(){return i}))},t.prototype.uo=function(t){var e=this,i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ji(t).mw(no.userMutationsIndex,i).next((function(t){return t.map((function(t){return e.serializer.Rw(t)}))}))},t.prototype.oc=function(t,e){var i=this,n=ro.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(n),u=[];return Fi(t).yw({range:r},(function(n,r,s){var o=n[0],c=n[1],h=n[2],a=er(c);if(o===i.userId&&e.path.isEqual(a))return ji(t).get(h).next((function(t){if(!t)throw cn("Dangling document-mutation reference found: "+n+" which points to "+h);hn(t.userId===i.userId,"Unexpected user '"+t.userId+"' for mutation batch "+h),u.push(i.serializer.Rw(t))}));s.done()})).next((function(){return u}))},t.prototype.ac=function(t,e){var i=this,n=new mt(ln),r=[];return e.forEach((function(e){var u=ro.prefixForPath(i.userId,e.path),s=IDBKeyRange.lowerBound(u),o=Fi(t).yw({range:s},(function(t,r,u){var s=t[0],o=t[1],c=t[2],h=er(o);s===i.userId&&e.path.isEqual(h)?n=n.add(c):u.done()}));r.push(o)})),An.Vu(r).next((function(){return i.Sw(t,n)}))},t.prototype.wc=function(t,e){var i=this;hn(!e.Nn(),"Document queries shouldn't go down this path"),hn(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,u=ro.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(u),o=new mt(ln);return Fi(t).yw({range:s},(function(t,e,u){var s=t[0],c=t[1],h=t[2],a=er(c);s===i.userId&&n.Z(a)?a.length===r&&(o=o.add(h)):u.done()})).next((function(){return i.Sw(t,o)}))},t.prototype.Sw=function(t,e){var i=this,n=[],r=[];return e.forEach((function(e){r.push(ji(t).get(e).next((function(t){if(null===t)throw cn("Dangling document-mutation reference found, which points to "+e);hn(t.userId===i.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.push(i.serializer.Rw(t))})))})),An.Vu(r).next((function(){return n}))},t.prototype.Io=function(t,e){var i=this;return Ui(t.Aw,this.userId,e).next((function(n){return t.ec((function(){i.th(e.batchId)})),An.forEach(n,(function(e){return i.Ks.Pc(t,e)}))}))},t.prototype.th=function(t){delete this.Iw[t]},t.prototype.po=function(t){var e=this;return this.Dc(t).next((function(i){if(!i)return An.resolve();var n=IDBKeyRange.lowerBound(ro.prefixForUser(e.userId)),r=[];return Fi(t).yw({range:n},(function(t,i,n){if(t[0]===e.userId){var u=er(t[1]);r.push(u)}else n.done()})).next((function(){hn(0===r.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+r.map((function(t){return t.it()})))}))}))},t.prototype.Cs=function(t,e){return Mi(t,this.userId,e)},t.prototype.Ew=function(t){var e=this;return Vi(t).get(this.userId).next((function(t){return t||new eo(e.userId,-1,"")}))},t}();function Mi(t,e,i){var n=ro.prefixForPath(e,i.path),r=n[1],u=IDBKeyRange.lowerBound(n),s=!1;return Fi(t).yw({range:u,pw:!0},(function(t,i,n){var u=t[0],o=t[1];t[2],u===e&&o===r&&(s=!0),n.done()})).next((function(){return s}))}function Ui(t,e,i){var n=t.store(no.store),r=t.store(ro.store),u=[],s=IDBKeyRange.only(i.batchId),o=0,c=n.yw({range:s},(function(t,e,i){return o++,i.delete()}));u.push(c.next((function(){hn(1===o,"Dangling document-mutation reference found: Missing batch "+i.batchId)})));for(var h=[],a=0,f=i.mutations;a<f.length;a++){var l=f[a],d=ro.key(e,l.key.path,i.batchId);u.push(r.delete(d)),h.push(l.key)}return An.Vu(u).next((function(){return h}))}function ji(t){return To.ow(t,no.store)}function Fi(t){return To.ow(t,ro.store)}function Vi(t){return To.ow(t,eo.store)}var qi=function(){function t(t,e){this.Ks=t,this.serializer=e,this.Wc=sr.qc()}return t.prototype.Go=function(t){var e=this;return this.Cw(t).next((function(i){return i.highestTargetId=e.Wc.after(i.highestTargetId),e.Pw(t,i).next((function(){return i.highestTargetId}))}))},t.prototype.Ro=function(t){return this.Cw(t).next((function(t){return dt.L(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.zc=function(t){return zi(t.Aw)},t.prototype.Fo=function(t,e,i){var n=this;return this.Cw(t).next((function(r){return r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.G()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),n.Pw(t,r)}))},t.prototype.Wo=function(t,e){var i=this;return this.Kc(t,e).next((function(){return i.Cw(t).next((function(n){return n.targetCount+=1,i.kw(e,n),i.Pw(t,n)}))}))},t.prototype.No=function(t,e){return this.Kc(t,e)},t.prototype.Hc=function(t,e){var i=this;return this.Jc(t,e.targetId).next((function(){return Bi(t).delete(e.targetId)})).next((function(){return i.Cw(t)})).next((function(e){return hn(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,i.Pw(t,e)}))},t.prototype.ds=function(t,e,i){var n=this,r=0,u=[];return Bi(t).yw((function(s,o){var c=n.serializer.Nw(o);c.sequenceNumber<=e&&null===i.get(c.targetId)&&(r++,u.push(n.Hc(t,c)))})).next((function(){return An.Vu(u)})).next((function(){return r}))},t.prototype.oe=function(t,e){var i=this;return Bi(t).yw((function(t,n){var r=i.serializer.Nw(n);e(r)}))},t.prototype.Cw=function(t){return Gi(t.Aw)},t.prototype.Pw=function(t,e){return(i=t,To.ow(i,ho.store)).put(ho.key,e);var i},t.prototype.Kc=function(t,e){return Bi(t).put(this.serializer.Ow(e))},t.prototype.kw=function(t,e){var i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i},t.prototype.Yc=function(t){return this.Cw(t).next((function(t){return t.targetCount}))},t.prototype.Qo=function(t,e){var i=this,n=e.canonicalId(),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),u=null;return Bi(t).yw({range:r,index:uo.queryTargetsIndexName},(function(t,n,r){var s=i.serializer.Nw(n);e.isEqual(s.target)&&(u=s,r.done())})).next((function(){return u}))},t.prototype.Co=function(t,e,i){var n=this,r=[],u=Hi(t);return e.forEach((function(e){var s=Qn(e.path);r.push(u.put(new co(i,s))),r.push(n.Ks._s(t,e))})),An.Vu(r)},t.prototype.Ao=function(t,e,i){var n=this,r=Hi(t);return An.forEach(e,(function(e){var u=Qn(e.path);return An.Vu([r.delete([i,u]),n.Ks.Ts(t,e)])}))},t.prototype.Jc=function(t,e){var i=Hi(t),n=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(n)},t.prototype.Ho=function(t,e){var i=IDBKeyRange.bound([e],[e+1],!1,!0),n=Hi(t),r=Pe();return n.yw({range:i,pw:!0},(function(t,e,i){var n=er(t[1]),u=new ft(n);r=r.add(u)})).next((function(){return r}))},t.prototype.Cs=function(t,e){var i=Qn(e.path),n=IDBKeyRange.bound([i],[dn(i)],!1,!0),r=0;return Hi(t).yw({index:co.documentTargetsIndex,pw:!0,range:n},(function(t,e,i){var n=t[0];t[1],0!==n&&(r++,i.done())})).next((function(){return r>0}))},t.prototype.be=function(t,e){var i=this;return Bi(t).get(e).next((function(t){return t?i.serializer.Nw(t):null}))},t}();function Bi(t){return To.ow(t,uo.store)}function Gi(t){return ki.ow(t,ho.store).get(ho.key).next((function(t){return hn(null!==t,"Missing metadata row."),t}))}function zi(t){return Gi(t).next((function(t){return t.highestListenSequenceNumber}))}function Hi(t){return To.ow(t,co.store)}var Ki=function(){function t(t,e){this.serializer=t,this.sc=e}return t.prototype.Fs=function(t,e,i){return Ji(t).put(Yi(e),i)},t.prototype.Us=function(t,e){var i=Ji(t),n=Yi(e);return i.delete(n)},t.prototype.updateMetadata=function(t,e){var i=this;return this.getMetadata(t).next((function(n){return n.byteSize+=e,i.Fw(t,n)}))},t.prototype.xs=function(t,e){var i=this;return Ji(t).get(Yi(e)).next((function(t){return i.Vw(t)}))},t.prototype.Uw=function(t,e){var i=this;return Ji(t).get(Yi(e)).next((function(t){var e=i.Vw(t);return e?{Nc:e,size:Xi(t)}:null}))},t.prototype.getEntries=function(t,e){var i=this,n=Se();return this.xw(t,e,(function(t,e){var r=i.Vw(e);n=n.dt(t,r)})).next((function(){return n}))},t.prototype.jw=function(t,e){var i=this,n=Se(),r=new lt(ft.W);return this.xw(t,e,(function(t,e){var u=i.Vw(e);u?(n=n.dt(t,u),r=r.dt(t,Xi(e))):(n=n.dt(t,null),r=r.dt(t,0))})).next((function(){return{Lw:n,qw:r}}))},t.prototype.xw=function(t,e,i){if(e.Y())return An.resolve();var n=IDBKeyRange.bound(e.first().path.nt(),e.last().path.nt()),r=e.yt(),u=r.Rt();return Ji(t).yw({range:n},(function(t,e,n){for(var s=ft.ft(t);u&&ft.W(u,s)<0;)i(u,null),u=r.Rt();u&&u.isEqual(s)&&(i(u,e),u=r.St()?r.Rt():null),u?n.vw(u.path.nt()):n.done()})).next((function(){for(;u;)i(u,null),u=r.St()?r.Rt():null}))},t.prototype.Jo=function(t,e,i){var n=this;hn(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Oe(),u=e.path.length+1,s={};if(i.isEqual(dt.MIN)){var o=e.path.nt();s.range=IDBKeyRange.lowerBound(o)}else{var c=e.path.nt(),h=this.serializer.Bw(i);s.range=IDBKeyRange.lowerBound([c,h],!0),s.index=so.collectionReadTimeIndex}return Ji(t).yw(s,(function(t,i,s){if(t.length===u){var o=n.serializer.Mw(i);e.path.Z(o.key.path)?o instanceof $t&&e.matches(o)&&(r=r.dt(o.key,o)):s.done()}})).next((function(){return r}))},t.prototype.eh=function(t,e){var i=this,n=Ne(),r=this.serializer.Bw(e),u=Ji(t),s=IDBKeyRange.lowerBound(r,!0);return u.yw({index:so.readTimeIndex,range:s},(function(t,e){var u=i.serializer.Mw(e);n=n.dt(u.key,u),r=e.readTime})).next((function(){return{rh:n,readTime:i.serializer.Qw(r)}}))},t.prototype.uh=function(t){var e=this,i=Ji(t),n=dt.MIN;return i.yw({index:so.readTimeIndex,reverse:!0},(function(t,i,r){i.readTime&&(n=e.serializer.Qw(i.readTime)),r.done()})).next((function(){return n}))},t.prototype.wo=function(e){return new t.Fc(this,!!e&&e.mo)},t.prototype.Vc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Wi(t).get(ao.key).next((function(t){return hn(!!t,"Missing document cache metadata"),t}))},t.prototype.Fw=function(t,e){return Wi(t).put(ao.key,e)},t.prototype.Vw=function(t){if(t){var e=this.serializer.Mw(t);return e instanceof Zt&&e.version.isEqual(dt.q())?null:e}return null},t.Fc=function(t){function i(e,i){var n=t.call(this)||this;return n.Uc=e,n.mo=i,n.Gw=new wn((function(t){return t.toString()})),n}return c.__extends(i,t),i.prototype.qs=function(t){var e=this,i=[],n=0,r=new mt((function(t,e){return ln(t.it(),e.it())}));return this.ks.forEach((function(u,s){var o=e.Gw.get(u);if(hn(void 0!==o,"Cannot modify a document that wasn't read (for "+u+")"),s){hn(!e.readTime.isEqual(dt.MIN),"Cannot add a document with a read time of zero");var c=e.Uc.serializer.Ww(s,e.readTime);r=r.add(u.path.J());var h=Xi(c);n+=h-o,i.push(e.Uc.Fs(t,u,c))}else if(n-=o,e.mo){var a=e.Uc.serializer.Ww(new Zt(u,dt.q()),e.readTime);i.push(e.Uc.Fs(t,u,a))}else i.push(e.Uc.Us(t,u))})),r.forEach((function(n){i.push(e.Uc.sc.Ic(t,n))})),i.push(this.Uc.updateMetadata(t,n)),An.Vu(i)},i.prototype.js=function(t,e){var i=this;return this.Uc.Uw(t,e).next((function(t){return null===t?(i.Gw.set(e,0),null):(i.Gw.set(e,t.size),t.Nc)}))},i.prototype.Ls=function(t,e){var i=this;return this.Uc.jw(t,e).next((function(t){var e=t.Lw;return t.qw.forEach((function(t,e){i.Gw.set(t,e)})),e}))},i}(xn),t}();function Wi(t){return To.ow(t,ao.store)}function Ji(t){return To.ow(t,so.store)}function Yi(t){return t.path.nt()}function Xi(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw cn("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Qi=9,$i=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,i,n){var r=this;hn(i<n&&i>=0&&n<=Qi,"Unexpected schema upgrade from v"+i+" to v{toVersion}.");var u=new Di(e);i<1&&n>=1&&(function(t){t.createObjectStore(to.store)}(t),function(t){t.createObjectStore(eo.store,{keyPath:eo.keyPath}),t.createObjectStore(no.store,{keyPath:no.keyPath,autoIncrement:!0}).createIndex(no.userMutationsIndex,no.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ro.store)}(t),lo(t),function(t){t.createObjectStore(so.store)}(t));var s=An.resolve();return i<3&&n>=3&&(0!==i&&(function(t){t.deleteObjectStore(co.store),t.deleteObjectStore(uo.store),t.deleteObjectStore(ho.store)}(t),lo(t)),s=s.next((function(){return function(t){var e=t.store(ho.store),i=new ho(0,0,dt.MIN.G(),0);return e.put(ho.key,i)}(u)}))),i<4&&n>=4&&(0!==i&&(s=s.next((function(){return function(t,e){return e.store(no.store).mw().next((function(i){t.deleteObjectStore(no.store),t.createObjectStore(no.store,{keyPath:no.keyPath,autoIncrement:!0}).createIndex(no.userMutationsIndex,no.userMutationsKeyPath,{unique:!0});var n=e.store(no.store),r=i.map((function(t){return n.put(t)}));return An.Vu(r)}))}(t,u)}))),s=s.next((function(){!function(t){t.createObjectStore(po.store,{keyPath:po.keyPath})}(t)}))),i<5&&n>=5&&(s=s.next((function(){return r.removeAcknowledgedMutations(u)}))),i<6&&n>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ao.store)}(t),r.addDocumentGlobal(u)}))),i<7&&n>=7&&(s=s.next((function(){return r.ensureSequenceNumbers(u)}))),i<8&&n>=8&&(s=s.next((function(){return r.createCollectionParentIndex(t,u)}))),i<9&&n>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(so.store);e.createIndex(so.readTimeIndex,so.readTimeIndexPath,{unique:!1}),e.createIndex(so.collectionReadTimeIndex,so.collectionReadTimeIndexPath,{unique:!1})}(e)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(so.store).yw((function(t,i){e+=Xi(i)})).next((function(){var i=new ao(e);return t.store(ao.store).put(ao.key,i)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,i=t.store(eo.store),n=t.store(no.store);return i.mw().next((function(i){return An.forEach(i,(function(i){var r=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.mw(no.userMutationsIndex,r).next((function(n){return An.forEach(n,(function(n){hn(n.userId===i.userId,"Cannot process batch "+n.batchId+" from unexpected user");var r=e.serializer.Rw(n);return Ui(t,i.userId,r).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(co.store),i=t.store(so.store);return zi(t).next((function(t){var n=[];return i.yw((function(i,r){var u=new ut(i),s=function(t){return[0,Qn(t)]}(u);n.push(e.get(s).next((function(i){return i?An.resolve():function(i){return e.put(new co(0,Qn(i),t))}(u)})))})).next((function(){return An.Vu(n)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(fo.store,{keyPath:fo.keyPath});var i=e.store(fo.store),n=new rr,r=function(t){if(n.add(t)){var e=t.$(),r=t.J();return i.put({collectionId:e,parent:Qn(r)})}};return e.store(so.store).yw({pw:!0},(function(t,e){var i=new ut(t);return r(i.J())})).next((function(){return e.store(ro.store).yw({pw:!0},(function(t,e){t[0];var i=t[1],n=(t[2],er(i));return r(n.J())}))}))},t}(),Zi=function(t,e){this.seconds=t,this.nanoseconds=e},to=function(){function t(t,e,i){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=i}return t.store="owner",t.key="owner",t}(),eo=function(){function t(t,e,i){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=i}return t.store="mutationQueues",t.keyPath="userId",t}(),no=function(){function t(t,e,i,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=i,this.baseMutations=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),ro=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Qn(e)]},t.key=function(t,e,i){return[t,Qn(e),i]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),io=function(t,e){this.path=t,this.readTime=e},oo=function(t,e){this.path=t,this.version=e},so=function(){function t(t,e,i,n,r,u){this.unknownDocument=t,this.noDocument=e,this.document=i,this.hasCommittedMutations=n,this.readTime=r,this.parentPath=u}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),ao=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),uo=function(){function t(t,e,i,n,r,u,s){this.targetId=t,this.canonicalId=e,this.readTime=i,this.resumeToken=n,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=u,this.query=s}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),co=function(){function t(t,e,i){this.targetId=t,this.path=e,this.sequenceNumber=i,hn(0===t==(void 0!==i),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),ho=function(){function t(t,e,i,n){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=i,this.targetCount=n}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),fo=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function lo(t){t.createObjectStore(co.store,{keyPath:co.keyPath}).createIndex(co.documentTargetsIndex,co.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(uo.store,{keyPath:uo.keyPath}).createIndex(uo.queryTargetsIndexName,uo.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ho.store)}var po=function(){function t(t,e,i,n){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=i,this.inForeground=n}return t.store="clientMetadata",t.keyPath="clientId",t}(),vo=[eo.store,no.store,ro.store,so.store,uo.store,to.store,ho.store,co.store],yo=c.__spreadArrays(vo,[po.store]),mo=c.__spreadArrays(yo,[ao.store]),go=c.__spreadArrays(mo,[fo.store]),wo=function(){function t(){this.zw=new rr}return t.prototype.Ic=function(t,e){var i=this;if(hn(e.length%2==1,"Expected a collection path."),!this.zw.has(e)){var n=e.$(),r=e.J();t.ec((function(){i.zw.add(e)}));var u={collectionId:n,parent:Qn(r)};return bo(t).put(u)}return An.resolve()},t.prototype.vc=function(t,e){var i=[],n=IDBKeyRange.bound([e,""],[dn(e),""],!1,!0);return bo(t).mw(n).next((function(t){for(var n=0,r=t;n<r.length;n++){var u=r[n];if(u.collectionId!==e)break;i.push(er(u.parent))}return i}))},t}();function bo(t){return To.ow(t,fo.store)}var Io=function(){function t(t){this.Kw=t}return t.prototype.Mw=function(t){if(t.document)return this.Kw.We(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ft.ft(t.noDocument.path),i=this.Hw(t.noDocument.readTime);return new Zt(e,i,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ft.ft(t.unknownDocument.path),i=this.Hw(t.unknownDocument.version),new te(e,i)):cn("Unexpected DbRemoteDocument")},t.prototype.Ww=function(t,e){var i=this.Bw(e),n=t.key.path.J().nt();if(t instanceof $t){var r=t.proto?t.proto:this.Kw.Ge(t),u=t.hasCommittedMutations;return new so(null,null,r,u,i,n)}if(t instanceof Zt){var s=t.key.path.nt(),o=this.Jw(t.version);return u=t.hasCommittedMutations,new so(null,new io(s,o),null,u,i,n)}if(t instanceof te){s=t.key.path.nt();var c=this.Jw(t.version);return new so(new oo(s,c),null,null,!0,i,n)}return cn("Unexpected MaybeDocument")},t.prototype.Bw=function(t){var e=t.G();return[e.seconds,e.nanoseconds]},t.prototype.Qw=function(t){var e=new st(t[0],t[1]);return dt.L(e)},t.prototype.Jw=function(t){var e=t.G();return new Zi(e.seconds,e.nanoseconds)},t.prototype.Hw=function(t){var e=new st(t.seconds,t.nanoseconds);return dt.L(e)},t.prototype.Dw=function(t,e){var i=this,n=e.baseMutations.map((function(t){return i.Kw.tr(t)})),r=e.mutations.map((function(t){return i.Kw.tr(t)}));return new no(t,e.batchId,e.En.toMillis(),n,r)},t.prototype.Rw=function(t){var e=this,i=(t.baseMutations||[]).map((function(t){return e.Kw.rr(t)})),n=t.mutations.map((function(t){return e.Kw.rr(t)})),r=st.fromMillis(t.localWriteTimeMs);return new mn(t.batchId,r,i,n)},t.prototype.Yw=function(t){var e=[];return t.forEach((function(t){e.push(Qn(t.path))})),e},t.prototype.Xw=function(t){for(var e=Pe(),i=0,n=t;i<n.length;i++){var r=n[i];e=e.add(new ft(er(r)))}return e},t.prototype.Nw=function(t){var e,i=this.Hw(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?this.Hw(t.lastLimboFreeSnapshotVersion):dt.MIN;return e=void 0!==t.query.documents?this.Kw.lr(t.query):this.Kw.gr(t.query),new be(e,t.targetId,0,t.lastListenSequenceNumber,i,n,rt.fromBase64String(t.resumeToken))},t.prototype.Ow=function(t){hn(0===t.ci,"Only queries with purpose 0 may be stored, got "+t.ci);var e,i=this.Jw(t.ai),n=this.Jw(t.lastLimboFreeSnapshotVersion);e=t.target.Nn()?this.Kw.ar(t.target):this.Kw.dr(t.target);var r=t.resumeToken.toBase64();return new uo(t.targetId,t.target.canonicalId(),i,r,t.sequenceNumber,n,e)},t}(),Eo="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",_o=function(t){function i(e,i){var n=t.call(this)||this;return n.Aw=e,n.Po=i,n}return c.__extends(i,t),i}(Jn),To=function(){function t(e,i,n,r,u,s,o,c){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=n,this.fh=s,this.$w=c,this.Zc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zw=null,this.inForeground=!1,this.tm=null,this.nm=null,this.im=Number.NEGATIVE_INFINITY,this.em=function(t){return Promise.resolve()},this.Ks=new So(this,u),this.rm=i+t.um,this.serializer=new Io(o),this.document=r.document,this.$s=new qi(this.Ks,this.serializer),this.sc=new wo,this.uc=new Ki(this.serializer,this.sc),!r.window||!r.window.localStorage)throw new m(y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.sm=this.window.localStorage}return t.ow=function(t,e){if(t instanceof _o)return ki.ow(t.Aw,e);throw cn("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.om=function(e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:if(!t.ph())throw new m(y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(i=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.hm,e.fh,e.serializer,e.$w)).start()];case 1:return n.sent(),[2,i]}}))}))},t.prototype.start=function(){var t=this;return hn(!this.ss,"IndexedDbPersistence double-started!"),hn(null!==this.window,"Expected 'window' to be defined"),ki.ew(this.rm,Qi,new $i(this.serializer)).then((function(e){return t.cm=e,t.am()})).then((function(){return t.fm(),t.lm(),t.dm(),t.cm.runTransaction("readonly",[ho.store],(function(t){return zi(t)}))})).then((function(e){t.$c=new In(e,t.$w)})).then((function(){t.Zc=!0})).catch((function(e){return t.cm&&t.cm.close(),Promise.reject(e)}))},t.prototype.na=function(t){var e=this;return this.em=function(i){return c.__awaiter(e,void 0,void 0,(function(){return c.__generator(this,(function(e){return this.ss?[2,t(i)]:[2]}))}))},t(this.isPrimary)},t.prototype.ia=function(t){var e=this;this.cm.hw((function(i){return c.__awaiter(e,void 0,void 0,(function(){return c.__generator(this,(function(e){switch(e.label){case 0:return null!==i.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.nh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fh.ou((function(){return c.__awaiter(e,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.ss?[4,this.am()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.am=function(){var t=this;return this.cm.runTransaction("readwrite",go,(function(e){return No(e).put(new po(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.vm(e).next((function(e){e||(t.isPrimary=!1,t.fh.ou((function(){return t.em(!1)})))}))})).next((function(){return t.wm(e)})).next((function(i){return t.isPrimary&&!i?t.mm(e).next((function(){return!1})):!!i&&t.gm(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return sn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fh.ou((function(){return t.em(e)})),t.isPrimary=e}))},t.prototype.vm=function(t){var e=this;return Ao(t).get(to.key).next((function(t){return An.resolve(e.bm(t))}))},t.prototype.pm=function(t){return No(t).delete(this.clientId)},t.prototype.ym=function(){return c.__awaiter(this,void 0,void 0,(function(){var e=this;return c.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this._m(this.im,18e5)?[3,2]:(this.im=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(i){var n=t.ow(i,po.store);return n.mw().next((function(t){var i=e.Im(t,18e5),r=t.filter((function(t){return-1===i.indexOf(t)}));return An.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:i.sent().forEach((function(t){e.window.localStorage.removeItem(e.Tm(t.clientId))})),i.label=2;case 2:return[2]}}))}))},t.prototype.dm=function(){var t=this;this.nm=this.fh.yu("client_metadata_refresh",4e3,(function(){return t.am().then((function(){return t.ym()})).then((function(){return t.dm()}))}))},t.prototype.bm=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.wm=function(t){var e=this;return Ao(t).get(to.key).next((function(i){if(null!==i&&e._m(i.leaseTimestampMs,5e3)&&!e.Em(i.ownerId)){if(e.bm(i)&&e.networkEnabled)return!0;if(!e.bm(i)){if(!i.allowTabSynchronization)throw new m(y.FAILED_PRECONDITION,Eo);return!1}}return!(!e.networkEnabled||!e.inForeground)||No(t).mw().next((function(t){return void 0===e.Im(t,5e3).find((function(t){if(e.clientId!==t.clientId){var i=!e.networkEnabled&&t.networkEnabled,n=!e.inForeground&&t.inForeground,r=e.networkEnabled===t.networkEnabled;if(i||n&&r)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&sn("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return c.__awaiter(this,void 0,void 0,(function(){var t=this;return c.__generator(this,(function(e){switch(e.label){case 0:return this.Zc=!1,this.Dm(),this.nm&&(this.nm.cancel(),this.nm=null),this.Rm(),this.Sm(),[4,this.cm.runTransaction("readwrite",[to.store,po.store],(function(e){return t.mm(e).next((function(){return t.pm(e)}))}))];case 1:return e.sent(),this.cm.close(),this.Am(),[2]}}))}))},t.prototype.Im=function(t,e){var i=this;return t.filter((function(t){return i._m(t.updateTimeMs,e)&&!i.Em(t.clientId)}))},t.prototype.$o=function(){var t=this;return this.cm.runTransaction("readonly",[po.store],(function(e){return No(e).mw().next((function(e){return t.Im(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:return t.ph()?(i=e+t.um,[4,ki.delete(i)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"ss",{get:function(){return this.Zc},enumerable:!0,configurable:!0}),t.prototype.Js=function(t){return hn(this.ss,"Cannot initialize MutationQueue before persistence is started."),Li.Tw(t,this.serializer,this.sc,this.Ks)},t.prototype.Zs=function(){return hn(this.ss,"Cannot initialize TargetCache before persistence is started."),this.$s},t.prototype.Xs=function(){return hn(this.ss,"Cannot initialize RemoteDocumentCache before persistence is started."),this.uc},t.prototype.no=function(){return hn(this.ss,"Cannot initialize IndexManager before persistence is started."),this.sc},t.prototype.runTransaction=function(t,e,i){var n=this;sn("IndexedDbPersistence","Starting transaction:",t);var r,u="readonly"===e?"readonly":"readwrite";return this.cm.runTransaction(u,go,(function(u){return r=new _o(u,n.$c.next()),"readwrite-primary"===e?n.vm(u).next((function(t){return!!t||n.wm(u)})).next((function(e){if(!e)throw an("Failed to obtain primary lease for action '"+t+"'."),n.isPrimary=!1,n.fh.ou((function(){return n.em(!1)})),new m(y.FAILED_PRECONDITION,Wn);return i(r)})).next((function(t){return n.gm(u).next((function(){return t}))})):n.Cm(u).next((function(){return i(r)}))})).then((function(t){return r.rc(),t}))},t.prototype.Cm=function(t){var e=this;return Ao(t).get(to.key).next((function(t){if(null!==t&&e._m(t.leaseTimestampMs,5e3)&&!e.Em(t.ownerId)&&!e.bm(t)&&!t.allowTabSynchronization)throw new m(y.FAILED_PRECONDITION,Eo)}))},t.prototype.gm=function(t){var e=new to(this.clientId,this.allowTabSynchronization,Date.now());return Ao(t).put(to.key,e)},t.ph=function(){return ki.ph()},t.Pm=function(t){var e=t.Dn.projectId;return t.Dn.xr||(e+="."+t.Dn.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.mm=function(t){var e=this,i=Ao(t);return i.get(to.key).next((function(t){return e.bm(t)?(sn("IndexedDbPersistence","Releasing primary lease."),i.delete(to.key)):An.resolve()}))},t.prototype._m=function(t,e){var i=Date.now();return!(t<i-e||t>i&&(an("Detected an update time that is in the future: "+t+" > "+i),1))},t.prototype.fm=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.tm=function(){t.fh.ou((function(){return t.inForeground="visible"===t.document.visibilityState,t.am()}))},this.document.addEventListener("visibilitychange",this.tm),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Rm=function(){this.tm&&(hn(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.tm),this.tm=null)},t.prototype.lm=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Zw=function(){t.Dm(),t.fh.ou((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Zw))},t.prototype.Sm=function(){this.Zw&&(hn("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Zw),this.Zw=null)},t.prototype.Em=function(t){try{var e=null!==this.sm.getItem(this.Tm(t));return sn("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return an("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Dm=function(){try{this.sm.setItem(this.Tm(this.clientId),String(Date.now()))}catch(t){an("Failed to set zombie client id.",t)}},t.prototype.Am=function(){try{this.sm.removeItem(this.Tm(this.clientId))}catch(t){}},t.prototype.Tm=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.um="main",t}();function Ao(t){return t.store(to.store)}function No(t){return t.store(po.store)}var So=function(){function t(t,e){this.db=t,this.sa=null,this.ns=new Rn(this,e)}return t.prototype.as=function(t){var e=this.km(t);return this.db.Zs().Yc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.km=function(t){var e=0;return this.ls(t,(function(t){e++})).next((function(){return e}))},t.prototype.oe=function(t,e){return this.db.Zs().oe(t,e)},t.prototype.ls=function(t,e){return this.Nm(t,(function(t,i){return e(i)}))},t.prototype.zs=function(t){this.sa=t},t.prototype._s=function(t,e){return ko(t,e)},t.prototype.Ts=function(t,e){return ko(t,e)},t.prototype.ds=function(t,e,i){return this.db.Zs().ds(t,e,i)},t.prototype.Pc=function(t,e){return ko(t,e)},t.prototype.Om=function(t,e){return this.sa.Cs(e)?An.resolve(!0):function(t,e){var i=!1;return Vi(t)._w((function(n){return Mi(t,n,e).next((function(t){return t&&(i=!0),An.resolve(!t)}))})).next((function(){return i}))}(t,e)},t.prototype.vs=function(t,e){var i=this,n=this.db.Xs().wo(),r=[],u=0;return this.Nm(t,(function(s,o){if(o<=e){var c=i.Om(t,s).next((function(e){if(!e)return u++,n.xs(t,s).next((function(){return n.Us(s),Hi(t).delete([0,Qn(s.path)])}))}));r.push(c)}})).next((function(){return An.Vu(r)})).next((function(){return n.apply(t)})).next((function(){return u}))},t.prototype.removeTarget=function(t,e){var i=e.fi(t.Po);return this.db.Zs().No(t,i)},t.prototype.Oo=function(t,e){return ko(t,e)},t.prototype.Nm=function(t,e){var i,n=Hi(t),r=In.Xr;return n.yw({index:co.documentTargetsIndex},(function(t,n){var u=t[0],s=(t[1],n.path),o=n.sequenceNumber;0===u?(r!==In.Xr&&e(new ft(er(i)),r),r=o,i=s):r=In.Xr})).next((function(){r!==In.Xr&&e(new ft(er(i)),r)}))},t.prototype.ms=function(t){return this.db.Xs().Vc(t)},t}();function ko(t,e){return Hi(t).put(function(t,e){return new co(0,Qn(t.path),e)}(e,t.Po))}var Oo=function(){function t(){}return t.prototype.initialize=function(t,e,i,n,s,r){return c.__awaiter(this,void 0,void 0,(function(){var o,h,f,a;return c.__generator(this,(function(u){switch(u.label){case 0:if(hn(r.aa,"IndexedDbPersistenceProvider can only provide durable persistence"),hn(!this.persistence,"configure() already called"),o=To.Pm(e),h=new en(e.Dn,{_e:!0}),!Hn.ph(i))throw new m(y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return this.td=r.synchronizeTabs?new Hn(t,i,o,n,s):new Kn,f=this,[4,To.om({allowTabSynchronization:r.synchronizeTabs,persistenceKey:o,clientId:n,platform:i,fh:t,serializer:h,hm:On.Hu(r.cacheSizeBytes),$w:this.td})];case 1:return f.persistence=u.sent(),a=this.persistence.Ks.ns,this.Yd=new Dn(a,t),[2]}}))}))},t.prototype.la=function(){return hn(!!this.persistence,"initialize() not called"),this.persistence},t.prototype.da=function(){return hn(!!this.td,"initialize() not called"),this.td},t.prototype.fa=function(){return hn(!!this.Yd,"initialize() not called"),this.Yd},t.prototype.clearPersistence=function(t){var e=To.Pm(t);return To.clearPersistence(e)},t}(),Do={Firestore:wi,GeoPoint:ot,Timestamp:st,Blob:it,Transaction:bi,WriteBatch:Ii,DocumentReference:Ei,DocumentSnapshot:_i,Query:Ai,QueryDocumentSnapshot:Ti,QuerySnapshot:Ni,CollectionReference:Si,FieldPath:wr,FieldValue:kr,setLogLevel:ri.setLogLevel,CACHE_SIZE_UNLIMITED:hr};var Ro=function(){function t(){}return t.prototype.Xf=function(t){},t.prototype.shutdown=function(){},t}(),Co=function(){function t(){var t=this;this.Fm=function(){return t.Vm()},this.Um=function(){return t.xm()},this.jm=[],this.Lm()}return t.prototype.Xf=function(t){this.jm.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Fm),window.removeEventListener("offline",this.Um)},t.prototype.Lm=function(){window.addEventListener("online",this.Fm),window.addEventListener("offline",this.Um)},t.prototype.Vm=function(){sn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.jm;t<e.length;t++)(0,e[t])(0)},t.prototype.xm=function(){sn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.jm;t<e.length;t++)(0,e[t])(1)},t.ph=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Po=function(){function t(t){this.qm=t.qm,this.Bm=t.Bm}return t.prototype.Ma=function(t){hn(!this.Mm,"Called onOpen on stream twice!"),this.Mm=t},t.prototype.xa=function(t){hn(!this.Qm,"Called onClose on stream twice!"),this.Qm=t},t.prototype.onMessage=function(t){hn(!this.Gm,"Called onMessage on stream twice!"),this.Gm=t},t.prototype.close=function(){this.Bm()},t.prototype.send=function(t){this.qm(t)},t.prototype.Wm=function(){hn(void 0!==this.Mm,"Cannot call onOpen because no callback was set"),this.Mm()},t.prototype.zm=function(t){hn(void 0!==this.Qm,"Cannot call onClose because no callback was set"),this.Qm(t)},t.prototype.Km=function(t){hn(void 0!==this.Gm,"Cannot call onMessage because no callback was set"),this.Gm(t)},t}(),xo={BatchGetDocuments:"batchGet",Commit:"commit"},Lo="gl-js/ fire/"+d,Mo=function(){function t(t){this.Dn=t.Dn;var e=t.ssl?"https":"http";this.Hm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Jm=function(t,e){if(e)for(var i in e.o)e.o.hasOwnProperty(i)&&(t[i]=e.o[i]);t["X-Goog-Api-Client"]=Lo},t.prototype.tf=function(t,e,n){var r=this,u=this.Ym(t);return new Promise((function(s,o){var h=new l.XhrIo;h.listenOnce(l.EventType.COMPLETE,(function(){try{switch(h.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var e=h.getResponseJson();sn("Connection","XHR received:",JSON.stringify(e)),s(e);break;case l.ErrorCode.TIMEOUT:sn("Connection",'RPC "'+t+'" timed out'),o(new m(y.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var i=h.getStatus();if(sn("Connection",'RPC "'+t+'" failed with status:',i,"response text:",h.getResponseText()),i>0){var n=h.getResponseJson().error;if(n&&n.status&&n.message){var r=(c=n.status.toLowerCase().replace("_","-"),Object.values(y).indexOf(c)>=0?c:y.UNKNOWN);o(new m(r,n.message))}else o(new m(y.UNKNOWN,"Server responded with status "+h.getStatus()))}else sn("Connection",'RPC "'+t+'" failed'),o(new m(y.UNAVAILABLE,"Connection failed."));break;default:cn('RPC "'+t+'" failed with unanticipated webchannel error '+h.getLastErrorCode()+": "+h.getLastError()+", giving up.")}}finally{sn("Connection",'RPC "'+t+'" completed.')}var c}));var f=c.__assign({},e);delete f.database;var a=JSON.stringify(f);sn("Connection","XHR sending: ",u+" "+a);var d={"Content-Type":"text/plain"};r.Jm(d,n),h.send(u,"POST",a,d,15)}))},t.prototype.nf=function(t,e,i){return this.tf(t,e,i)},t.prototype.Qa=function(t,e){var i=[this.Hm,"/","google.firestore.v1.Firestore","/",t,"/channel"],n=l.createWebChannelTransport(),r={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.Dn.projectId+"/databases/"+this.Dn.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Jm(r.initMessageHeaders,e),f.isMobileCordova()||f.isReactNative()||f.isElectron()||f.isIE()||f.isUWP()||f.isBrowserExtension()||(r.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");sn("Connection","Creating WebChannel: "+u+" "+r);var s=n.createWebChannel(u,r),o=!1,c=!1,h=new Po({qm:function(t){c?sn("Connection","Not sending because WebChannel is closed:",t):(o||(sn("Connection","Opening WebChannel transport."),s.open(),o=!0),sn("Connection","WebChannel sending:",t),s.send(t))},Bm:function(){return s.close()}}),d=function(t,e){s.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(l.WebChannel.EventType.OPEN,(function(){c||sn("Connection","WebChannel transport opened.")})),d(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,sn("Connection","WebChannel transport closed"),h.zm())})),d(l.WebChannel.EventType.ERROR,(function(t){c||(c=!0,sn("Connection","WebChannel transport errored:",t),h.zm(new m(y.UNAVAILABLE,"The operation could not be completed")))})),d(l.WebChannel.EventType.MESSAGE,(function(t){var e;if(!c){var i=t.data[0];hn(!!i,"Got a webchannel message without data.");var n=i,r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){sn("Connection","WebChannel received error:",r);var u=r.status,o=function(t){var e=ie[t];if(void 0!==e)return _e(e)}(u),f=r.message;void 0===o&&(o=y.INTERNAL,f="Unknown error status: "+u+" with message "+r.message),c=!0,h.zm(new m(o,f)),s.close()}else sn("Connection","WebChannel received:",i),h.Km(i)}})),setTimeout((function(){h.Wm()}),0),h},t.prototype.Ym=function(t){var e=xo[t];return hn(void 0!==e,"Unknown REST mapping for: "+t),this.Hm+"/v1/projects/"+this.Dn.projectId+"/databases/"+this.Dn.database+"/documents:"+e},t}(),Uo=function(){function t(){this.N="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.$d=function(t){return Promise.resolve(new Mo(t))},t.prototype.Zd=function(){return Co.ph()?new Co:new Ro},t.prototype.tv=function(t){return new en(t,{_e:!0})},t.prototype.Vr=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t.prototype.randomBytes=function(t){if(t<=0)return new Uint8Array;var e=new Uint8Array(t);return crypto.getRandomValues(e),e},t}();function jo(t){(function(t,e){var n;t.INTERNAL.registerComponent(new component.Component("firestore",(function(t){var i=t.getProvider("app").getImmediate();return e(i,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((hn((n=Do)&&"object"==typeof n,"shallowCopy() expects object parameter."),c.__assign({},n))))})(t,(function(t,e){return new ri(t,e,new Oo)})),t.registerVersion("@firebase/firestore","1.13.0")}nn.Fr(new Uo),jo(o),e.__PRIVATE_registerFirestore=jo}).call(this,n(150))},1001:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return E})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return R})),n.d(e,"__classPrivateFieldSet",(function(){return C}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function E(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},1002:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return dr})),n.d(e,"EventType",(function(){return vr})),n.d(e,"WebChannel",(function(){return yr})),n.d(e,"XhrIo",(function(){return mr})),n.d(e,"createWebChannelTransport",(function(){return pr}));var g,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=o||{},c=r;function h(a){return"string"==typeof a}function f(a){return"number"==typeof a}function l(a,b){a=a.split("."),b=b||c;for(var t=0;t<a.length;t++)if(null==(b=b[a[t]]))return null;return b}function d(){}function p(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function q(a){return"array"==p(a)}function v(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var m="closure_uid_"+(1e9*Math.random()>>>0),w=0;function I(a,b,t){return a.call.apply(a.bind,arguments)}function E(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function u(a,b,t){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?I:E).apply(null,arguments)}function _(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var T=Date.now||function(){return+new Date};function A(a,b){function t(){}t.prototype=b.prototype,a.N=b.prototype,a.prototype=new t,a.prototype.constructor=a,a.yb=function(t,e,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[e].apply(t,r)}}function N(){this.j=this.j,this.i=this.i}N.prototype.j=!1,N.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++w)},N.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(h(a))return h(b)&&1==b.length?a.indexOf(b,0):-1;for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},k=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n=h(a)?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};function O(a){return Array.prototype.concat.apply([],arguments)}function D(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function R(a){return/^[\s\xa0]*$/.test(a)}var C,P=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function x(a,b){return-1!=a.indexOf(b)}function L(a,b){return a<b?-1:a>b?1:0}t:{var M=c.navigator;if(M){var U=M.userAgent;if(U){C=U;break t}}C=""}function j(a,b,t){for(var e in a)b.call(t,a[e],e,a)}function F(a){var t,b={};for(t in a)b[t]=a[t];return b}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<V.length;r++)t=V[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function G(a){return G[" "](a),a}G[" "]=d;var z,a,H=x(C,"Opera"),K=x(C,"Trident")||x(C,"MSIE"),W=x(C,"Edge"),J=W||K,Y=x(C,"Gecko")&&!(x(C.toLowerCase(),"webkit")&&!x(C,"Edge"))&&!(x(C,"Trident")||x(C,"MSIE"))&&!x(C,"Edge"),X=x(C.toLowerCase(),"webkit")&&!x(C,"Edge");function Q(){var a=c.document;return a?a.documentMode:void 0}t:{var $="",Z=(a=C,Y?/rv:([^\);]+)(\)|;)/.exec(a):W?/Edge\/([\d\.]+)/.exec(a):K?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):X?/WebKit\/(\S+)/.exec(a):H?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Z&&($=Z?Z[1]:""),K){var tt=Q();if(null!=tt&&tt>parseFloat($)){z=String(tt);break t}}z=$}var et,nt={};function it(a){return function(a,b){var t=nt;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=P(String(z)).split("."),e=P(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var o=t[r]||"",c=e[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;b=L(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||L(0==o[2].length,0==c[2].length)||L(o[2],c[2]),o=o[3],c=c[3]}while(0==b)}return 0<=b}))}var ot=c.document;et=ot&&K?Q()||("CSS1Compat"==ot.compatMode?parseInt(z,10):5):void 0;var st=!K||9<=Number(et),at=K&&!it("9"),ut=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{c.addEventListener("test",d,b),c.removeEventListener("test",d,b)}catch(t){}return a}();function ct(a,b){this.type=a,this.a=this.target=b,this.Ia=!0}function ht(a,b){if(ct.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(Y){t:{try{G(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=h(a.pointerType)?a.pointerType:ft[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}ct.prototype.b=function(){this.Ia=!1},A(ht,ct);var ft={2:"touch",3:"pen",4:"mouse"};ht.prototype.b=function(){ht.N.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,at)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}};var lt="closure_listenable_"+(1e6*Math.random()|0),pt=0;function vt(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.da=n,this.key=++pt,this.X=this.Z=!1}function yt(a){a.X=!0,a.listener=null,a.proxy=null,a.src=null,a.da=null}function mt(a){this.src=a,this.a={},this.b=0}function gt(a,b){var t=b.type;if(t in a.a){var e,n=a.a[t],r=S(n,b);(e=0<=r)&&Array.prototype.splice.call(n,r,1),e&&(yt(b),0==a.a[t].length&&(delete a.a[t],a.b--))}}function wt(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.X&&r.listener==b&&r.capture==!!t&&r.da==e)return n}return-1}mt.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var o=wt(a,b,e,n);return-1<o?(b=a[o],t||(b.Z=!1)):((b=new vt(b,this.src,r,!!e,n)).Z=t,a.push(b)),b};var bt="closure_lm_"+(1e6*Math.random()|0),It={};function Et(a,b,t,e,n){if(e&&e.once)return function t(a,b,e,n,r){if(q(b)){for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);return null}return e=Dt(e),a&&a[lt]?a.Aa(b,e,y(n)?!!n.capture:!!n,r):_t(a,b,e,!0,n,r)}(a,b,t,e,n);if(q(b)){for(var r=0;r<b.length;r++)Et(a,b[r],t,e,n);return null}return t=Dt(t),a&&a[lt]?a.za(b,t,y(e)?!!e.capture:!!e,n):_t(a,b,t,!1,e,n)}function _t(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var o=y(n)?!!n.capture:!!n;if(o&&!st)return null;var c=kt(a);if(c||(a[bt]=c=new mt(a)),(t=c.add(b,t,e,o,r)).proxy)return t;if(e=function(){var a=St,b=st?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)ut||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(At(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}return t}function Tt(a){if(!f(a)&&a&&!a.X){var b=a.src;if(b&&b[lt])gt(b.c,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(At(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=kt(b))?(gt(t,a),0==t.b&&(t.src=null,b[bt]=null)):yt(a)}}}function At(a){return a in It?It[a]:It[a]="on"+a}function Nt(a,b){var t=a.listener,e=a.da||a.src;return a.Z&&Tt(a),t.call(e,b)}function St(a,b){return!!a.X||(st?Nt(a,new ht(b,this)):Nt(a,b=new ht(b||l("window.event"),this)))}function kt(a){return(a=a[bt])instanceof mt?a:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(a){return"function"==p(a)?a:(a[Ot]||(a[Ot]=function(b){return a.handleEvent(b)}),a[Ot])}function Rt(){N.call(this),this.c=new mt(this),this.J=this,this.B=null}function Ct(a,b,t,e){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.X&&o.capture==t){var c=o.listener,h=o.da||o.src;o.Z&&gt(a.c,o),n=!1!==c.call(h,e)&&n}}return n&&0!=e.Ia}A(Rt,N),Rt.prototype[lt]=!0,(g=Rt.prototype).addEventListener=function(a,b,t,e){Et(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){!function t(a,b,e,n,r){if(q(b))for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);else n=y(n)?!!n.capture:!!n,e=Dt(e),a&&a[lt]?(a=a.c,(b=String(b).toString())in a.a&&(-1<(e=wt(o=a.a[b],e,n,r))&&(yt(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete a.a[b],a.b--)))):a&&(a=kt(a))&&(b=a.a[b.toString()],a=-1,b&&(a=wt(b,e,n,r)),(e=-1<a?b[a]:null)&&Tt(e))}(this,a,b,t,e)},g.dispatchEvent=function(a){var b,t=this.B;if(t)for(b=[];t;t=t.B)b.push(t);t=this.J;var e=a.type||a;if(h(a))a=new ct(a,t);else if(a instanceof ct)a.target=a.target||t;else{var n=a;B(a=new ct(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var o=a.a=b[r];n=Ct(o,e,!0,a)&&n}if(n=Ct(o=a.a=t,e,!0,a)&&n,n=Ct(o,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=Ct(o=a.a=b[r],e,!1,a)&&n;return n},g.G=function(){if(Rt.N.G.call(this),this.c){var t,a=this.c;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)yt(e[n]);delete a.a[t],a.b--}}this.B=null},g.za=function(a,b,t,e){return this.c.add(String(a),b,!1,t,e)},g.Aa=function(a,b,t,e){return this.c.add(String(a),b,!0,t,e)};var Pt=c.JSON.stringify;function xt(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function Lt(){this.b=this.a=null}xt.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Mt,Ut=new xt((function(){return new Ft}),(function(a){a.reset()}));function jt(){var a=Gt,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Ft(){this.next=this.b=this.a=null}function Vt(a){c.setTimeout((function(){throw a}),0)}function qt(a,b){Mt||function(){var a=c.Promise.resolve(void 0);Mt=function(){a.then(zt)}}(),Bt||(Mt(),Bt=!0),Gt.add(a,b)}Lt.prototype.add=function(a,b){var t=Ut.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},Ft.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Ft.prototype.reset=function(){this.next=this.b=this.a=null};var Bt=!1,Gt=new Lt;function zt(){for(var a;a=jt();){try{a.a.call(a.b)}catch(t){Vt(t)}var b=Ut;b.f(a),100>b.b&&(b.b++,a.next=b.a,b.a=a)}Bt=!1}function Ht(a,b){Rt.call(this),this.b=a||1,this.a=b||c,this.f=u(this.gb,this),this.g=T()}function Kt(a){a.ba=!1,a.L&&(a.a.clearTimeout(a.L),a.L=null)}function Wt(a,b,t){if("function"==p(a))t&&(a=u(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=u(a.handleEvent,a)}return 2147483647<Number(b)?-1:c.setTimeout(a,b||0)}function Jt(a,b,t){N.call(this),this.f=null!=t?u(a,t):a,this.c=b,this.b=u(this.$a,this),this.a=[]}function Yt(a){a.U=Wt(a.b,a.c),a.f.apply(null,a.a)}function Xt(a){N.call(this),this.b=a,this.a={}}A(Ht,Rt),(g=Ht.prototype).ba=!1,g.L=null,g.gb=function(){if(this.ba){var a=T()-this.g;0<a&&a<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-a):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Kt(this),this.start()))}},g.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},g.G=function(){Ht.N.G.call(this),Kt(this),delete this.a},A(Jt,N),(g=Jt.prototype).ea=!1,g.U=null,g.Ta=function(a){this.a=arguments,this.U?this.ea=!0:Yt(this)},g.G=function(){Jt.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},g.$a=function(){this.U=null,this.ea&&(this.ea=!1,Yt(this))},A(Xt,N);var Qt=[];function $t(a,b,t,e){q(t)||(t&&(Qt[0]=t.toString()),t=Qt);for(var n=0;n<t.length;n++){var r=Et(b,t[n],e||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Zt(a){j(a.a,(function(b,t){this.a.hasOwnProperty(t)&&Tt(b)}),a),a.a={}}function te(){}Xt.prototype.G=function(){Xt.N.G.call(this),Zt(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ee=new Rt;function ne(a){ct.call(this,"serverreachability",a)}function re(a){ee.dispatchEvent(new ne(ee,a))}function ie(a){ct.call(this,"statevent",a)}function oe(a){ee.dispatchEvent(new ie(ee,a))}function se(a){ct.call(this,"timingevent",a)}function ae(a,b){if("function"!=p(a))throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){a()}),b)}A(ne,ct),A(ie,ct),A(se,ct);var ue={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},ce={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function he(){}function fe(a){var b;return(b=a.a)||(b=a.a={}),b}function le(){}he.prototype.a=null;var pe,de={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ve(){ct.call(this,"d")}function ye(){ct.call(this,"c")}function me(){}function ge(a,b,t){this.g=a,this.W=b,this.V=t||1,this.I=new Xt(this),this.O=we,a=J?125:void 0,this.P=new Ht(a),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}A(ve,ct),A(ye,ct),A(me,he),pe=new me;var we=45e3,be={},Ie={};function Ee(a,b,t){a.F=1,a.f=We(Ve(b)),a.l=t,a.H=!0,Te(a,null)}function _e(a,b,t,e){a.F=1,a.f=We(Ve(b)),a.l=null,a.H=t,Te(a,e)}function Te(a,b){a.v=T(),Se(a),a.D=Ve(a.f),Ke(a.D,"t",a.V),a.A=0,a.a=a.g.$(a.g.Y()?b:null),0<a.J&&(a.B=new Jt(u(a.Ja,a,a.a),a.J)),$t(a.I,a.a,"readystatechange",a.cb),b=a.h?F(a.h):{},a.l?(a.w||(a.w="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ca(a.D,a.w,a.l,b)):(a.w="GET",a.a.ca(a.D,a.w,null,b)),re(1)}function Ae(a,b,t){for(var e=!0;!a.m&&a.A<t.length;){var n=Ne(a,t);if(n==Ie){4==b&&(a.c=4,oe(14),e=!1);break}if(n==be){a.c=4,oe(15),e=!1;break}Ce(a,n)}4==b&&0==t.length&&(a.c=1,oe(16),e=!1),a.b=a.b&&e,e||(Re(a),De(a))}function Ne(a,b){var t=a.A,e=b.indexOf("\n",t);return-1==e?Ie:(t=Number(b.substring(t,e)),isNaN(t)?be:(e+=1)+t>b.length?Ie:(b=b.substr(e,t),a.A=e+t,b))}function Se(a){a.R=T()+a.O,ke(a,a.O)}function ke(a,b){if(null!=a.i)throw Error("WatchDog timer not null");a.i=ae(u(a.ab,a),b)}function Oe(a){a.i&&(c.clearTimeout(a.i),a.i=null)}function De(a){a.g.Ca()||a.m||a.g.na(a)}function Re(a){Oe(a);var b=a.B;b&&"function"==typeof b.la&&b.la(),a.B=null,Kt(a.P),Zt(a.I),a.a&&(b=a.a,a.a=null,b.abort(),b.la())}function Ce(a,b){try{a.g.Fa(a,b),re(4)}catch(t){}}function Pe(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(v(a)||h(a))k(a,b,void 0);else{if(a.K&&"function"==typeof a.K)var t=a.K();else if(a.C&&"function"==typeof a.C)t=void 0;else if(v(a)||h(a)){t=[];for(var e=a.length,n=0;n<e;n++)t.push(n)}else for(n in t=[],e=0,a)t[e++]=n;n=(e=function(a){if(a.C&&"function"==typeof a.C)return a.C();if(h(a))return a.split("");if(v(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}}function xe(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof xe)for(t=a.K(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Le(a,b){Ue(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Me(a))}function Me(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Ue(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Ue(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Ue(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=ge.prototype).setTimeout=function(a){this.O=a},g.cb=function(a){a=a.target;var b=this.B;b&&3==jn(a)?b.Ta():this.Ja(a)},g.Ja=function(a){try{if(a==this.a)t:{var b=jn(this.a),t=this.a.ya(),e=this.a.T();if(!(3>b||3==b&&!J&&!this.a.aa())){this.m||4!=b||7==t||re(8==t||0>=e?3:2),Oe(this);var n=this.a.T();this.o=n;var r=this.a.aa();if(this.b=200==n){if(this.S&&!this.s){e:{if(this.a){var o=Fn(this.a,"X-HTTP-Initial-Response");if(o&&!R(o)){var c=o;break e}}c=null}if(!c){this.b=!1,this.c=3,oe(12),Re(this),De(this);break t}this.s=!0,Ce(this,c)}this.H?(Ae(this,b,r),J&&this.b&&3==b&&($t(this.I,this.P,"tick",this.bb),this.P.start())):Ce(this,r),4==b&&Re(this),this.b&&!this.m&&(4==b?this.g.na(this):(this.b=!1,Se(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.c=3,oe(12)):(this.c=0,oe(13)),Re(this),De(this)}}}catch(t){}},g.bb=function(){if(this.a){var a=jn(this.a),b=this.a.aa();this.A<b.length&&(Oe(this),Ae(this,a,b),this.b&&4!=a&&Se(this))}},g.cancel=function(){this.m=!0,Re(this)},g.ab=function(){this.i=null;var a=T();0<=a-this.R?(2!=this.F&&(re(3),oe(17)),Re(this),this.c=2,De(this)):ke(this,this.R-a)},(g=xe.prototype).C=function(){Me(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.K=function(){return Me(this),this.a.concat()},g.get=function(a,b){return Ue(this.b,a)?this.b[a]:b},g.set=function(a,b){Ue(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var t=this.K(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var je=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(a,b){var t;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,a instanceof Fe?(this.h=void 0!==b?b:a.h,qe(this,a.f),this.j=a.j,Be(this,a.b),Ge(this,a.i),this.a=a.a,ze(this,un(a.c)),this.g=a.g):a&&(t=String(a).match(je))?(this.h=!!b,qe(this,t[1]||"",!0),this.j=Je(t[2]||""),Be(this,t[3]||"",!0),Ge(this,t[4]),this.a=Je(t[5]||"",!0),ze(this,t[6]||"",!0),this.g=Je(t[7]||"")):(this.h=!!b,this.c=new nn(null,this.h))}function Ve(a){return new Fe(a)}function qe(a,b,t){a.f=t?Je(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Be(a,b,t){a.b=t?Je(b,!0):b}function Ge(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.i=b}else a.i=null}function ze(a,b,t){b instanceof nn?(a.c=b,function(a,b){b&&!a.f&&(rn(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(on(this,e),an(this,n,t))}),a)),a.f=b}(a.c,a.h)):(t||(b=Ye(b,tn)),a.c=new nn(b,a.h))}function He(a,b,t){a.c.set(b,t)}function Ke(a,b,t){q(t)||(t=[String(t)]),an(a.c,b,t)}function We(a){return He(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),a}function Je(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ye(a,b,t){return h(a)?(a=encodeURI(a).replace(b,Xe),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xe(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Fe.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Ye(b,Qe,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.j)&&a.push(Ye(b,Qe,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.i)&&a.push(":",String(t))),(t=this.a)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(Ye(t,"/"==t.charAt(0)?Ze:$e,!0))),(t=this.c.toString())&&a.push("?",t),(t=this.g)&&a.push("#",Ye(t,en)),a.join("")},Fe.prototype.resolve=function(a){var b=Ve(this),t=!!a.f;t?qe(b,a.f):t=!!a.j,t?b.j=a.j:t=!!a.b,t?Be(b,a.b):t=null!=a.i;var e=a.a;if(t)Ge(b,a.i);else if(t=!!a.a){if("/"!=e.charAt(0))if(this.b&&!this.a)e="/"+e;else{var n=b.a.lastIndexOf("/");-1!=n&&(e=b.a.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(x(n,"./")||x(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],o=0;o<n.length;){var c=n[o++];"."==c?e&&o==n.length&&r.push(""):".."==c?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&o==n.length&&r.push("")):(r.push(c),e=!0)}e=r.join("/")}else e=n}return t?b.a=e:t=""!==a.c.toString(),t?ze(b,un(a.c)):t=!!a.g,t&&(b.g=a.g),b};var Qe=/[#\/\?@]/g,$e=/[#\?:]/g,Ze=/[#\?]/g,tn=/[#\?@]/g,en=/#/g;function nn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function rn(a){a.a||(a.a=new xe,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function on(a,b){rn(a),b=cn(a,b),Ue(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Le(a.a,b))}function sn(a,b){return rn(a),b=cn(a,b),Ue(a.a.b,b)}function an(a,b,t){on(a,b),0<t.length&&(a.c=null,a.a.set(cn(a,b),D(t)),a.b+=t.length)}function un(a){var b=new nn;return b.c=a.c,a.a&&(b.a=new xe(a.a),b.b=a.b),b}function cn(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function hn(a){this.a=a,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function fn(a){var b=a.a.F.a;if(null!=b)oe(4),b?(oe(10),Qn(a.a,a,!1)):(oe(11),Qn(a.a,a,!0));else{a.b=new ge(a,void 0,void 0),a.b.h=a.h,b=rr(b=a.a,b.Y()?a.f:null,a.i),oe(4),Ke(b,"TYPE","xmlhttp");var t=a.a.j,e=a.a.I;t&&e&&He(b,t,e),_e(a.b,b,!1,a.f)}}function ln(){this.a=this.b=null}function pn(){this.a=new xe}function dn(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[m]||(a[m]=++w)):b.charAt(0)+a}function vn(a,b){this.b=a,this.a=b}function yn(a){this.g=a||mn,c.PerformanceNavigationTiming?a=0<(a=c.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(c.ka&&c.ka.Da&&c.ka.Da()&&c.ka.Da().zb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new pn),this.b=null,this.c=[]}(g=nn.prototype).add=function(a,b){rn(this),this.c=null,a=cn(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},g.forEach=function(a,b){rn(this),this.a.forEach((function(t,e){k(t,(function(t){a.call(b,t,e,this)}),this)}),this)},g.K=function(){rn(this);for(var a=this.a.C(),b=this.a.K(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},g.C=function(a){rn(this);var b=[];if(h(a))sn(this,a)&&(b=O(b,this.a.get(cn(this,a))));else{a=this.a.C();for(var t=0;t<a.length;t++)b=O(b,a[t])}return b},g.set=function(a,b){return rn(this),this.c=null,sn(this,a=cn(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.C(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.K(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.C(e);for(var r=0;r<e.length;r++){var o=n;""!==e[r]&&(o+="="+encodeURIComponent(String(e[r]))),a.push(o)}}return this.c=a.join("&")},A((function(){}),(function(){})),(g=hn.prototype).M=null,g.$=function(a){return this.a.$(a)},g.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},g.Ca=function(){return!1},g.Fa=function(a,b){if(this.c=a.o,0==this.M){if(!this.a.o&&(a=a.a)){var t=Fn(a,"X-Client-Wire-Protocol");this.l=t||null,this.a.j&&(a=Fn(a,"X-HTTP-Session-Id"))&&(this.a.I=a)}if(b){try{var e=this.a.ja.a.parse(b)}catch(t){return(b=this.a).m=this.c,void er(b,2)}this.f=e[0]}else(b=this.a).m=this.c,er(b,2)}else 1==this.M&&(this.g?oe(6):"11111"==b?(oe(5),this.g=!0,(!K||10<=Number(et))&&(this.c=200,this.b.cancel(),oe(11),Qn(this.a,this,!0))):(oe(7),this.g=!1))},g.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,fn(this)):1==this.M&&(this.g?(oe(11),Qn(this.a,this,!0)):(oe(10),Qn(this.a,this,!1)));else{0==this.M?oe(8):1==this.M&&oe(9);var a=this.a;a.m=this.c,er(a,2)}},g.Y=function(){return this.a.Y()},g.ma=function(){return this.a.ma()},pn.prototype.add=function(a){this.a.set(dn(a),a)},pn.prototype.C=function(){return this.a.C()};var mn=10;function gn(a,b){!a.a&&(x(b,"spdy")||x(b,"quic")||x(b,"h2"))&&(a.f=a.g,a.a=new pn,a.b&&(dd(a,a.b),a.b=null))}function wn(a){return!!a.b||!!a.a&&a.a.a.c>=a.f}function bn(a){return a.b?1:a.a?a.a.a.c:0}function In(a,b){return a.b?a=a.b==b:a.a?(b=dn(b),a=Ue(a.a.a.b,b)):a=!1,a}function dd(a,b){a.a?a.a.add(b):a.b=b}function En(a,b){var t;a.b&&a.b==b?a.b=null:((t=a.a)&&(t=dn(b),t=Ue(a.a.a.b,t)),t&&Le(a.a.a,dn(b)))}function _n(a){if(null!=a.b)return a.c.concat(a.b.j);if(null!=a.a&&0!=a.a.a.c){var b=a.c;return k(a.a.C(),(function(t){b=b.concat(t.j)})),b}return D(a.c)}function Tn(){}function An(){this.a=new Tn}function Nn(a,b,t){var e=t||"";try{Pe(a,(function(t,n){var r=t;y(t)&&(r=Pt(t)),b.push(e+n+"="+encodeURIComponent(r))}))}catch(t){throw b.push(e+"type="+encodeURIComponent("_badmap")),t}}function Sn(a,b,t,e,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(e)}catch(t){}}yn.prototype.cancel=function(){this.c=_n(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(k(this.a.C(),(function(a){a.cancel()})),function(a){a.b={},a.a.length=0,a.c=0}(this.a.a))},Tn.prototype.stringify=function(a){return c.JSON.stringify(a,void 0)},Tn.prototype.parse=function(a){return c.JSON.parse(a,void 0)};var kn=c.JSON.parse;function On(a){Rt.call(this),this.headers=new xe,this.H=a||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Dn,this.D=this.F=!1}A(On,Rt);var Dn="",Rn=/^https?$/i,Cn=["POST","PUT"];function Pn(a){return"content-type"==a.toLowerCase()}function xn(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,Ln(a),Un(a)}function Ln(a){a.v||(a.v=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Mn(a){if(a.b&&void 0!==o&&(!a.s[1]||4!=jn(a)||2!=a.T()))if(a.l&&4==jn(a))Wt(a.Ea,0,a);else if(a.dispatchEvent("readystatechange"),4==jn(a)){a.b=!1;try{var t,b=a.T();t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.A).match(je)[1]||null;if(!r&&c.self&&c.self.location){var h=c.self.location.protocol;r=h.substr(0,h.length-1)}n=!Rn.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.h=6;try{var f=2<jn(a)?a.a.statusText:""}catch(t){f=""}a.f=f+" ["+a.T()+"]",Ln(a)}}finally{Un(a)}}}function Un(a,b){if(a.a){td(a);var t=a.a,e=a.s[0]?d:null;a.a=null,a.s=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){}}}function td(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(c.clearTimeout(a.m),a.m=null)}function jn(a){return a.a?a.a.readyState:0}function Fn(a,b){return a.a?a.a.getResponseHeader(b):null}function Vn(a,b,t){t:{for(e in t){var e=!1;break t}e=!0}if(e)return a;if(t=function(a){var b="";return j(a,(function(t,e){b+=e,b+=":",b+=t,b+="\r\n"})),b}(t),h(a)){if(b=encodeURIComponent(String(b)),b+=t=null!=t?"="+encodeURIComponent(String(t)):""){if(0>(t=a.indexOf("#"))&&(t=a.length),0>(e=a.indexOf("?"))||e>t){e=t;var n=""}else n=a.substring(e+1,t);t=(a=[a.substr(0,e),n,a.substr(t)])[1],a[1]=b?t?t+"&"+b:b:t,a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a}return He(a,b,t),a}function qn(a){this.f=[],this.F=new ln,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!l("internalChannelParams.failFast",a),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=l("internalChannelParams.baseRetryDelayMs",a)||5e3,this.Ra=l("internalChannelParams.retryDelaySeedMs",a)||1e4,this.Pa=l("internalChannelParams.forwardChannelMaxRetries",a)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",a)||2e4,this.Ka=a&&a.Ab||void 0,this.D=void 0,this.R=a&&a.supportsCrossDomainXhr||!1,this.H="",this.b=new yn(a&&a.concurrentRequestLimit),this.ja=new An,this.o=!a||void 0===a.backgroundChannelTest||a.backgroundChannelTest,(this.W=a&&a.fastHandshake||!1)&&!this.o&&(this.o=!0),a&&a.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Bn(a){if(Gn(a),3==a.u){var b=a.P++,t=Ve(a.B);He(t,"SID",a.H),He(t,"RID",b),He(t,"TYPE","terminate"),Wn(a,t),(b=new ge(a,b,void 0)).F=2,b.f=We(Ve(t)),t=!1,c.navigator&&c.navigator.sendBeacon&&(t=c.navigator.sendBeacon(b.f.toString(),"")),!t&&c.Image&&((new Image).src=b.f,t=!0),t||(b.a=b.g.$(null),b.a.ca(b.f)),b.v=T(),Se(b)}nr(a)}function Gn(a){a.w&&(a.w.abort(),a.w=null),a.a&&(a.a.cancel(),a.a=null),a.l&&(c.clearTimeout(a.l),a.l=null),$n(a),a.b.cancel(),a.h&&(f(a.h)&&c.clearTimeout(a.h),a.h=null)}function zn(a,b){a.f.push(new vn(a.Qa++,b)),3==a.u&&Hn(a)}function Hn(a){wn(a.b)||a.h||(a.h=!0,qt(a.Ha,a),a.A=0)}function Kn(a,b){var t;t=b?b.W:a.P++;var e=Ve(a.B);He(e,"SID",a.H),He(e,"RID",t),He(e,"AID",a.O),Wn(a,e),a.g&&a.i&&Vn(e,a.g,a.i),t=new ge(a,t,a.A+1),null===a.g&&(t.h=a.i),b&&(a.f=b.j.concat(a.f)),b=Jn(a,t,1e3),t.setTimeout(Math.round(.5*a.qa)+Math.round(.5*a.qa*Math.random())),dd(a.b,t),Ee(t,e,b)}function Wn(a,b){a.c&&Pe({},(function(t,e){He(b,e,t)}))}function Jn(a,b,t){t=Math.min(a.f.length,t);var e=a.c?u(a.c.Sa,a.c,a):null;t:for(var n=a.f,r=-1;;){var o=["count="+t];-1==r?0<t?(r=n[0].b,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,h=0;h<t;h++){var f=n[h].b,l=n[h].a;if(0>(f-=r))r=Math.max(0,n[h].b-100),c=!1;else try{Nn(l,o,"req"+f+"_")}catch(t){e&&e(l)}}if(c){e=o.join("&");break t}}return a=a.f.splice(0,t),b.j=a,e}function Yn(a){a.a||a.l||(a.S=1,qt(a.Ga,a),a.v=0)}function Xn(a){return!(a.a||a.l||3<=a.v)&&(a.S++,a.l=ae(u(a.Ga,a),Zn(a,a.v)),a.v++,!0)}function Qn(a,b,t){var e=b.l;e&&gn(a.b,e),a.ia=a.oa&&t,a.m=b.c,a.B=rr(a,null,a.ha),Hn(a)}function $n(a){null!=a.s&&(c.clearTimeout(a.s),a.s=null)}function Zn(a,b){var t=a.Na+Math.floor(Math.random()*a.Ra);return a.ma()||(t*=2),t*b}function er(a,b){if(2==b){var t=null;a.c&&(t=null);var e=u(a.eb,a);t||(t=new Fe("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||qe(t,"https"),We(t)),function(a,b){var t=new te;if(c.Image){var e=new Image;e.onload=_(Sn,t,e,"TestLoadImage: loaded",!0,b),e.onerror=_(Sn,t,e,"TestLoadImage: error",!1,b),e.onabort=_(Sn,t,e,"TestLoadImage: abort",!1,b),e.ontimeout=_(Sn,t,e,"TestLoadImage: timeout",!1,b),c.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=a}else b(!1)}(t.toString(),e)}else oe(2);a.u=0,a.c&&a.c.ta(b),nr(a),Gn(a)}function nr(a){a.u=0,a.m=-1,a.c&&(0==_n(a.b).length&&0==a.f.length||(a.b.c.length=0,D(a.f),a.f.length=0),a.c.sa())}function rr(a,b,t){var e=function(a){return a instanceof Fe?Ve(a):new Fe(a,void 0)}(t);if(""!=e.b)b&&Be(e,b+"."+e.b),Ge(e,e.i);else{var n,r=c.location;n=b?b+"."+r.hostname:r.hostname,e=function(a,b,t,e){var n=new Fe(null,void 0);return a&&qe(n,a),b&&Be(n,b),t&&Ge(n,t),e&&(n.a=e),n}(r.protocol,n,+r.port,t)}return a.V&&j(a.V,(function(t,n){He(e,n,t)})),b=a.j,t=a.I,b&&t&&He(e,b,t),He(e,"VER",a.wa),Wn(a,e),e}function ir(){}function or(){if(K&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function sr(a,b){Rt.call(this),this.a=new qn(b),this.g=a,this.m=b&&b.fb?b.fb:function(a){for(var b=arguments[0],t=1;t<arguments.length;t++){var e,n=arguments[t];if(0==n.lastIndexOf("/",0))b=n;else(e=""==b)||(e=0<=(e=b.length-1)&&b.indexOf("/",e)==e),b+=e?n:"/"+n}return b}(this.g,"test"),this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.i=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.xa&&(a?a["X-WebChannel-Client-Profile"]=b.xa:a={"X-WebChannel-Client-Profile":b.xa}),this.a.J=a,(a=b&&b.httpHeadersOverwriteParam)&&!R(a)&&(this.a.g=a),this.l=b&&b.supportsCrossDomainXhr||!1,this.h=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!R(b)&&(this.a.j=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new cr(this)}function ar(a){ve.call(this);var b=a.__sm__;if(b){t:{for(var t in b){a=t;break t}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function ur(){ye.call(this),this.status=1}function cr(a){this.a=a}(g=On.prototype).ca=function(a,b,t,e){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+a);b=b?b.toUpperCase():"GET",this.A=a,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?fe(this.H):fe(pe),this.a.onreadystatechange=u(this.Ea,this);try{this.w=!0,this.a.open(b,String(a),!0),this.w=!1}catch(t){return void xn(this,t)}a=t||"";var n=new xe(this.headers);e&&Pe(e,(function(t,e){n.set(e,t)})),e=function(a){t:{for(var b=Pn,t=a.length,e=h(a)?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:h(a)?a.charAt(b):a[b]}(n.K()),t=c.FormData&&a instanceof c.FormData,!(0<=S(Cn,b))||e||t||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{td(this),0<this.o&&((this.D=function(a){return K&&it(9)&&f(a.timeout)&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=u(this.Ba,this)):this.m=Wt(this.Ba,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(t){xn(this,t)}},g.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Un(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Un(this,!0)),On.N.G.call(this)},g.Ea=function(){this.j||(this.w||this.l||this.g?Mn(this):this.Za())},g.Za=function(){Mn(this)},g.T=function(){try{return 2<jn(this)?this.a.status:-1}catch(t){return-1}},g.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Ua=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),kn(b)}},g.ya=function(){return this.h},g.Xa=function(){return h(this.f)?this.f:String(this.f)},(g=qn.prototype).wa=8,g.u=1,g.Ca=function(){return 0==this.u},g.Ha=function(a){if(this.h)if(this.h=null,1==this.u){if(!a){this.P=Math.floor(1e5*Math.random());var t,b=new ge(this,a=this.P++,void 0),e=this.i;if(this.J&&(e?B(e=F(e),this.J):e=this.J),null===this.g&&(b.h=e),this.W)t:{for(var n=t=0;n<this.f.length;n++){var r=this.f[n];if(void 0===(r="__data__"in r.a&&h(r=r.a.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break t}if(4096===t||n===this.f.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Jn(this,b,t),He(n=Ve(this.B),"RID",a),He(n,"CVER",22),this.o&&this.j&&He(n,"X-HTTP-Session-Id",this.j),Wn(this,n),this.g&&e&&Vn(n,this.g,e),dd(this.b,b),this.W?(He(n,"$req",t),He(n,"SID","null"),b.S=!0,Ee(b,n,null)):Ee(b,n,t),this.u=2}}else 3==this.u&&(a?Kn(this,a):0==this.f.length||wn(this.b)||Kn(this))},g.Ga=function(){this.l=null,this.a=new ge(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var a=Ve(this.pa);He(a,"RID","rpc"),He(a,"SID",this.H),He(a,"CI",this.ia?"0":"1"),He(a,"AID",this.O),Wn(this,a),He(a,"TYPE","xmlhttp"),this.g&&this.i&&Vn(a,this.g,this.i),this.D&&this.a.setTimeout(this.D),_e(this.a,a,!0,this.ga)},g.Fa=function(a,b){if(0!=this.u&&(this.a==a||In(this.b,a)))if(this.m=a.o,!a.s&&In(this.b,a)&&3==this.u){try{var t=this.ja.a.parse(b)}catch(e){t=null}if(q(t)&&3==t.length){if(0==(b=t)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<a.v))break t;$n(this),this.a.cancel(),this.a=null}Xn(this),oe(18)}}else this.ra=b[1],0<this.ra-this.O&&37500>b[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ae(u(this.Ya,this),6e3));if(1>=bn(this.b)&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else er(this,11)}else if((a.s||this.a==a)&&$n(this),!R(b))for(b=t=this.ja.a.parse(b),t=0;t<b.length;t++){var e=b[t];if(this.O=e[0],e=e[1],2==this.u)if("c"==e[0]){this.H=e[1],this.ga=e[2];var n=e[3];null!=n&&(this.wa=n),null!=(e=e[5])&&f(e)&&0<e&&(this.D=1.5*e),this.o&&(e=a.a)&&((n=Fn(e,"X-Client-Wire-Protocol"))&&gn(this.b,n),this.j&&(e=Fn(e,"X-HTTP-Session-Id")))&&(this.I=e,He(this.B,this.j,e)),this.u=3,this.c&&this.c.va(),e=a,this.pa=rr(this,this.Y()?this.ga:null,this.ha),e.s?(En(this.b,e),(n=this.D)&&e.setTimeout(n),e.i&&(Oe(e),Se(e)),this.a=e):Yn(this),0<this.f.length&&Hn(this)}else"stop"!=e[0]&&"close"!=e[0]||er(this,7);else 3==this.u&&("stop"==e[0]||"close"==e[0]?"stop"==e[0]?er(this,7):Bn(this):"noop"!=e[0]&&this.c&&this.c.ua(e),this.v=0)}},g.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Xn(this),oe(19))},g.na=function(a){var b=null;if(this.a==a){$n(this),this.a=null;var t=2}else{if(!In(this.b,a))return;b=a.j,En(this.b,a),t=1}if(this.m=a.o,0!=this.u)if(a.b)1==t?(b=T()-a.v,ee.dispatchEvent(new se(ee,a.l?a.l.length:0,b,this.A)),Hn(this)):Yn(this);else{var e=a.c;if(3==e||0==e&&0<this.m||!(1==t&&function(a,b){return!(bn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.f=b.j.concat(a.f),!0):!(1==a.u||2==a.u||a.A>=(a.Oa?0:a.Pa))&&(a.h=ae(u(a.Ha,a,b),Zn(a,a.A)),a.A++,!0))}(this,a)||2==t&&Xn(this)))switch(b&&0<b.length&&(a=this.b,a.c=a.c.concat(b)),e){case 1:er(this,5);break;case 4:er(this,10);break;case 3:er(this,6);break;default:er(this,2)}}},g.eb=function(a){oe(a?2:1)},g.$=function(a){if(a&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(a=new On(this.Ka)).F=this.R,a},g.ma=function(){return!!this.c&&!0},g.Y=function(){return this.R},(g=ir.prototype).va=function(){},g.ua=function(){},g.ta=function(){},g.sa=function(){},g.Sa=function(){},or.prototype.a=function(a,b){return new sr(a,b)},A(sr,Rt),(g=sr.prototype).addEventListener=function(a,b,t,e){sr.N.addEventListener.call(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){sr.N.removeEventListener.call(this,a,b,t,e)},g.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var a=this.a,b=this.m,t=this.g,e=this.b||void 0;oe(0),a.ha=t,a.V=e||{},a.o&&(a.F.b=[],a.F.a=!1),a.w=new hn(a),null===a.g&&(a.w.h=a.i),t=b,a.g&&a.i&&(t=Vn(b,a.g,a.i)),(a=a.w).i=t,b=rr(a.a,null,a.i),oe(3),null!=(t=a.a.F.b)?(a.f=t[0],a.M=1,fn(a)):(Ke(b,"MODE","init"),!a.a.o&&a.a.j&&Ke(b,"X-HTTP-Session-Id",a.a.j),a.b=new ge(a,void 0,void 0),a.b.h=a.h,_e(a.b,b,!1,null),a.M=0)},g.close=function(){Bn(this.a)},g.Wa=function(a){if(h(a)){var b={};b.__data__=a,zn(this.a,b)}else this.h?((b={}).__data__=Pt(a),zn(this.a,b)):zn(this.a,a)},g.G=function(){this.a.c=null,delete this.f,Bn(this.a),delete this.a,sr.N.G.call(this)},A(ar,ve),A(ur,ye),A(cr,ir),cr.prototype.va=function(){this.a.dispatchEvent("a")},cr.prototype.ua=function(a){this.a.dispatchEvent(new ar(a))},cr.prototype.ta=function(a){this.a.dispatchEvent(new ur(a))},cr.prototype.sa=function(){this.a.dispatchEvent("b")};var fr=_((function(a,b){function t(){}t.prototype=a.prototype;var e=new t;return a.apply(e,Array.prototype.slice.call(arguments,1)),e}),or);or.prototype.createWebChannel=or.prototype.a,sr.prototype.send=sr.prototype.Wa,sr.prototype.open=sr.prototype.Va,sr.prototype.close=sr.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",le.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Rt.prototype.listen=Rt.prototype.za,On.prototype.listenOnce=On.prototype.Aa,On.prototype.getLastError=On.prototype.Xa,On.prototype.getLastErrorCode=On.prototype.ya,On.prototype.getStatus=On.prototype.T,On.prototype.getResponseJson=On.prototype.Ua,On.prototype.getResponseText=On.prototype.aa,On.prototype.send=On.prototype.ca;var lr={createWebChannelTransport:fr,ErrorCode:ue,EventType:ce,WebChannel:le,XhrIo:On},pr=lr.createWebChannelTransport,dr=lr.ErrorCode,vr=lr.EventType,yr=lr.WebChannel,mr=lr.XhrIo;e.default=lr}.call(this,n(20))},1003:function(t,e,n){"use strict";(function(t){var e=n(505),r=n.n(e);(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,t){a!=Array.prototype&&a!=Object.prototype&&(a[b]=t.value)};var o=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,a];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}return globalThis}(this);function c(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function h(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:c(a)}}!function(a,b){if(b){var t=o;a=a.split(".");for(var e=0;e<a.length-1;e++){var r=a[e];r in t||(t[r]={}),t=t[r]}(b=b(e=t[a=a[a.length-1]]))!=e&&null!=b&&n(t,a,{configurable:!0,writable:!0,value:b})}}("Promise",(function(a){function b(g){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{g(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function e(g){return g instanceof b?g:new b((function(t){t(g)}))}if(a)return a;t.prototype.b=function(g){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(g)};var n=o.setTimeout;t.prototype.c=function(g){n(g,0)},t.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var t=0;t<g.length;++t){var e=g[t];g[t]=null;try{e()}catch(t){this.f(t)}}}this.a=null},t.prototype.f=function(g){this.c((function(){throw g}))},b.prototype.f=function(){function g(p){return function(n){e||(e=!0,p.call(t,n))}}var t=this,e=!1;return{resolve:g(this.m),reject:g(this.g)}},b.prototype.m=function(g){if(g===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.s(g);else{t:switch(typeof g){case"object":var t=null!=g;break t;case"function":t=!0;break t;default:t=!1}t?this.u(g):this.h(g)}},b.prototype.u=function(g){var t=void 0;try{t=g.then}catch(t){return void this.g(t)}"function"==typeof t?this.w(t,g):this.h(g)},b.prototype.g=function(g){this.i(2,g)},b.prototype.h=function(g){this.i(1,g)},b.prototype.i=function(g,t){if(0!=this.b)throw Error("Cannot settle("+g+", "+t+"): Promise already settled in state"+this.b);this.b=g,this.c=t,this.l()},b.prototype.l=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)r.b(this.a[g]);this.a=null}};var r=new t;return b.prototype.s=function(g){var t=this.f();g.Oa(t.resolve,t.reject)},b.prototype.w=function(g,t){var e=this.f();try{g.call(t,e.resolve,e.reject)}catch(t){e.reject(t)}},b.prototype.then=function(g,t){function e(t,e){return"function"==typeof t?function(e){try{p(t(e))}catch(t){n(t)}}:e}var p,n,r=new b((function(t,e){p=t,n=e}));return this.Oa(e(g,p),e(t,n)),r},b.prototype.catch=function(g){return this.then(void 0,g)},b.prototype.Oa=function(g,t){function e(){switch(p.b){case 1:g(p.c);break;case 2:t(p.c);break;default:throw Error("Unexpected state: "+p.b)}}var p=this;null==this.a?r.b(e):this.a.push(e)},b.resolve=e,b.reject=function(g){return new b((function(t,e){e(g)}))},b.race=function(g){return new b((function(t,n){for(var p=h(g),r=p.next();!r.done;r=p.next())e(r.value).Oa(t,n)}))},b.all=function(g){var t=h(g),n=t.next();return n.done?e([]):new b((function(p,r){function o(t){return function(e){c[t]=e,0==--h&&p(c)}}var c=[],h=0;do{c.push(void 0),h++,e(n.value).Oa(o(c.length-1),r),n=t.next()}while(!n.done)}))},b}));var f=f||{},l=this||self,d=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function m(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function w(a){var b=m(a);return"array"==b||"object"==b&&"number"==typeof a.length}function I(a){return"function"==m(a)}function q(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function E(a){return Object.prototype.hasOwnProperty.call(a,_)&&a[_]||(a[_]=++T)}var _="closure_uid_"+(1e9*Math.random()>>>0),T=0;function A(a,b,t){return a.call.apply(a.bind,arguments)}function N(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function S(a,b,t){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?A:N).apply(null,arguments)}function k(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var O=Date.now||function(){return+new Date};function D(a,b){function t(){}t.prototype=b.prototype,a.Za=b.prototype,a.prototype=new t,a.prototype.constructor=a}function u(a,b,t){this.code=P+a,this.message=b||x[a]||"",this.a=t||null}function R(a){var b=a&&a.code;return b?new u(b.substring(P.length),a.message,a.serverResponse):null}D(u,Error),u.prototype.v=function(){var a={code:this.code,message:this.message};return this.a&&(a.serverResponse=this.a),a},u.prototype.toJSON=function(){return this.v()};var C,P="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},L={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function M(a){for(var b in L)if(L[b].id===a)return{firebaseEndpoint:(a=L[b]).Ra,secureTokenEndpoint:a.Xa,identityPlatformEndpoint:a.Ua};return null}function U(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(t){return!1}}function j(a){if(Error.captureStackTrace)Error.captureStackTrace(this,j);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function F(a,b){for(var t="",e=(a=a.split("%s")).length-1,n=0;n<e;n++)t+=a[n]+(n<b.length?b[n]:"%s");j.call(this,t+a[e])}function V(a,b){throw new F("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function B(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function G(a,b){a.f(b),100>a.b&&(a.b++,b.next=a.a,a.a=b)}function z(){this.b=this.a=null}C=M("__EID__")?"__EID__":void 0,D(j,Error),j.prototype.name="CustomError",D(F,j),F.prototype.name="AssertionError",B.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var H=new B((function(){return new W}),(function(a){a.reset()}));function K(){var a=Ae,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function W(){this.next=this.b=this.a=null}z.prototype.add=function(a,b){var t=H.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},W.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},W.prototype.reset=function(){this.next=this.b=this.a=null};var J=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},Y=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n="string"==typeof a?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};var X=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=[],n=0,r="string"==typeof a?a.split(""):a,g=0;g<t;g++)if(g in r){var o=r[g];b.call(void 0,o,g,a)&&(e[n++]=o)}return e},Q=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=Array(t),n="string"==typeof a?a.split(""):a,r=0;r<t;r++)r in n&&(e[r]=b.call(void 0,n[r],r,a));return e},$=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a))return!0;return!1};function Z(a,b){return 0<=J(a,b)}function tt(a,b){var t;return(t=0<=(b=J(a,b)))&&Array.prototype.splice.call(a,b,1),t}function et(a,b){!function(a,b){for(var t="string"==typeof a?a.split(""):a,e=a.length-1;0<=e;--e)e in t&&b.call(void 0,t[e],e,a)}(a,(function(t,e){b.call(void 0,t,e,a)&&1==Array.prototype.splice.call(a,e,1).length&&0}))}function nt(a){return Array.prototype.concat.apply([],arguments)}function it(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}var ot,st=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},at=/&/g,ut=/</g,ct=/>/g,ht=/"/g,ft=/'/g,lt=/\x00/g,pt=/[\x00&<>"']/;function vt(a,b){return-1!=a.indexOf(b)}function yt(a,b){return a<b?-1:a>b?1:0}t:{var mt=l.navigator;if(mt){var gt=mt.userAgent;if(gt){ot=gt;break t}}ot=""}function wt(a){return vt(ot,a)}function bt(a,b){for(var t in a)b.call(void 0,a[t],t,a)}function It(a){for(var b in a)return!1;return!0}function Et(a){var t,b={};for(t in a)b[t]=a[t];return b}var _t="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tt(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<_t.length;r++)t=_t[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function At(a,b){t:{try{var t=a&&a.ownerDocument,e=t&&(t.defaultView||t.parentWindow);if((e=e||l).Element&&e.Location){var n=e;break t}}catch(t){}n=null}if(n&&void 0!==n[b]&&(!a||!(a instanceof n[b])&&(a instanceof n.Location||a instanceof n.Element))){if(q(a))try{var r=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(t){r="<object could not be stringified>"}else r=void 0===a?"undefined":null===a?"null":typeof a;V("Argument is not a %s (or a non-Element, non-Location mock); got: %s",b,r)}}function Nt(a,b){this.a=a===Ot&&b||"",this.b=kt}function St(a){return a instanceof Nt&&a.constructor===Nt&&a.b===kt?a.a:(V("expected object of type Const, got '"+a+"'"),"type_error:Const")}Nt.prototype.ra=!0,Nt.prototype.qa=function(){return this.a},Nt.prototype.toString=function(){return"Const{"+this.a+"}"};var kt={},Ot={},Dt=new Nt(Ot,"");function Rt(a,b){this.a=a===Ut&&b||"",this.b=Mt}function Ct(a){return a instanceof Rt&&a.constructor===Rt&&a.b===Mt?a.a:(V("expected object of type TrustedResourceUrl, got '"+a+"' of type "+m(a)),"type_error:TrustedResourceUrl")}function Pt(a,b){var t=St(a);if(!Lt.test(t))throw Error("Invalid TrustedResourceUrl format: "+t);return a=t.replace(xt,(function(e,n){if(!Object.prototype.hasOwnProperty.call(b,n))throw Error('Found marker, "'+n+'", in format string, "'+t+'", but no valid label mapping found in args: '+JSON.stringify(b));return(e=b[n])instanceof Nt?St(e):encodeURIComponent(String(e))})),new Rt(Ut,a)}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var xt=/%{(\w+)}/g,Lt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Mt={},Ut={};function jt(a,b){this.a=a===Gt&&b||"",this.b=Bt}function Ft(a){return a instanceof jt&&a.constructor===jt&&a.b===Bt?a.a:(V("expected object of type SafeUrl, got '"+a+"' of type "+m(a)),"type_error:SafeUrl")}jt.prototype.ra=!0,jt.prototype.qa=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Vt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function qt(a){return a instanceof jt?a:(a="object"==typeof a&&a.ra?a.qa():String(a),Vt.test(a)||(a="about:invalid#zClosurez"),new jt(Gt,a))}var Bt={},Gt={};function zt(){this.a="",this.b=Kt}function Ht(a){return a instanceof zt&&a.constructor===zt&&a.b===Kt?a.a:(V("expected object of type SafeHtml, got '"+a+"' of type "+m(a)),"type_error:SafeHtml")}zt.prototype.ra=!0,zt.prototype.qa=function(){return this.a.toString()},zt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Kt={};function Wt(a){var b=new zt;return b.a=a,b}Wt("<!DOCTYPE html>");var Jt=Wt("");function Yt(a,b){for(var t=a.split("%s"),e="",n=Array.prototype.slice.call(arguments,1);n.length&&1<t.length;)e+=t.shift()+n.shift();return e+t.join("%s")}function Xt(a){return pt.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(at,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(ut,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(ct,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ht,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(ft,"&#39;")),-1!=a.indexOf("\0")&&(a=a.replace(lt,"&#0;"))),a}function Qt(a){return Qt[" "](a),a}Wt("<br>"),Qt[" "]=y;var $t,a,Zt=wt("Opera"),te=wt("Trident")||wt("MSIE"),ee=wt("Edge"),ne=ee||te,re=wt("Gecko")&&!(vt(ot.toLowerCase(),"webkit")&&!wt("Edge"))&&!(wt("Trident")||wt("MSIE"))&&!wt("Edge"),ie=vt(ot.toLowerCase(),"webkit")&&!wt("Edge");function oe(){var a=l.document;return a?a.documentMode:void 0}t:{var se="",ae=(a=ot,re?/rv:([^\);]+)(\)|;)/.exec(a):ee?/Edge\/([\d\.]+)/.exec(a):te?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):ie?/WebKit\/(\S+)/.exec(a):Zt?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(ae&&(se=ae?ae[1]:""),te){var ue=oe();if(null!=ue&&ue>parseFloat(se)){$t=String(ue);break t}}$t=se}var ce,he={};function fe(a){return function(a,b){var t=he;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=st(String($t)).split("."),e=st(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var g=t[r]||"",o=e[r]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==g[0].length&&0==o[0].length)break;b=yt(0==g[1].length?0:parseInt(g[1],10),0==o[1].length?0:parseInt(o[1],10))||yt(0==g[2].length,0==o[2].length)||yt(g[2],o[2]),g=g[3],o=o[3]}while(0==b)}return 0<=b}))}ce=l.document&&te?oe():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(a){}var le=!te||9<=Number(ce);function pe(a){var b=document;return"string"==typeof a?b.getElementById(a):a}function de(a,b){bt(b,(function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?a.style.cssText=t:"class"==e?a.className=t:"for"==e?a.htmlFor=t:me.hasOwnProperty(e)?a.setAttribute(me[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,t):a[e]=t}))}var ve,ye,me={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(a,b,t){function e(g){g&&b.appendChild("string"==typeof g?a.createTextNode(g):g)}for(var n=2;n<t.length;n++){var r=t[n];!w(r)||q(r)&&0<r.nodeType?e(r):Y(be(r)?it(r):r,e)}}function we(a,b){return b=String(b),"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase()),a.createElement(b)}function be(a){if(a&&"number"==typeof a.length){if(q(a))return"function"==typeof a.item||"string"==typeof a.item;if(I(a))return"function"==typeof a.item}return!1}function Ie(a){l.setTimeout((function(){throw a}),0)}function Ee(){var a=l.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!wt("Presto")&&(a=function(){var t=we(document,"IFRAME");t.style.display="none",function(a){var b=new Rt(Ut,St(Dt));At(a,"HTMLIFrameElement"),a.src=Ct(b).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ht(Jt)),t.close();var g="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=S((function(t){"*"!=n&&t.origin!=n||t.data!=g||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(g,n)}}}),void 0!==a&&!wt("Trident")&&!wt("MSIE")){var b=new a,t={},e=t;return b.port1.onmessage=function(){if(void 0!==t.next){var e=(t=t.next).Db;t.Db=null,e()}},function(t){e.next={Db:t},e=e.next,b.port2.postMessage(0)}}return function(t){l.setTimeout(t,0)}}function _e(a,b){ye||function(){if(l.Promise&&l.Promise.resolve){var a=l.Promise.resolve(void 0);ye=function(){a.then(Ne)}}else ye=function(){var b=Ne;!I(l.setImmediate)||l.Window&&l.Window.prototype&&!wt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ve||(ve=Ee()),ve(b)):l.setImmediate(b)}}(),Te||(ye(),Te=!0),Ae.add(a,b)}var Te=!1,Ae=new z;function Ne(){for(var a;a=K();){try{a.a.call(a.b)}catch(t){Ie(t)}G(H,a)}Te=!1}function Se(a,b){if(this.a=ke,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=y)try{var t=this;a.call(b,(function(e){Ve(t,Oe,e)}),(function(e){if(!(e instanceof We))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Ve(t,De,e)}))}catch(t){Ve(this,De,t)}}var ke=0,Oe=2,De=3;function Re(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Re.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new B((function(){return new Re}),(function(a){a.reset()}));function Pe(a,b,t){var e=Ce.get();return e.g=a,e.b=b,e.f=t,e}function xe(a){if(a instanceof Se)return a;var b=new Se(y);return Ve(b,Oe,a),b}function Le(a){return new Se((function(b,t){t(a)}))}function Me(a,b,t){qe(a,b,t,null)||_e(k(b,a))}function Ue(a){return new Se((function(b){var t=a.length,e=[];if(t)for(var n=function(n,r,p){t--,e[n]=r?{Mb:!0,value:p}:{Mb:!1,reason:p},0==t&&b(e)},r=0;r<a.length;r++)Me(a[r],k(n,r,!0),k(n,r,!1));else b(e)}))}function je(a,b){a.b||a.a!=Oe&&a.a!=De||Be(a),a.f?a.f.next=b:a.b=b,a.f=b}function Fe(a,b,t,e){var n=Pe(null,null,null);return n.a=new Se((function(r,g){n.g=b?function(t){try{var n=b.call(e,t);r(n)}catch(t){g(t)}}:r,n.b=t?function(n){try{var o=t.call(e,n);void 0===o&&n instanceof We?g(n):r(o)}catch(t){g(t)}}:g})),n.a.c=a,je(a,n),n.a}function Ve(a,b,t){a.a==ke&&(a===t&&(b=De,t=new TypeError("Promise cannot resolve to itself")),a.a=1,qe(t,a.Yc,a.Zc,a)||(a.i=t,a.a=b,a.c=null,Be(a),b!=De||t instanceof We||function(a,b){a.g=!0,_e((function(){a.g&&Ke.call(null,b)}))}(a,t)))}function qe(a,b,t,e){if(a instanceof Se)return je(a,Pe(b||y,t||null,e)),!0;if(U(a))return a.then(b,t,e),!0;if(q(a))try{var n=a.then;if(I(n))return function(a,b,t,e,n){function r(t){o||(o=!0,e.call(n,t))}var o=!1;try{b.call(a,(function(e){o||(o=!0,t.call(n,e))}),r)}catch(t){r(t)}}(a,n,b,t,e),!0}catch(n){return t.call(e,n),!0}return!1}function Be(a){a.h||(a.h=!0,_e(a.ec,a))}function Ge(a){var b=null;return a.b&&(b=a.b,a.b=b.next,b.next=null),a.b||(a.f=null),b}function ze(a,b,t,e){if(t==De&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,He(b,t,e);else try{b.c?b.g.call(b.f):He(b,t,e)}catch(t){Ke.call(null,t)}G(Ce,b)}function He(a,b,t){b==Oe?a.g.call(a.f,t):a.b&&a.b.call(a.f,t)}Se.prototype.then=function(a,b,t){return Fe(this,I(a)?a:null,I(b)?b:null,t)},Se.prototype.$goog_Thenable=!0,(e=Se.prototype).ma=function(a,b){return(a=Pe(a,a,b)).c=!0,je(this,a),this},e.o=function(a,b){return Fe(this,null,a,b)},e.cancel=function(a){if(this.a==ke){var b=new We(a);_e((function(){!function t(a,b){if(a.a==ke)if(a.c){var e=a.c;if(e.b){for(var n=0,r=null,o=null,g=e.b;g&&(g.c||(n++,g.a==a&&(r=g),!(r&&1<n)));g=g.next)r||(o=g);r&&(e.a==ke&&1==n?t(e,b):(o?((n=o).next==e.f&&(e.f=n),n.next=n.next.next):Ge(e),ze(e,r,De,b)))}a.c=null}else Ve(a,De,b)}(this,b)}),this)}},e.Yc=function(a){this.a=ke,Ve(this,Oe,a)},e.Zc=function(a){this.a=ke,Ve(this,De,a)},e.ec=function(){for(var a;a=Ge(this);)ze(this,a,this.a,this.i);this.h=!1};var Ke=Ie;function We(a){j.call(this,a)}function Je(){0!=Ye&&(Xe[E(this)]=this),this.wa=this.wa,this.na=this.na}D(We,j),We.prototype.name="cancel";var Ye=0,Xe={};function Qe(a){if(!a.wa&&(a.wa=!0,a.Ba(),0!=Ye)){var b=E(a);if(0!=Ye&&a.na&&0<a.na.length)throw Error(a+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Xe[b]}}Je.prototype.wa=!1,Je.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var $e=Object.freeze||function(a){return a},Ze=!te||9<=Number(ce),tn=te&&!fe("9"),en=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{l.addEventListener("test",y,b),l.removeEventListener("test",y,b)}catch(t){}return a}();function nn(a,b){this.type=a,this.b=this.target=b,this.defaultPrevented=!1}function rn(a,b){if(nn.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=b,b=a.relatedTarget){if(re){t:{try{Qt(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:on[a.pointerType]||"",this.a=a,a.defaultPrevented&&this.preventDefault()}}nn.prototype.preventDefault=function(){this.defaultPrevented=!0},D(rn,nn);var on=$e({2:"touch",3:"pen",4:"mouse"});rn.prototype.preventDefault=function(){rn.Za.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,tn)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}},rn.prototype.f=function(){return this.a};var sn="closure_listenable_"+(1e6*Math.random()|0),an=0;function un(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.Ta=n,this.key=++an,this.ua=this.Na=!1}function cn(a){a.ua=!0,a.listener=null,a.proxy=null,a.src=null,a.Ta=null}function dd(a){this.src=a,this.a={},this.b=0}function hn(a,b){var t=b.type;t in a.a&&tt(a.a[t],b)&&(cn(b),0==a.a[t].length&&(delete a.a[t],a.b--))}function fn(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.ua&&r.listener==b&&r.capture==!!t&&r.Ta==e)return n}return-1}dd.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var g=fn(a,b,e,n);return-1<g?(b=a[g],t||(b.Na=!1)):((b=new un(b,this.src,r,!!e,n)).Na=t,a.push(b)),b};var ln="closure_lm_"+(1e6*Math.random()|0),pn={};function dn(a,b,t,e,n){if(e&&e.once)yn(a,b,t,e,n);else if(Array.isArray(b))for(var r=0;r<b.length;r++)dn(a,b[r],t,e,n);else t=Tn(t),a&&a[sn]?Nn(a,b,t,q(e)?!!e.capture:!!e,n):vn(a,b,t,!1,e,n)}function vn(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var g=q(n)?!!n.capture:!!n,o=En(a);if(o||(a[ln]=o=new dd(a)),!(t=o.add(b,t,e,g,r)).proxy){if(e=function(){var a=In,b=Ze?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)en||(n=g),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(gn(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}0}}function yn(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)yn(a,b[r],t,e,n);else t=Tn(t),a&&a[sn]?Sn(a,b,t,q(e)?!!e.capture:!!e,n):vn(a,b,t,!0,e,n)}function td(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)td(a,b[r],t,e,n);else e=q(e)?!!e.capture:!!e,t=Tn(t),a&&a[sn]?(a=a.u,(b=String(b).toString())in a.a&&(-1<(t=fn(r=a.a[b],t,e,n))&&(cn(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete a.a[b],a.b--)))):a&&(a=En(a))&&(b=a.a[b.toString()],a=-1,b&&(a=fn(b,t,e,n)),(t=-1<a?b[a]:null)&&mn(t))}function mn(a){if("number"!=typeof a&&a&&!a.ua){var b=a.src;if(b&&b[sn])hn(b.u,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(gn(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=En(b))?(hn(t,a),0==t.b&&(t.src=null,b[ln]=null)):cn(a)}}}function gn(a){return a in pn?pn[a]:pn[a]="on"+a}function wn(a,b,t,e){var n=!0;if((a=En(a))&&(b=a.a[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var r=b[a];r&&r.capture==t&&!r.ua&&(r=bn(r,e),n=n&&!1!==r)}return n}function bn(a,b){var t=a.listener,e=a.Ta||a.src;return a.Na&&mn(a),t.call(e,b)}function In(a,b){if(a.ua)return!0;if(!Ze){if(!b)t:{b=["window","event"];for(var t=l,e=0;e<b.length;e++)if(null==(t=t[b[e]])){b=null;break t}b=t}if(b=new rn(e=b,this),t=!0,!(0>e.keyCode||null!=e.returnValue)){t:{var n=!1;if(0==e.keyCode)try{e.keyCode=-1;break t}catch(t){n=!0}(n||null==e.returnValue)&&(e.returnValue=!0)}for(e=[],n=b.b;n;n=n.parentNode)e.push(n);for(a=a.type,n=e.length-1;0<=n;n--){b.b=e[n];var r=wn(e[n],a,!0,b);t=t&&r}for(n=0;n<e.length;n++)b.b=e[n],r=wn(e[n],a,!1,b),t=t&&r}return t}return bn(a,new rn(b,this))}function En(a){return(a=a[ln])instanceof dd?a:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(a){return I(a)?a:(a[_n]||(a[_n]=function(b){return a.handleEvent(b)}),a[_n])}function An(){Je.call(this),this.u=new dd(this),this.Yb=this,this.eb=null}function Nn(a,b,t,e,n){a.u.add(String(b),t,!1,e,n)}function Sn(a,b,t,e,n){a.u.add(String(b),t,!0,e,n)}function kn(a,b,t,e){if(!(b=a.u.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var g=b[r];if(g&&!g.ua&&g.capture==t){var o=g.listener,c=g.Ta||g.src;g.Na&&hn(a.u,g),n=!1!==o.call(c,e)&&n}}return n&&!e.defaultPrevented}function On(a,b,t){if(I(a))t&&(a=S(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=S(a.handleEvent,a)}return 2147483647<Number(b)?-1:l.setTimeout(a,b||0)}function Dn(a){var b=null;return new Se((function(t,e){-1==(b=On((function(){t(void 0)}),a))&&e(Error("Failed to schedule timer."))})).o((function(t){throw l.clearTimeout(b),t}))}function Rn(a){if(a.V&&"function"==typeof a.V)return a.V();if("string"==typeof a)return a.split("");if(w(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}function Cn(a){if(a.X&&"function"==typeof a.X)return a.X();if(!a.V||"function"!=typeof a.V){if(w(a)||"string"==typeof a){var b=[];a=a.length;for(var t=0;t<a;t++)b.push(t);return b}for(var e in b=[],t=0,a)b[t++]=e;return b}}function Pn(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Pn)for(t=a.X(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function xn(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Ln(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Ln(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Ln(a,b){return Object.prototype.hasOwnProperty.call(a,b)}D(An,Je),An.prototype[sn]=!0,An.prototype.addEventListener=function(a,b,t,e){dn(this,a,b,t,e)},An.prototype.removeEventListener=function(a,b,t,e){td(this,a,b,t,e)},An.prototype.dispatchEvent=function(a){var b,t=this.eb;if(t)for(b=[];t;t=t.eb)b.push(t);t=this.Yb;var e=a.type||a;if("string"==typeof a)a=new nn(a,t);else if(a instanceof nn)a.target=a.target||t;else{var n=a;Tt(a=new nn(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var g=a.b=b[r];n=kn(g,e,!0,a)&&n}if(n=kn(g=a.b=t,e,!0,a)&&n,n=kn(g,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=kn(g=a.b=b[r],e,!1,a)&&n;return n},An.prototype.Ba=function(){if(An.Za.Ba.call(this),this.u){var t,a=this.u;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)cn(e[n]);delete a.a[t],a.b--}}this.eb=null},(e=Pn.prototype).V=function(){xn(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},e.X=function(){return xn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(a,b){return Ln(this.b,a)?this.b[a]:b},e.set=function(a,b){Ln(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},e.forEach=function(a,b){for(var t=this.X(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Un(a,b){var t;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,a instanceof Un?(this.h=void 0!==b?b:a.h,jn(this,a.f),this.i=a.i,this.b=a.b,Fn(this,a.l),this.c=a.c,Vn(this,sr(a.a)),this.g=a.g):a&&(t=String(a).match(Mn))?(this.h=!!b,jn(this,t[1]||"",!0),this.i=Hn(t[2]||""),this.b=Hn(t[3]||"",!0),Fn(this,t[4]),this.c=Hn(t[5]||"",!0),Vn(this,t[6]||"",!0),this.g=Hn(t[7]||"")):(this.h=!!b,this.a=new Zn(null,this.h))}function jn(a,b,t){a.f=t?Hn(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Fn(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.l=b}else a.l=null}function Vn(a,b,t){b instanceof Zn?(a.a=b,function(a,b){b&&!a.f&&(er(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(rr(this,e),or(this,n,t))}),a)),a.f=b}(a.a,a.h)):(t||(b=Kn(b,Qn)),a.a=new Zn(b,a.h))}function qn(a,b,t){a.a.set(b,t)}function Bn(a,b){return a.a.get(b)}function Gn(a){return a instanceof Un?new Un(a):new Un(a,void 0)}function zn(a,b){var t=new Un(null,void 0);return jn(t,"https"),a&&(t.b=a),b&&(t.c=b),t}function Hn(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Kn(a,b,t){return"string"==typeof a?(a=encodeURI(a).replace(b,Wn),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Wn(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Un.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Kn(b,Jn,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.i)&&a.push(Kn(b,Jn,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.l)&&a.push(":",String(t))),(t=this.c)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(Kn(t,"/"==t.charAt(0)?Xn:Yn,!0))),(t=this.a.toString())&&a.push("?",t),(t=this.g)&&a.push("#",Kn(t,$n)),a.join("")},Un.prototype.resolve=function(a){var b=new Un(this),t=!!a.f;t?jn(b,a.f):t=!!a.i,t?b.i=a.i:t=!!a.b,t?b.b=a.b:t=null!=a.l;var e=a.c;if(t)Fn(b,a.l);else if(t=!!a.c){if("/"!=e.charAt(0))if(this.b&&!this.c)e="/"+e;else{var n=b.c.lastIndexOf("/");-1!=n&&(e=b.c.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(vt(n,"./")||vt(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],g=0;g<n.length;){var o=n[g++];"."==o?e&&g==n.length&&r.push(""):".."==o?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&g==n.length&&r.push("")):(r.push(o),e=!0)}e=r.join("/")}else e=n}return t?b.c=e:t=""!==a.a.toString(),t?Vn(b,sr(a.a)):t=!!a.g,t&&(b.g=a.g),b};var Jn=/[#\/\?@]/g,Yn=/[#\?:]/g,Xn=/[#\?]/g,Qn=/[#\?@]/g,$n=/#/g;function Zn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function er(a){a.a||(a.a=new Pn,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function nr(a){var b=Cn(a);if(void 0===b)throw Error("Keys are undefined");var t=new Zn(null,void 0);a=Rn(a);for(var e=0;e<b.length;e++){var n=b[e],r=a[e];Array.isArray(r)?or(t,n,r):t.add(n,r)}return t}function rr(a,b){er(a),b=ar(a,b),Ln(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Ln((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&xn(a)))}function ir(a,b){return er(a),b=ar(a,b),Ln(a.a.b,b)}function or(a,b,t){rr(a,b),0<t.length&&(a.c=null,a.a.set(ar(a,b),it(t)),a.b+=t.length)}function sr(a){var b=new Zn;return b.c=a.c,a.a&&(b.a=new Pn(a.a),b.b=a.b),b}function ar(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function ur(a){var b=[];return function t(a,b,e){if(null==b)e.push("null");else{if("object"==typeof b){if(Array.isArray(b)){var n=b;b=n.length,e.push("[");for(var r="",o=0;o<b;o++)e.push(r),t(a,n[o],e),r=",";return void e.push("]")}if(!(b instanceof String||b instanceof Number||b instanceof Boolean)){for(n in e.push("{"),r="",b)Object.prototype.hasOwnProperty.call(b,n)&&("function"!=typeof(o=b[n])&&(e.push(r),pr(n,e),e.push(":"),t(a,o,e),r=","));return void e.push("}")}b=b.valueOf()}switch(typeof b){case"string":pr(b,e);break;case"number":e.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case"boolean":e.push(String(b));break;case"function":e.push("null");break;default:throw Error("Unknown type: "+typeof b)}}}(new cr,a,b),b.join("")}function cr(){}(e=Zn.prototype).add=function(a,b){er(this),this.c=null,a=ar(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(a,b){er(this),this.a.forEach((function(t,e){Y(t,(function(t){a.call(b,t,e,this)}),this)}),this)},e.X=function(){er(this);for(var a=this.a.V(),b=this.a.X(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},e.V=function(a){er(this);var b=[];if("string"==typeof a)ir(this,a)&&(b=nt(b,this.a.get(ar(this,a))));else{a=this.a.V();for(var t=0;t<a.length;t++)b=nt(b,a[t])}return b},e.set=function(a,b){return er(this),this.c=null,ir(this,a=ar(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},e.get=function(a,b){return a&&0<(a=this.V(a)).length?String(a[0]):b},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.X(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.V(e);for(var r=0;r<e.length;r++){var g=n;""!==e[r]&&(g+="="+encodeURIComponent(String(e[r]))),a.push(g)}}return this.c=a.join("&")};var fr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},lr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function pr(a,b){b.push('"',a.replace(lr,(function(t){var e=fr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),fr[t]=e),e})),'"')}function dr(){var a=xr();return te&&!!ce&&11==ce||/Edge\/\d+/.test(a)}function vr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function yr(a,b){b=b||l.window;var t="about:blank";a&&(t=Ft(qt(a))),b.location.href=t}function mr(a){return!!((a=(a||xr()).toLowerCase()).match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function gr(a){a=a||l.window;try{a.close()}catch(t){}}function wr(a,b,t){var e=Math.floor(1e9*Math.random()).toString();b=b||500,t=t||600;var n=(window.screen.availHeight-t)/2,r=(window.screen.availWidth-b)/2;for(g in b={width:b,height:t,top:0<n?n:0,left:0<r?r:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},t=xr().toLowerCase(),e&&(b.target=e,vt(t,"crios/")&&(b.target="_blank")),Rr(xr())==Or&&(a=a||"http://localhost",b.scrollbars=!0),t=a||"",(a=b)||(a={}),e=window,b=t instanceof jt?t:qt(void 0!==t.href?t.href:String(t)),t=a.target||t.target,n=[],a)switch(g){case"width":case"height":case"top":case"left":n.push(g+"="+a[g]);break;case"target":case"noopener":case"noreferrer":break;default:n.push(g+"="+(a[g]?1:0))}var g=n.join(",");if((wt("iPhone")&&!wt("iPod")&&!wt("iPad")||wt("iPad")||wt("iPod"))&&e.navigator&&e.navigator.standalone&&t&&"_self"!=t?(At(g=we(document,"A"),"HTMLAnchorElement"),b instanceof jt||b instanceof jt||(b="object"==typeof b&&b.ra?b.qa():String(b),Vt.test(b)||(b="about:invalid#zClosurez"),b=new jt(Gt,b)),g.href=Ft(b),g.setAttribute("target",t),a.noreferrer&&g.setAttribute("rel","noreferrer"),(a=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,e,1),g.dispatchEvent(a),g={}):a.noreferrer?(g=e.open("",t,g),a=Ft(b),g&&(ne&&vt(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),g.opener=null,a=Wt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Xt(a)+'">'),e=g.document)&&(e.write(Ht(a)),e.close())):(g=e.open(Ft(b),t,g))&&a.noopener&&(g.opener=null),g)try{g.focus()}catch(t){}return g}var Ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Er=/^[^@]+@[^@]+$/;function _r(){var a=null;return new Se((function(b){"complete"==l.document.readyState?b():(a=function(){b()},yn(window,"load",a))})).o((function(b){throw td(window,"load",a),b}))}function Tr(a){return a=a||xr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ar(){var a=l.window;try{return!(!a||a==a.top)}catch(t){return!1}}function Nr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function Sr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":Nr()?"Worker":"Browser"}function kr(){var a=Sr();return"ReactNative"===a||"Node"===a}var Or="Firefox",Dr="Chrome";function Rr(a){var b=a.toLowerCase();return vt(b,"opera/")||vt(b,"opr/")||vt(b,"opios/")?"Opera":vt(b,"iemobile")?"IEMobile":vt(b,"msie")||vt(b,"trident/")?"IE":vt(b,"edge/")?"Edge":vt(b,"firefox/")?Or:vt(b,"silk/")?"Silk":vt(b,"blackberry")?"Blackberry":vt(b,"webos")?"Webos":!vt(b,"safari/")||vt(b,"chrome/")||vt(b,"crios/")||vt(b,"android")?!vt(b,"chrome/")&&!vt(b,"crios/")||vt(b,"edge/")?vt(b,"android")?"Android":(a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==a.length?a[1]:"Other":Dr:"Safari"}var Cr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Pr(a,b){b=b||[];var t,e=[],n={};for(t in Cr)n[Cr[t]]=!0;for(t=0;t<b.length;t++)void 0!==n[b[t]]&&(delete n[b[t]],e.push(b[t]));return e.sort(),(b=e).length||(b=["FirebaseCore-web"]),"Browser"===(e=Sr())?e=Rr(n=xr()):"Worker"===e&&(e=Rr(n=xr())+"-"+e),e+"/JsCore/"+a+"/"+b.join(",")}function xr(){return l.navigator&&l.navigator.userAgent||""}function Lr(a,b){a=a.split("."),b=b||l;for(var t=0;t<a.length&&"object"==typeof b&&null!=b;t++)b=b[a[t]];return t!=a.length&&(b=void 0),b}function Mr(){try{var a=l.localStorage,b=zr();if(a)return a.setItem(b,"1"),a.removeItem(b),!dr()||!!l.indexedDB}catch(t){return Nr()&&!!l.indexedDB}return!1}function Ur(){return(jr()||"chrome-extension:"===Fr()||Tr())&&!kr()&&Mr()&&!Nr()}function jr(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return l.location&&l.location.protocol||null}function Vr(a){return!mr(a=a||xr())&&Rr(a)!=Or}function qr(a){return void 0===a?null:ur(a)}function Br(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&null!==a[t]&&void 0!==a[t]&&(b[t]=a[t]);return b}function Gr(a){if(null!==a)return JSON.parse(a)}function zr(a){return a||Math.floor(1e9*Math.random()).toString()}function Hr(a){return"Safari"!=Rr(a=a||xr())&&!a.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var a=l.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var t=0;t<a.CP.length;t++)a.CP[t]=null}function Wr(a,b){if(a>b)throw Error("Short delay should be less than long delay!");this.a=a,this.c=b,a=xr(),b=Sr(),this.b=mr(a)||"ReactNative"===b}function Jr(){var a=l.document;return!a||void 0===a.visibilityState||"visible"==a.visibilityState}function Yr(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(t){}return null}function Xr(){return!(!Lr("fireauth.oauthhelper",l)&&!Lr("fireauth.iframe",l))}Wr.prototype.get=function(){var a=l.navigator;return!a||"boolean"!=typeof a.onLine||!jr()&&"chrome-extension:"!==Fr()&&void 0===a.connection||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,$r={};function Zr(a){$r[a]||($r[a]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(a))}try{var ti={};Object.defineProperty(ti,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ti,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==ti.abcd}catch(a){Qr=!1}function ei(a,b,t){Qr?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:t}):a[b]=t}function ni(a,b){if(b)for(var t in b)b.hasOwnProperty(t)&&ei(a,t,b[t])}function ri(a){var b={};return ni(b,a),b}function ii(a){var b=a;if("object"==typeof a&&null!=a)for(var t in b="length"in a?[]:{},a)ei(b,t,ii(a[t]));return b}function oi(a){var b=a&&(a[hi]?"phone":null);if(!(b&&a&&a[ci]))throw new u("internal-error","Internal assert: invalid MultiFactorInfo object");ei(this,"uid",a[ci]),ei(this,"displayName",a[ai]||null);var t=null;a[ui]&&(t=new Date(a[ui]).toUTCString()),ei(this,"enrollmentTime",t),ei(this,"factorId",b)}function si(a){try{var b=new fi(a)}catch(t){b=null}return b}oi.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",ui="enrolledAt",ci="mfaEnrollmentId",hi="phoneInfo";function fi(a){oi.call(this,a),ei(this,"phoneNumber",a[hi])}function pi(a){var b={},t=a[mi],e=a[wi],n=a[bi];if(a=si(a[gi]),!n||n!=vi&&n!=yi&&!t||n==yi&&!e||n==di&&!a)throw Error("Invalid checkActionCode response!");n==yi?(b[Ei]=t||null,b[Ti]=t||null,b[Ii]=e):(b[Ei]=e||null,b[Ti]=e||null,b[Ii]=t||null),b[_i]=a||null,ei(this,Ni,n),ei(this,Ai,ii(b))}D(fi,oi),fi.prototype.v=function(){var a=fi.Za.v.call(this);return a.phoneNumber=this.phoneNumber,a};var di="REVERT_SECOND_FACTOR_ADDITION",vi="EMAIL_SIGNIN",yi="VERIFY_AND_CHANGE_EMAIL",mi="email",gi="mfaInfo",wi="newEmail",bi="requestType",Ii="email",Ei="fromEmail",_i="multiFactorInfo",Ti="previousEmail",Ai="data",Ni="operation";function Si(a){var b=Bn(a=Gn(a),ki)||null,t=Bn(a,Oi)||null,e=Bn(a,Ci)||null;if(e=e&&xi[e]||null,!b||!t||!e)throw new u("argument-error",ki+", "+Oi+"and "+Ci+" are required in a valid action code URL.");ni(this,{apiKey:b,operation:e,code:t,continueUrl:Bn(a,Di)||null,languageCode:Bn(a,Ri)||null,tenantId:Bn(a,Pi)||null})}var ki="apiKey",Oi="oobCode",Di="continueUrl",Ri="languageCode",Ci="mode",Pi="tenantId",xi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:di,signIn:vi,verifyAndChangeEmail:yi,verifyEmail:"VERIFY_EMAIL"};function Li(a){try{return new Si(a)}catch(t){return null}}function Mi(a){var b=a[qi];if(void 0===b)throw new u("missing-continue-uri");if("string"!=typeof b||"string"==typeof b&&!b.length)throw new u("invalid-continue-uri");this.h=b,this.b=this.a=null,this.g=!1;var t=a[Ui];if(t&&"object"==typeof t){b=t[zi];var e=t[Bi];if(t=t[Gi],"string"==typeof b&&b.length){if(this.a=b,void 0!==e&&"boolean"!=typeof e)throw new u("argument-error",Bi+" property must be a boolean when specified.");if(this.g=!!e,void 0!==t&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new u("argument-error",Gi+" property must be a non empty string when specified.");this.b=t||null}else{if(void 0!==b)throw new u("argument-error",zi+" property must be a non empty string when specified.");if(void 0!==e||void 0!==t)throw new u("missing-android-pkg-name")}}else if(void 0!==t)throw new u("argument-error",Ui+" property must be a non null object when specified.");if(this.f=null,(b=a[Vi])&&"object"==typeof b){if("string"==typeof(b=b[Hi])&&b.length)this.f=b;else if(void 0!==b)throw new u("argument-error",Hi+" property must be a non empty string when specified.")}else if(void 0!==b)throw new u("argument-error",Vi+" property must be a non null object when specified.");if(void 0!==(b=a[Fi])&&"boolean"!=typeof b)throw new u("argument-error",Fi+" property must be a boolean when specified.");if(this.c=!!b,void 0!==(a=a[ji])&&("string"!=typeof a||"string"==typeof a&&!a.length))throw new u("argument-error",ji+" property must be a non empty string when specified.");this.i=a||null}var Ui="android",ji="dynamicLinkDomain",Fi="handleCodeInApp",Vi="iOS",qi="url",Bi="installApp",Gi="minimumVersion",zi="packageName",Hi="bundleId";function Ki(a){var b={};for(var t in b.continueUrl=a.h,b.canHandleCodeInApp=a.c,(b.androidPackageName=a.a)&&(b.androidMinimumVersion=a.b,b.androidInstallApp=a.g),b.iOSBundleId=a.f,b.dynamicLinkDomain=a.i,b)null===b[t]&&delete b[t];return b}var Wi=null;function Ji(a){var b="";return function(a,b){function t(t){for(;e<a.length;){var p=a.charAt(e++),n=Wi[p];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return t}!function(){if(!Wi){Wi={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++)for(var e=a.concat(b[t].split("")),n=0;n<e.length;n++){var r=e[n];void 0===Wi[r]&&(Wi[r]=n)}}}();for(var e=0;;){var n=t(-1),r=t(0),g=t(64),o=t(64);if(64===o&&-1===n)break;b(n<<2|r>>4),64!=g&&(b(r<<4&240|g>>2),64!=o&&b(g<<6&192|o))}}(a,(function(t){b+=String.fromCharCode(t)})),b}function Yi(a){var b=Qi(a);if(!(b&&b.sub&&b.iss&&b.aud&&b.exp))throw Error("Invalid JWT");this.g=a,this.c=b.exp,this.h=b.sub,O(),this.a=b.provider_id||b.firebase&&b.firebase.sign_in_provider||null,this.f=b.firebase&&b.firebase.tenant||null,this.b=!!b.is_anonymous||"anonymous"==this.a}function Xi(a){try{return new Yi(a)}catch(t){return null}}function Qi(a){if(!a)return null;if(3!=(a=a.split(".")).length)return null;for(var b=(4-(a=a[1]).length%4)%4,t=0;t<b;t++)a+=".";try{return JSON.parse(Ji(a))}catch(t){}return null}Yi.prototype.S=function(){return this.f},Yi.prototype.i=function(){return this.b},Yi.prototype.toString=function(){return this.g};var $i="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Zi=["client_id","response_type","scope","redirect_uri","state"],to={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Zi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Zi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Zi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:$i},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function eo(a){for(var b in to)if(to[b].ea==a)return to[b];return null}function no(a){var b={};b["facebook.com"]=ao,b["google.com"]=co,b["github.com"]=uo,b["twitter.com"]=ho;var t=a&&a[io];try{if(t)return b[t]?new b[t](a):new so(a);if(void 0!==a[ro])return new oo(a)}catch(t){}return null}var ro="idToken",io="providerId";function oo(a){var b=a[io];if(!b&&a[ro]){var t=Xi(a[ro]);t&&t.a&&(b=t.a)}if(!b)throw Error("Invalid additional user info!");"anonymous"!=b&&"custom"!=b||(b=null),t=!1,void 0!==a.isNewUser?t=!!a.isNewUser:"identitytoolkit#SignupNewUserResponse"===a.kind&&(t=!0),ei(this,"providerId",b),ei(this,"isNewUser",t)}function so(a){oo.call(this,a),ei(this,"profile",ii((a=Gr(a.rawUserInfo||"{}"))||{}))}function ao(a){if(so.call(this,a),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(a){if(so.call(this,a),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",this.profile&&this.profile.login||null)}function co(a){if(so.call(this,a),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ho(a){if(so.call(this,a),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",a.screenName||null)}function fo(a){var b=Gn(a),t=Bn(b,"link"),e=Bn(Gn(t),"link");return b=Bn(b,"deep_link_id"),Bn(Gn(b),"link")||b||e||t||a}function lo(a,b){if(!a&&!b)throw new u("internal-error","Internal assert: no raw session string available");if(a&&b)throw new u("internal-error","Internal assert: unable to determine the session type");this.a=a||null,this.b=b||null,this.type=this.a?po:vo}D(so,oo),D(ao,so),D(uo,so),D(co,so),D(ho,so);var po="enroll",vo="signin";function yo(){}function mo(a,b){return a.then((function(t){if(t[na]){var e=Xi(t[na]);if(!e||b!=e.h)throw new u("user-mismatch");return t}throw new u("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==P+"user-not-found"?new u("user-mismatch"):t}))}function go(a,b){if(!b)throw new u("internal-error","failed to construct a credential");this.a=b,ei(this,"providerId",a),ei(this,"signInMethod",a)}function wo(a){return{pendingToken:a.a,requestUri:"http://localhost"}}function bo(a){if(a&&a.providerId&&a.signInMethod&&0==a.providerId.indexOf("saml.")&&a.pendingToken)try{return new go(a.providerId,a.pendingToken)}catch(t){}return null}function Io(a,b,t){if(this.a=null,b.idToken||b.accessToken)b.idToken&&ei(this,"idToken",b.idToken),b.accessToken&&ei(this,"accessToken",b.accessToken),b.nonce&&!b.pendingToken&&ei(this,"nonce",b.nonce),b.pendingToken&&(this.a=b.pendingToken);else{if(!b.oauthToken||!b.oauthTokenSecret)throw new u("internal-error","failed to construct a credential");ei(this,"accessToken",b.oauthToken),ei(this,"secret",b.oauthTokenSecret)}ei(this,"providerId",a),ei(this,"signInMethod",t)}function Eo(a){var b={};return a.idToken&&(b.id_token=a.idToken),a.accessToken&&(b.access_token=a.accessToken),a.secret&&(b.oauth_token_secret=a.secret),b.providerId=a.providerId,a.nonce&&!a.a&&(b.nonce=a.nonce),b={postBody:nr(b).toString(),requestUri:"http://localhost"},a.a&&(delete b.postBody,b.pendingToken=a.a),b}function _o(a){if(a&&a.providerId&&a.signInMethod){var b={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new Io(a.providerId,b,a.signInMethod)}catch(t){}}return null}function To(a,b){this.Oc=b||[],ni(this,{providerId:a,isOAuthProvider:!0}),this.Fb={},this.lb=(eo(a)||{}).Ha||null,this.kb=null}function Ao(a){if("string"!=typeof a||0!=a.indexOf("saml."))throw new u("argument-error",'SAML provider IDs must be prefixed with "saml."');To.call(this,a,[])}function No(a){To.call(this,a,Zi),this.a=[]}function So(){No.call(this,"facebook.com")}function ko(a){if(!a)throw new u("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return q(a)&&(b=a.accessToken),(new So).credential({accessToken:b})}function Oo(){No.call(this,"github.com")}function Do(a){if(!a)throw new u("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return q(a)&&(b=a.accessToken),(new Oo).credential({accessToken:b})}function Ro(){No.call(this,"google.com"),this.Aa("profile")}function Co(a,b){var t=a;return q(a)&&(t=a.idToken,b=a.accessToken),(new Ro).credential({idToken:t,accessToken:b})}function Po(){To.call(this,"twitter.com",$i)}function xo(a,b){var t=a;if(q(t)||(t={oauthToken:a,oauthTokenSecret:b}),!t.oauthToken||!t.oauthTokenSecret)throw new u("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Io("twitter.com",t,"twitter.com")}function Lo(a,b,t){this.a=a,this.f=b,ei(this,"providerId","password"),ei(this,"signInMethod",t===Uo.EMAIL_LINK_SIGN_IN_METHOD?Uo.EMAIL_LINK_SIGN_IN_METHOD:Uo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Mo(a){return a&&a.email&&a.password?new Lo(a.email,a.password,a.signInMethod):null}function Uo(){ni(this,{providerId:"password",isOAuthProvider:!1})}function jo(a,b){if(!(b=Fo(b)))throw new u("argument-error","Invalid email link!");return new Lo(a,b.code,Uo.EMAIL_LINK_SIGN_IN_METHOD)}function Fo(a){return(a=Li(a=fo(a)))&&a.operation===vi?a:null}function Vo(a){if(!(a.bb&&a.ab||a.Ja&&a.da))throw new u("internal-error");this.a=a,ei(this,"providerId","phone"),this.ea="phone",ei(this,"signInMethod","phone")}function qo(a){if(a&&"phone"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var b={};return Y(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(t){a[t]&&(b[t]=a[t])})),new Vo(b)}return null}function Bo(a){return a.a.Ja&&a.a.da?{temporaryProof:a.a.Ja,phoneNumber:a.a.da}:{sessionInfo:a.a.bb,code:a.a.ab}}function Go(a){try{this.a=a||r.a.auth()}catch(t){throw new u("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ni(this,{providerId:"phone",isOAuthProvider:!1})}function zo(a,b){if(!a)throw new u("missing-verification-id");if(!b)throw new u("missing-verification-code");return new Vo({bb:a,ab:b})}function Ho(a){if(a.temporaryProof&&a.phoneNumber)return new Vo({Ja:a.temporaryProof,da:a.phoneNumber});var b=a&&a.providerId;if(!b||"password"===b)return null;var t=a&&a.oauthAccessToken,e=a&&a.oauthTokenSecret,n=a&&a.nonce,r=a&&a.oauthIdToken,g=a&&a.pendingToken;try{switch(b){case"google.com":return Co(r,t);case"facebook.com":return ko(t);case"github.com":return Do(t);case"twitter.com":return xo(t,e);default:return t||e||r||g?g?0==b.indexOf("saml.")?new go(b,g):new Io(b,{pendingToken:g,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},b):new No(b).credential({idToken:r,accessToken:t,rawNonce:n}):null}}catch(t){return null}}function Ko(a){if(!a.isOAuthProvider)throw new u("invalid-oauth-provider")}function Wo(a,b,t,e,n,r,g){if(this.c=a,this.b=b||null,this.g=t||null,this.f=e||null,this.i=r||null,this.h=g||null,this.a=n||null,!this.g&&!this.a)throw new u("invalid-auth-event");if(this.g&&this.a)throw new u("invalid-auth-event");if(this.g&&!this.f)throw new u("invalid-auth-event")}function Jo(a){return(a=a||{}).type?new Wo(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&R(a.error),a.postBody,a.tenantId):null}function Yo(){this.b=null,this.a=[]}lo.prototype.Fa=function(){return this.a?xe(this.a):xe(this.b)},lo.prototype.v=function(){return this.type==po?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},yo.prototype.ia=function(){},yo.prototype.b=function(){},yo.prototype.c=function(){},yo.prototype.v=function(){},go.prototype.ia=function(a){return Ea(a,wo(this))},go.prototype.b=function(a,b){var t=wo(this);return t.idToken=b,_a(a,t)},go.prototype.c=function(a,b){return mo(Ta(a,wo(this)),b)},go.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Io.prototype.ia=function(a){return Ea(a,Eo(this))},Io.prototype.b=function(a,b){var t=Eo(this);return t.idToken=b,_a(a,t)},Io.prototype.c=function(a,b){return mo(Ta(a,Eo(this)),b)},Io.prototype.v=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a},To.prototype.Ia=function(a){return this.Fb=Et(a),this},D(Ao,To),D(No,To),No.prototype.Aa=function(a){return Z(this.a,a)||this.a.push(a),this},No.prototype.Nb=function(){return it(this.a)},No.prototype.credential=function(a,b){var t;if(!(t=q(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:b||null}).idToken&&!t.accessToken)throw new u("argument-error","credential failed: must provide the ID token and/or the access token.");return new Io(this.providerId,t,this.providerId)},D(So,No),ei(So,"PROVIDER_ID","facebook.com"),ei(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),D(Oo,No),ei(Oo,"PROVIDER_ID","github.com"),ei(Oo,"GITHUB_SIGN_IN_METHOD","github.com"),D(Ro,No),ei(Ro,"PROVIDER_ID","google.com"),ei(Ro,"GOOGLE_SIGN_IN_METHOD","google.com"),D(Po,To),ei(Po,"PROVIDER_ID","twitter.com"),ei(Po,"TWITTER_SIGN_IN_METHOD","twitter.com"),Lo.prototype.ia=function(a){return this.signInMethod==Uo.EMAIL_LINK_SIGN_IN_METHOD?ou(a,Ca,{email:this.a,oobCode:this.f}):ou(a,tu,{email:this.a,password:this.f})},Lo.prototype.b=function(a,b){return this.signInMethod==Uo.EMAIL_LINK_SIGN_IN_METHOD?ou(a,Pa,{idToken:b,email:this.a,oobCode:this.f}):ou(a,Ka,{idToken:b,email:this.a,password:this.f})},Lo.prototype.c=function(a,b){return mo(this.ia(a),b)},Lo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ni(Uo,{PROVIDER_ID:"password"}),ni(Uo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ni(Uo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Vo.prototype.ia=function(a){return a.cb(Bo(this))},Vo.prototype.b=function(a,b){var t=Bo(this);return t.idToken=b,ou(a,nu,t)},Vo.prototype.c=function(a,b){var t=Bo(this);return t.operation="REAUTH",mo(a=ou(a,ru,t),b)},Vo.prototype.v=function(){var a={providerId:"phone"};return this.a.bb&&(a.verificationId=this.a.bb),this.a.ab&&(a.verificationCode=this.a.ab),this.a.Ja&&(a.temporaryProof=this.a.Ja),this.a.da&&(a.phoneNumber=this.a.da),a},Go.prototype.cb=function(a,b){var t=this.a.b;return xe(b.verify()).then((function(e){if("string"!=typeof e)throw new u("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(b.type){case"recaptcha":var n=q(a)?a.session:null,r=q(a)?a.phoneNumber:a;return(n&&n.type==po?n.Fa().then((function(n){return function(a,b){return ou(a,Ja,b).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(t,{idToken:n,phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:e}})})):n&&n.type==vo?n.Fa().then((function(n){return function(a,b){return ou(a,Ya,b).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(t,{mfaPendingCredential:n,mfaEnrollmentId:a.multiFactorHint&&a.multiFactorHint.uid||a.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}})})):function(a,b){return ou(a,za,b)}(t,{phoneNumber:r,recaptchaToken:e})).then((function(t){return"function"==typeof b.reset&&b.reset(),t}),(function(t){throw"function"==typeof b.reset&&b.reset(),t}));default:throw new u("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ni(Go,{PROVIDER_ID:"phone"}),ni(Go,{PHONE_SIGN_IN_METHOD:"phone"}),Wo.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.h&&a.push(this.h),a.join("-")},Wo.prototype.S=function(){return this.h},Wo.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Xo,Qo=null;function th(a){var b="unauthorized-domain",t=void 0,e=Gn(a);a=e.b,"chrome-extension"==(e=e.f)?t=Yt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==e||"https"==e?t=Yt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):b="operation-not-supported-in-this-environment",u.call(this,b,t)}function $o(a,b,t){u.call(this,a,t),(a=b||{}).Gb&&ei(this,"email",a.Gb),a.da&&ei(this,"phoneNumber",a.da),a.credential&&ei(this,"credential",a.credential),a.Wb&&ei(this,"tenantId",a.Wb)}function Zo(a){if(a.code){var b=a.code||"";0==b.indexOf(P)&&(b=b.substring(P.length));var t={credential:Ho(a),Wb:a.tenantId};if(a.email)t.Gb=a.email;else if(a.phoneNumber)t.da=a.phoneNumber;else if(!t.credential)return new u(b,a.message||void 0);return new $o(b,t,a.message)}return null}function ts(){}function es(a){return a.c||(a.c=a.b())}function ns(){}function rs(a){if(!a.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<b.length;t++){var e=b[t];try{return new ActiveXObject(e),a.f=e}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.f}function is(){}function os(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.oc,this),this.a.onerror=S(this.Pb,this),this.a.onprogress=S(this.pc,this),this.a.ontimeout=S(this.tc,this)}function ss(a,b){a.readyState=b,a.onreadystatechange&&a.onreadystatechange()}function as(a,b,t){this.reset(a,b,t,void 0,void 0)}D(th,u),D($o,u),$o.prototype.v=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var b=this.credential&&this.credential.v();return b&&Tt(a,b),a},$o.prototype.toJSON=function(){return this.v()},ts.prototype.c=null,D(ns,ts),ns.prototype.a=function(){var a=rs(this);return a?new ActiveXObject(a):new XMLHttpRequest},ns.prototype.b=function(){var a={};return rs(this)&&(a[0]=!0,a[1]=!0),a},Xo=new ns,D(is,ts),is.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new os;throw Error("Unsupported browser")},is.prototype.b=function(){return{}},(e=os.prototype).open=function(a,b,t){if(null!=t&&!t)throw Error("Only async requests are supported.");this.a.open(a,b)},e.send=function(a){if(a){if("string"!=typeof a)throw Error("Only string data is supported");this.a.send(a)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.a.contentType:""},e.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ss(this,4)},e.Pb=function(){this.status=500,this.response=this.responseText="",ss(this,4)},e.tc=function(){this.Pb()},e.pc=function(){this.status=200,ss(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},as.prototype.a=null;function us(a){this.f=a,this.b=this.c=this.a=null}function cs(a,b){this.name=a,this.value=b}as.prototype.reset=function(a,b,t,e,n){"number"==typeof n||0,e||O(),delete this.a},cs.prototype.toString=function(){return this.name};var hs=new cs("SEVERE",1e3),fs=new cs("WARNING",900),ls=new cs("CONFIG",700),ps=new cs("FINE",500);us.prototype.log=function(a,b,t){if(a.value>=function t(a){return a.c?a.c:a.a?t(a.a):(V("Root logger has no level set."),null)}(this).value)for(I(b)&&(b=b()),a=new as(a,String(b),this.f),t&&(a.a=t),t=this;t;)t=t.a};var ds={},vs=null;function ys(a){var b;if(vs||(vs=new us(""),ds[""]=vs,vs.c=ls),!(b=ds[a])){b=new us(a);var t=a.lastIndexOf("."),e=a.substr(t+1);(t=ys(a.substr(0,t))).b||(t.b={}),t.b[e]=b,b.a=t,ds[a]=b}return b}function ms(a,b){a&&a.log(ps,b,void 0)}function gs(a){this.f=a}function ws(a){An.call(this),this.s=a,this.readyState=bs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ys("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}D(gs,ts),gs.prototype.a=function(){return new ws(this.f)},gs.prototype.b=function(a){return function(){return a}}({}),D(ws,An);var bs=0;function Is(a){a.c.read().then(a.nc.bind(a)).catch(a.Sa.bind(a))}function Es(a,b){b&&a.f&&(a.status=a.f.status,a.statusText=a.f.statusText),a.readyState=4,a.f=null,a.c=null,a.l=null,_s(a)}function _s(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function Ts(a){An.call(this),this.headers=new Pn,this.D=a||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=As,this.w=this.R=!1}(e=ws.prototype).open=function(a,b){if(this.readyState!=bs)throw this.abort(),Error("Error reopening a connection");this.m=a,this.g=b,this.readyState=1,_s(this)},e.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var b={headers:this.i,method:this.m,credentials:void 0,cache:void 0};a&&(b.body=a),this.s.fetch(new Request(this.g,b)).then(this.sc.bind(this),this.Sa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Es(this,!1)),this.readyState=bs},e.sc=function(a){this.a&&(this.f=a,this.b||(this.b=a.headers,this.readyState=2,_s(this)),this.a&&(this.readyState=3,_s(this),this.a&&("arraybuffer"===this.responseType?a.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in a?(this.response=this.responseText="",this.c=a.body.getReader(),this.l=new TextDecoder,Is(this)):a.text().then(this.rc.bind(this),this.Sa.bind(this)))))},e.nc=function(a){if(this.a){var b=this.l.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});b&&(this.response=this.responseText+=b),a.done?Es(this,!0):_s(this),3==this.readyState&&Is(this)}},e.rc=function(a){this.a&&(this.response=this.responseText=a,Es(this,!0))},e.qc=function(a){this.a&&(this.response=a,Es(this,!0))},e.Sa=function(a){var b=this.h;b&&b.log(fs,"Failed to fetch url "+this.g,a instanceof Error?a:Error(a)),this.a&&Es(this,!0)},e.setRequestHeader=function(a,b){this.i.append(a,b)},e.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||"":((a=this.h)&&a.log(fs,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var a=this.h;return a&&a.log(fs,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}a=[];for(var b=this.b.entries(),t=b.next();!t.done;)t=t.value,a.push(t[0]+": "+t[1]),t=b.next();return a.join("\r\n")},D(Ts,An);var As="";Ts.prototype.b=ys("goog.net.XhrIo");var Ns=/^https?$/i,Ss=["POST","PUT"];function ks(a,b,t,e,n){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.l+"; newUri="+b);t=t?t.toUpperCase():"GET",a.l=b,a.h="",a.P=t,a.N=!1,a.c=!0,a.a=a.D?a.D.a():Xo.a(),a.B=a.D?es(a.D):es(Xo),a.a.onreadystatechange=S(a.Sb,a);try{ms(a.b,Us(a,"Opening Xhr")),a.O=!0,a.a.open(t,String(b),!0),a.O=!1}catch(t){return ms(a.b,Us(a,"Error opening Xhr: "+t.message)),void Ds(a,t)}b=e||"";var r=new Pn(a.headers);n&&function(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(w(a)||"string"==typeof a)Y(a,b,void 0);else for(var t=Cn(a),e=Rn(a),n=e.length,r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}(n,(function(g,t){r.set(t,g)})),n=function(a){t:{for(var b=Os,t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(r.X()),e=l.FormData&&b instanceof l.FormData,!Z(Ss,t)||n||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(g,t){this.a.setRequestHeader(t,g)}),a),a.m&&(a.a.responseType=a.m),"withCredentials"in a.a&&a.a.withCredentials!==a.R&&(a.a.withCredentials=a.R);try{xs(a),0<a.g&&(a.w=function(a){return te&&fe(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(a.a),ms(a.b,Us(a,"Will abort after "+a.g+"ms if incomplete, xhr2 "+a.w)),a.w?(a.a.timeout=a.g,a.a.ontimeout=S(a.Ka,a)):a.s=On(a.Ka,a.g,a)),ms(a.b,Us(a,"Sending request")),a.i=!0,a.a.send(b),a.i=!1}catch(t){ms(a.b,Us(a,"Send error: "+t.message)),Ds(a,t)}}function Os(a){return"content-type"==a.toLowerCase()}function Ds(a,b){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.h=b,Rs(a),Ps(a)}function Rs(a){a.N||(a.N=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Cs(a){if(a.c&&void 0!==f)if(a.B[1]&&4==Ls(a)&&2==Ms(a))ms(a.b,Us(a,"Local request error detected and ignored"));else if(a.i&&4==Ls(a))On(a.Sb,0,a);else if(a.dispatchEvent("readystatechange"),4==Ls(a)){ms(a.b,Us(a,"Request complete")),a.c=!1;try{var t,b=Ms(a);t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.l).match(Mn)[1]||null;if(!r&&l.self&&l.self.location){var g=l.self.location.protocol;r=g.substr(0,g.length-1)}n=!Ns.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{try{var o=2<Ls(a)?a.a.statusText:""}catch(t){ms(a.b,"Can not get status: "+t.message),o=""}a.h=o+" ["+Ms(a)+"]",Rs(a)}}finally{Ps(a)}}}function Ps(a,b){if(a.a){xs(a);var t=a.a,e=a.B[0]?y:null;a.a=null,a.B=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){(a=a.b)&&a.log(hs,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function xs(a){a.a&&a.w&&(a.a.ontimeout=null),a.s&&(l.clearTimeout(a.s),a.s=null)}function Ls(a){return a.a?a.a.readyState:0}function Ms(a){try{return 2<Ls(a)?a.a.status:-1}catch(t){return-1}}function Us(a,b){return b+" ["+a.P+" "+a.l+" "+Ms(a)+"]"}function li(a){var b=Js;this.g=[],this.w=b,this.s=a||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function js(a,b,t){a.a=!0,a.c=t,a.f=!b,Bs(a)}function Fs(a){if(a.a){if(!a.u)throw new Gs(a);a.u=!1}}function Vs(a,b,t,e){a.g.push([b,t,e]),a.a&&Bs(a)}function qs(a){return $(a.g,(function(b){return I(b[1])}))}function Bs(a){if(a.h&&a.a&&qs(a)){var b=a.h,t=Ks[b];t&&(l.clearTimeout(t.a),delete Ks[b]),a.h=0}a.b&&(a.b.l--,delete a.b),b=a.c;for(var e=t=!1;a.g.length&&!a.i;){var n=a.g.shift(),r=n[0],g=n[1];if(n=n[2],r=a.f?g:r)try{var o=r.call(n||a.s,b);void 0!==o&&(a.f=a.f&&(o==b||o instanceof Error),a.c=b=o),(U(b)||"function"==typeof l.Promise&&b instanceof l.Promise)&&(e=!0,a.i=!0)}catch(e){b=e,a.f=!0,qs(a)||(t=!0)}}a.c=b,e&&(o=S(a.m,a,!0),e=S(a.m,a,!1),b instanceof li?(Vs(b,o,e),b.B=!0):b.then(o,e)),t&&(b=new Hs(b),Ks[b.a]=b,a.h=b.a)}function Gs(){j.call(this)}function zs(){j.call(this)}function Hs(a){this.a=l.setTimeout(S(this.c,this),0),this.b=a}(e=Ts.prototype).Ka=function(){void 0!==f&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ms(this.b,Us(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ms(this.b,Us(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ps(this))},e.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ps(this,!0)),Ts.Za.Ba.call(this)},e.Sb=function(){this.wa||(this.O||this.i||this.f?Cs(this):this.Hc())},e.Hc=function(){Cs(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case As:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(hs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ms(this.b,"Can not get response: "+t.message),null}},li.prototype.cancel=function(a){if(this.a)this.c instanceof li&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b,a?b.cancel(a):(b.l--,0>=b.l&&b.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(a=new zs(this),Fs(this),js(this,!1,a))}},li.prototype.m=function(a,b){this.i=!1,js(this,a,b)},li.prototype.then=function(a,b,t){var e,n,r=new Se((function(g,t){e=g,n=t}));return Vs(this,e,(function(g){g instanceof zs?r.cancel():n(g)})),r.then(a,b,t)},li.prototype.$goog_Thenable=!0,D(Gs,j),Gs.prototype.message="Deferred has already fired",Gs.prototype.name="AlreadyCalledError",D(zs,j),zs.prototype.message="Deferred was canceled",zs.prototype.name="CanceledError",Hs.prototype.c=function(){throw delete Ks[this.a],this.b};var Ks={};function Ws(a){var b={},t=b.document||document,e=Ct(a).toString(),n=we(document,"SCRIPT"),r={Tb:n,Ka:void 0},g=new li(r),o=null,c=null!=b.timeout?b.timeout:5e3;return 0<c&&(o=window.setTimeout((function(){Ys(n,!0);var p=new $s(Qs,"Timeout reached for loading script "+e);Fs(g),js(g,!1,p)}),c),r.Ka=o),n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(Ys(n,b.ud||!1,o),Fs(g),js(g,!0,null))},n.onerror=function(){Ys(n,!0,o);var p=new $s(Xs,"Error while loading script "+e);Fs(g),js(g,!1,p)},Tt(r=b.attributes||{},{type:"text/javascript",charset:"UTF-8"}),de(n,r),function(a,b){At(a,"HTMLScriptElement"),a.src=Ct(b),null===v&&(v=(b=(b=l.document).querySelector&&b.querySelector("script[nonce]"))&&(b=b.nonce||b.getAttribute("nonce"))&&d.test(b)?b:""),(b=v)&&a.setAttribute("nonce",b)}(n,a),function(a){var b;return(b=(a||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:a.documentElement}(t).appendChild(n),g}function Js(){if(this&&this.Tb){var a=this.Tb;a&&"SCRIPT"==a.tagName&&Ys(a,!0,this.Ka)}}function Ys(a,b,t){null!=t&&l.clearTimeout(t),a.onload=y,a.onerror=y,a.onreadystatechange=y,b&&window.setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a)}),0)}var Xs=0,Qs=1;function $s(a,b){var t="Jsloader error (code #"+a+")";b&&(t+=": "+b),j.call(this,t),this.code=a}function Zs(a){this.f=a}function ta(a,b,t){if(this.c=a,a=b||{},this.u=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=a.secureTokenTimeout||ra,this.g=Et(a.secureTokenHeaders||ia),this.h=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=a.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=a.firebaseTimeout||oa,this.a=Et(a.firebaseHeaders||sa),t&&(this.a["X-Client-Version"]=t,this.g["X-Client-Version"]=t),t="Node"==Sr(),!(t=l.XMLHttpRequest||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!Nr())throw new u("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Nr()?this.f=new gs(self):kr()?this.f=new Zs(t):this.f=new is,this.b=null}D($s,j),D(Zs,ts),Zs.prototype.a=function(){return new this.f},Zs.prototype.b=function(){return{}};var ea,na="idToken",ra=new Wr(3e4,6e4),ia={"Content-Type":"application/x-www-form-urlencoded"},oa=new Wr(3e4,6e4),sa={"Content-Type":"application/json"};function aa(a,b){b?a.a["X-Firebase-Locale"]=b:delete a.a["X-Firebase-Locale"]}function ua(a,b){b?(a.a["X-Client-Version"]=b,a.g["X-Client-Version"]=b):(delete a.a["X-Client-Version"],delete a.g["X-Client-Version"])}function ca(a,b,t,e,n,r,g){(function(){var a=xr();return!((a=Rr(a)!=Dr?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&30>a)&&(!te||!ce||9<ce)})()||Nr()?a=S(a.w,a):(ea||(ea=new Se((function(t,e){!function(a,b){if(((window.gapi||{}).client||{}).request)a();else{l[fa]=function(){((window.gapi||{}).client||{}).request?a():b(Error("CORS_UNSUPPORTED"))},function(a,b){Vs(a,null,b,void 0)}(Ws(Pt(ha,{onload:fa})),(function(){b(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),a=S(a.s,a)),a(b,t,e,n,r,g)}ta.prototype.S=function(){return this.b},ta.prototype.w=function(a,b,t,e,n,r){if(Nr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new u("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var g=new Ts(this.f);if(r){g.g=Math.max(0,r);var o=setTimeout((function(){g.dispatchEvent("timeout")}),r)}Nn(g,"complete",(function(){o&&clearTimeout(o);var t=null;try{t=JSON.parse(function(a){try{return a.a?a.a.responseText:""}catch(t){return ms(a.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(e){t=null}b&&b(t)})),Sn(g,"ready",(function(){o&&clearTimeout(o),Qe(this)})),Sn(g,"timeout",(function(){o&&clearTimeout(o),Qe(this),b&&b(null)})),ks(g,a,t,e,n)};var ha=new Nt(Ot,"https://apis.google.com/js/client.js?onload=%{onload}"),fa="__fcb"+Math.floor(1e6*Math.random()).toString();function la(a,b,t,e,n,r,g){var o=Gn(b+t);qn(o,"key",a.c),g&&qn(o,"cb",O().toString());var c="GET"==e;if(c)for(var p in n)n.hasOwnProperty(p)&&qn(o,p,n[p]);return new Se((function(t,h){ca(a,o.toString(),(function(e){e?e.error?h(au(e,r||{})):t(e):h(new u("network-request-failed"))}),e,c?void 0:ur(Br(n)),a.a,a.i.get())}))}function pa(a){if("string"!=typeof(a=a.email)||!Er.test(a))throw new u("invalid-email")}function da(a){"email"in a&&pa(a)}function va(a){if(!a[na]){if(a.mfaPendingCredential)throw new u("multi-factor-auth-required",null,Et(a));throw new u("internal-error")}}function ya(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new u("internal-error")}else{if(!a.sessionInfo)throw new u("missing-verification-id");if(!a.code)throw new u("missing-verification-code")}}ta.prototype.s=function(a,b,t,e,n){var r=this;ea.then((function(){window.gapi.client.setApiKey(r.c);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:t,body:e,headers:n,authType:"none",callback:function(t){window.gapi.auth.setToken(g),b&&b(t)}})})).o((function(g){b&&b({error:{message:g&&g.message||"CORS_UNSUPPORTED"}})}))},ta.prototype.vb=function(){return ou(this,Wa,{})},ta.prototype.xb=function(a,b){return ou(this,Ha,{idToken:a,email:b})},ta.prototype.yb=function(a,b){return ou(this,Ka,{idToken:a,password:b})};var ma={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(a){if(!a.phoneVerificationInfo)throw new u("internal-error");if(!a.phoneVerificationInfo.sessionInfo)throw new u("missing-verification-id");if(!a.phoneVerificationInfo.code)throw new u("missing-verification-code")}function wa(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new u("internal-error")}function ba(a,b){return b.oauthIdToken&&b.providerId&&0==b.providerId.indexOf("oidc.")&&!b.pendingToken&&(a.sessionId?b.nonce=a.sessionId:a.postBody&&(ir(a=new Zn(a.postBody),"nonce")&&(b.nonce=a.get("nonce")))),b}function Ia(a){var b=null;if(a.needConfirmation?(a.code="account-exists-with-different-credential",b=Zo(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",b=Zo(a)):"EMAIL_EXISTS"==a.errorMessage?(a.code="email-already-in-use",b=Zo(a)):a.errorMessage&&(b=su(a.errorMessage)),b)throw b;va(a)}function Ea(a,b){return b.returnIdpCredential=!0,ou(a,Xa,b)}function _a(a,b){return b.returnIdpCredential=!0,ou(a,$a,b)}function Ta(a,b){return b.returnIdpCredential=!0,b.autoCreate=!1,ou(a,Qa,b)}function Aa(a){if(!a.oobCode)throw new u("invalid-action-code")}(e=ta.prototype).zb=function(a,b){var t={idToken:a},e=[];return bt(ma,(function(n,r){var g=b[r];null===g?e.push(n):r in b&&(t[r]=g)})),e.length&&(t.deleteAttribute=e),ou(this,Ha,t)},e.rb=function(a,b){return Tt(a={requestType:"PASSWORD_RESET",email:a},b),ou(this,Va,a)},e.sb=function(a,b){return Tt(a={requestType:"EMAIL_SIGNIN",email:a},b),ou(this,Ua,a)},e.qb=function(a,b){return Tt(a={requestType:"VERIFY_EMAIL",idToken:a},b),ou(this,ja,a)},e.Ab=function(a,b,t){return Tt(a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:b},t),ou(this,Fa,a)},e.cb=function(a){return ou(this,eu,a)},e.jb=function(a,b){return ou(this,Ga,{oobCode:a,newPassword:b})},e.Pa=function(a){return ou(this,Sa,{oobCode:a})},e.fb=function(a){return ou(this,Na,{oobCode:a})};var Na={endpoint:"setAccountInfo",A:Aa,Y:"email",C:!0},Sa={endpoint:"resetPassword",A:Aa,G:function(a){var b=a.requestType;if(!b||!a.email&&"EMAIL_SIGNIN"!=b&&"VERIFY_AND_CHANGE_EMAIL"!=b)throw new u("internal-error")},C:!0},ka={endpoint:"signupNewUser",A:function(a){if(pa(a),!a.password)throw new u("weak-password")},G:va,U:!0,C:!0},Oa={endpoint:"createAuthUri",C:!0},Da={endpoint:"deleteAccount",M:["idToken"]},Ra={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(a){if("array"!=m(a.deleteProvider))throw new u("internal-error")}},Ca={endpoint:"emailLinkSignin",M:["email","oobCode"],A:pa,G:va,U:!0,C:!0},Pa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:pa,G:va,U:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ga,G:va,C:!0,La:!0},La={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:va,C:!0,La:!0},Ma={endpoint:"getAccountInfo"},Ua={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(a){if("EMAIL_SIGNIN"!=a.requestType)throw new u("internal-error");pa(a)},Y:"email",C:!0},ja={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new u("internal-error")},Y:"email",C:!0},Fa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(a){if("VERIFY_AND_CHANGE_EMAIL"!=a.requestType)throw new u("internal-error")},Y:"email",C:!0},Va={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(a){if("PASSWORD_RESET"!=a.requestType)throw new u("internal-error");pa(a)},Y:"email",C:!0},qa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ba={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(a){if(!a.recaptchaSiteKey)throw new u("internal-error")}},Ga={endpoint:"resetPassword",A:Aa,Y:"email",C:!0},za={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Ha={endpoint:"setAccountInfo",M:["idToken"],A:da,U:!0},Ka={endpoint:"setAccountInfo",M:["idToken"],A:function(a){if(da(a),!a.password)throw new u("weak-password")},G:va,U:!0},Wa={endpoint:"signupNewUser",G:va,U:!0,C:!0},Ja={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(a){if(!a.phoneEnrollmentInfo)throw new u("internal-error");if(!a.phoneEnrollmentInfo.phoneNumber)throw new u("missing-phone-number");if(!a.phoneEnrollmentInfo.recaptchaToken)throw new u("missing-app-credential")},G:function(a){if(!a.phoneSessionInfo||!a.phoneSessionInfo.sessionInfo)throw new u("internal-error")},C:!0,La:!0},Ya={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(a){if(!a.phoneSignInInfo||!a.phoneSignInInfo.recaptchaToken)throw new u("missing-app-credential")},G:function(a){if(!a.phoneResponseInfo||!a.phoneResponseInfo.sessionInfo)throw new u("internal-error")},C:!0,La:!0},Xa={endpoint:"verifyAssertion",A:wa,Wa:ba,G:Ia,U:!0,C:!0},Qa={endpoint:"verifyAssertion",A:wa,Wa:ba,G:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new u("user-not-found");if(a.errorMessage)throw su(a.errorMessage);va(a)},U:!0,C:!0},$a={endpoint:"verifyAssertion",A:function(a){if(wa(a),!a.idToken)throw new u("internal-error")},Wa:ba,G:Ia,U:!0},Za={endpoint:"verifyCustomToken",A:function(a){if(!a.token)throw new u("invalid-custom-token")},G:va,U:!0,C:!0},tu={endpoint:"verifyPassword",A:function(a){if(pa(a),!a.password)throw new u("wrong-password")},G:va,U:!0,C:!0},eu={endpoint:"verifyPhoneNumber",A:ya,G:va,C:!0},nu={endpoint:"verifyPhoneNumber",A:function(a){if(!a.idToken)throw new u("internal-error");ya(a)},G:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",Zo(a);va(a)}},ru={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ya,G:va,C:!0},iu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(a){if(!!a[na]^!!a.refreshToken)throw new u("internal-error")},C:!0,La:!0};function ou(a,b,t){if(!function(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var t=0;t<b.length;t++){var e=a[b[t]];if(null==e||""===e)return!1}return!0}(t,b.M))return Le(new u("internal-error"));var e,n=!!b.La,r=b.Rb||"POST";return xe(t).then(b.A).then((function(){return b.U&&(t.returnSecureToken=!0),b.C&&a.b&&void 0===t.tenantId&&(t.tenantId=a.b),la(a,n?a.l:a.h,b.endpoint,r,t,b.Eb,b.hb||!1)})).then((function(g){return e=g,b.Wa?b.Wa(t,e):e})).then(b.G).then((function(){if(!b.Y)return e;if(!(b.Y in e))throw new u("internal-error");return e[b.Y]}))}function su(a){return au({error:{errors:[{message:a}],code:400,message:a}})}function au(a,b){var t=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",e={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(t=e[t]?new u(e[t]):null)return t;for(var n in t=a.error&&a.error.message||"",Tt(e={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},b||{}),b=(b=t.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<b.length?b[1]:void 0,e)if(0===t.indexOf(n))return new u(e[n],b);return!b&&a&&(b=qr(a)),new u("internal-error",b)}function uu(a){this.b=a,this.a=null,this.nb=function(a){return(lu||(lu=new Se((function(a,b){function t(){Kr(),Lr("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){Kr(),b(Error("Network Error"))},timeout:hu.get()})}if(Lr("gapi.iframes.Iframe"))a();else if(Lr("gapi.load"))t();else{var e="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[e]=function(){Lr("gapi.load")?t():b(Error("Network Error"))},xe(Ws(e=Pt(cu,{onload:e}))).o((function(){b(Error("Network Error"))}))}})).o((function(a){throw lu=null,a})))).then((function(){return new Se((function(b,t){Lr("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:Lr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(e){function n(){clearTimeout(r),b()}a.a=e,a.a.restyle({setHideOnLeave:!1});var r=setTimeout((function(){t(Error("Network Error"))}),fu.get());e.ping(n).then(n,(function(){t(Error("Network Error"))}))}))}))}))}(this)}var cu=new Nt(Ot,"https://apis.google.com/js/api.js?onload=%{onload}"),hu=new Wr(3e4,6e4),fu=new Wr(5e3,15e3),lu=null;function pu(a,b,t){this.i=a,this.g=b,this.h=t,this.f=null,this.a=zn(this.i,"/__/auth/iframe"),qn(this.a,"apiKey",this.g),qn(this.a,"appName",this.h),this.b=null,this.c=[]}function du(a,b,t,e,n){this.s=a,this.m=b,this.c=t,this.u=e,this.i=this.g=this.l=null,this.a=n,this.h=this.f=null}function vu(a){try{return r.a.app(a).auth().Ea()}catch(t){return[]}}function yu(a,b,t,e,n){this.u=a,this.f=b,this.b=t,this.c=e||null,this.h=n||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function mu(a){var b=vr();return function(a){return ou(a,qa,{}).then((function(b){return b.authorizedDomains||[]}))}(a).then((function(t){t:{var e=Gn(b),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var g=t[r],o=e,c=n;if(0==g.indexOf("chrome-extension://")?o=Gn(g).b==o&&"chrome-extension"==c:"http"!=c&&"https"!=c?o=!1:Ir.test(g)?o=o==g:(g=g.split(".").join("\\."),o=new RegExp("^(.+\\."+g+"|"+g+")$","i").test(o)),o){t=!0;break t}}t=!1}if(!t)throw new th(vr())}))}function gu(a){return a.l||(a.l=_r().then((function(){if(!a.s){var b=a.c,t=a.h,e=vu(a.b),n=new pu(a.u,a.f,a.b);n.f=b,n.b=t,n.c=it(e||[]),a.s=n.toString()}a.i=new uu(a.s),function(a){if(!a.i)throw Error("IfcHandler must be initialized!");!function(a,b){a.nb.then((function(){a.a.register("authEvent",b,Lr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(a.i,(function(b){var t={};if(b&&b.authEvent){var e=!1;for(b=Jo(b.authEvent),t=0;t<a.g.length;t++)e=a.g[t](b)||e;return(t={}).status=e?"ACK":"ERROR",xe(t)}return t.status="ERROR",xe(t)}))}(a)}))),a.l}function wu(a){return a.m||(a.w=a.c?Pr(a.c,vu(a.b)):null,a.m=new ta(a.f,M(a.h),a.w)),a.m}function bu(a,b,t,e,n,r,g,o,c,p,h){return(a=new du(a,b,t,e,n)).l=r,a.g=g,a.i=o,a.b=Et(c||null),a.f=p,a.ub(h).toString()}function Iu(a){if(this.a=a||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new u("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Eu(a){this.b=a,this.a={},this.f=S(this.c,this)}pu.prototype.toString=function(){return this.f?qn(this.a,"v",this.f):rr(this.a.a,"v"),this.b?qn(this.a,"eid",this.b):rr(this.a.a,"eid"),this.c.length?qn(this.a,"fw",this.c.join(",")):rr(this.a.a,"fw"),this.a.toString()},du.prototype.ub=function(a){return this.h=a,this},du.prototype.toString=function(){var a=zn(this.s,"/__/auth/handler");if(qn(a,"apiKey",this.m),qn(a,"appName",this.c),qn(a,"authType",this.u),this.a.isOAuthProvider){var b=this.a;try{var t=r.a.app(this.c).auth().ja()}catch(e){t=null}for(var e in b.kb=t,qn(a,"providerId",this.a.providerId),t=Br((b=this.a).Fb))t[e]=t[e].toString();e=b.Oc,t=Et(t);for(var n=0;n<e.length;n++){var o=e[n];o in t&&delete t[o]}b.lb&&b.kb&&!t[b.lb]&&(t[b.lb]=b.kb),It(t)||qn(a,"customParameters",qr(t))}if("function"==typeof this.a.Nb&&((b=this.a.Nb()).length&&qn(a,"scopes",b.join(","))),this.l?qn(a,"redirectUrl",this.l):rr(a.a,"redirectUrl"),this.g?qn(a,"eventId",this.g):rr(a.a,"eventId"),this.i?qn(a,"v",this.i):rr(a.a,"v"),this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!Bn(a,g)&&qn(a,g,this.b[g]);return this.h?qn(a,"tid",this.h):rr(a.a,"tid"),this.f?qn(a,"eid",this.f):rr(a.a,"eid"),(g=vu(this.c)).length&&qn(a,"fw",g.join(",")),a.toString()},(e=yu.prototype).Lb=function(a,b,t){var e=new u("popup-closed-by-user"),n=new u("web-storage-unsupported"),r=this,g=!1;return this.ka().then((function(){(function(a){var b={type:"webStorageSupport"};return gu(a).then((function(){return function(a,b){return a.nb.then((function(){return new Se((function(t){a.a.send(b.type,b,t,Lr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(a.i,b)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(r).then((function(t){t||(a&&gr(a),b(n),g=!0)}))})).o((function(){})).then((function(){if(!g)return function(a){return new Se((function(b){return function t(){Dn(2e3).then((function(){if(a&&!a.closed)return t();b()}))}()}))}(a)})).then((function(){if(!g)return Dn(t).then((function(){b(e)}))}))},e.Ub=function(){var a=xr();return!Vr(a)&&!Hr(a)},e.Qb=function(){return!1},e.Jb=function(a,b,t,e,n,r,g,o){if(!a)return Le(new u("popup-blocked"));if(g&&!Vr())return this.ka().o((function(p){gr(a),n(p)})),e(),xe();this.a||(this.a=mu(wu(this)));var c=this;return this.a.then((function(){var p=c.ka().o((function(t){throw gr(a),n(t),t}));return e(),p})).then((function(){(Ko(t),g)||yr(bu(c.u,c.f,c.b,b,t,null,r,c.c,void 0,c.h,o),a)})).o((function(p){throw"auth/network-request-failed"==p.code&&(c.a=null),p}))},e.Kb=function(a,b,t,e){this.a||(this.a=mu(wu(this)));var n=this;return this.a.then((function(){Ko(b),yr(bu(n.u,n.f,n.b,a,b,vr(),t,n.c,void 0,n.h,e))})).o((function(t){throw"auth/network-request-failed"==t.code&&(n.a=null),t}))},e.ka=function(){var a=this;return gu(this).then((function(){return a.i.nb})).o((function(){throw a.a=null,new u("network-request-failed")}))},e.Xb=function(){return!0},e.Ca=function(a){this.g.push(a)},e.Qa=function(a){et(this.g,(function(b){return b==a}))},(e=Iu.prototype).get=function(a){return xe(this.a.getItem(a)).then((function(b){return b&&Gr(b)}))},e.set=function(a,b){return xe(this.a.setItem(a,qr(b)))},e.T=function(a){return xe(this.a.removeItem(a))},e.ba=function(){},e.ha=function(){};var _u,Tu=[];function Au(a,b,t){It(a.a)&&a.b.addEventListener("message",a.f),void 0===a.a[b]&&(a.a[b]=[]),a.a[b].push(t)}function Nu(a){this.a=a}function Su(a){this.c=a,this.b=!1,this.a=[]}function ku(a,b,t,e){var n,g,r,o,c=t||{},p=null;if(a.b)return Le(Error("connection_unavailable"));var h=e?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Se((function(t,e){f?(n=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),r=setTimeout((function(){e(Error("unsupported_event"))}),h),p={messageChannel:f,onMessage:g=function(c){c.data.eventId===n&&("ack"===c.data.status?(clearTimeout(r),o=setTimeout((function(){e(Error("timeout"))}),3e3)):"done"===c.data.status?(clearTimeout(o),void 0!==c.data.response?t(c.data.response):e(Error("unknown_error"))):(clearTimeout(r),clearTimeout(o),e(Error("invalid_response"))))}},a.a.push(p),f.port1.addEventListener("message",g),a.c.postMessage({eventType:b,eventId:n,data:c},[f.port2])):e(Error("connection_unavailable"))})).then((function(t){return Ou(a,p),t})).o((function(t){throw Ou(a,p),t}))}function Ou(a,b){if(b){var t=b.messageChannel,e=b.onMessage;t&&(t.port1.removeEventListener("message",e),t.port1.close()),et(a.a,(function(t){return t==b}))}}function Du(){if(!Pu())throw new u("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var a=this;Nr()&&self?(this.l=function(){var a=Nr()?self:null;if(Y(Tu,(function(t){t.b==a&&(b=t)})),!b){var b=new Eu(a);Tu.push(b)}return b}(),Au(this.l,"keyChanged",(function(b,t){return ju(a).then((function(e){return 0<e.length&&Y(a.a,(function(t){t(e)})),{keyProcessed:Z(e,t.key)}}))})),Au(this.l,"ping",(function(){return xe(["keyChanged"])}))):function(){var a=l.navigator;return a&&a.serviceWorker?xe().then((function(){return a.serviceWorker.ready})).then((function(b){return b.active||null})).o((function(){return null})):xe(null)}().then((function(b){(a.h=b)&&(a.g=new Su(new Nu(b)),ku(a.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Z(t[0].value,"keyChanged")&&(a.s=!0)})).o((function(){})))}))}function Ru(a){return new Se((function(b,t){var e=a.u.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(t){}t(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){t(e)}},e.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?b(e):function(a){return new Se((function(b,t){var e=a.u.deleteDatabase("firebaseLocalStorageDb");e.onsuccess=function(){b()},e.onerror=function(e){t(Error(e.target.error))}}))}(a).then((function(){return Ru(a)})).then((function(t){b(t)})).o((function(e){t(e)}))}}))}function Cu(a){return a.m||(a.m=Ru(a)),a.m}function Pu(){try{return!!l.indexedDB}catch(t){return!1}}function xu(a){return a.objectStore("firebaseLocalStorage")}function Lu(a,b){return a.transaction(["firebaseLocalStorage"],b?"readwrite":"readonly")}function Mu(a){return new Se((function(b,t){a.onsuccess=function(t){t&&t.target?b(t.target.result):b()},a.onerror=function(e){t(e.target.error)}}))}function Uu(a,b){return a.g&&a.h&&function(){var a=l.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}()===a.h?ku(a.g,"keyChanged",{key:b},a.s).then((function(){})).o((function(){})):xe()}function ju(a){return Cu(a).then((function(b){var t=xu(Lu(b,!1));return t.getAll?Mu(t.getAll()):new Se((function(e,n){var r=[],g=t.openCursor();g.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},g.onerror=function(t){n(t.target.error)}}))})).then((function(b){var t={},e=[];if(0==a.b){for(e=0;e<b.length;e++)t[b[e].fbase_key]=b[e].value;e=function t(a,b){var e,n=[];for(e in a)e in b?typeof a[e]!=typeof b[e]?n.push(e):"object"==typeof a[e]&&null!=a[e]&&null!=b[e]?0<t(a[e],b[e]).length&&n.push(e):a[e]!==b[e]&&n.push(e):n.push(e);for(e in b)e in a||n.push(e);return n}(a.c,t),a.c=t}return e}))}function Fu(a){a.i&&a.i.cancel("STOP_EVENT"),a.f&&(clearTimeout(a.f),a.f=null)}function Vu(a){var b=this,t=null;this.a=[],this.type="indexedDB",this.c=a,this.b=xe().then((function(){if(Pu()){var e=zr(),n="__sak"+e;return _u||(_u=new Du),(t=_u).set(n,e).then((function(){return t.get(n)})).then((function(r){if(r!==e)throw Error("indexedDB not supported!");return t.T(n)})).then((function(){return t})).o((function(){return b.c}))}return b.c})).then((function(t){return b.type=t.type,t.ba((function(t){Y(b.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Bu(){if(!function(){var a="Node"==Sr();if(!(a=Gu()||a&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new u("internal-error","The LocalStorage compatibility library was not found.");throw new u("web-storage-unsupported")}this.a=Gu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Gu(){try{var a=l.localStorage,b=zr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function zu(){this.type="nullStorage"}function Hu(){if(!function(){var a="Node"==Sr();if(!(a=Ku()||a&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new u("internal-error","The SessionStorage compatibility library was not found.");throw new u("web-storage-unsupported")}this.a=Ku()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ku(){try{var a=l.sessionStorage,b=zr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function Wu(){var a={};a.Browser=Xu,a.Node=Qu,a.ReactNative=$u,a.Worker=Zu,this.a=a[Sr()]}Eu.prototype.c=function(a){var b=a.data.eventType,t=a.data.eventId,e=this.a[b];if(e&&0<e.length){a.ports[0].postMessage({status:"ack",eventId:t,eventType:b,response:null});var n=[];Y(e,(function(t){n.push(xe().then((function(){return t(a.origin,a.data.data)})))})),Ue(n).then((function(e){var g=[];Y(e,(function(t){g.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),Y(g,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),a.ports[0].postMessage({status:"done",eventId:t,eventType:b,response:g})}))}},Nu.prototype.postMessage=function(a,b){this.a.postMessage(a,b)},Su.prototype.close=function(){for(;0<this.a.length;)Ou(this,this.a[0]);this.b=!0},(e=Du.prototype).set=function(a,b){var t,e=!1,n=this;return Cu(this).then((function(e){return Mu((e=xu(Lu(t=e,!0))).get(a))})).then((function(r){var g=xu(Lu(t,!0));return r?(r.value=b,Mu(g.put(r))):(n.b++,e=!0,(r={}).fbase_key=a,r.value=b,Mu(g.add(r)))})).then((function(){return n.c[a]=b,Uu(n,a)})).ma((function(){e&&n.b--}))},e.get=function(a){return Cu(this).then((function(b){return Mu(xu(Lu(b,!1)).get(a))})).then((function(b){return b&&b.value}))},e.T=function(a){var b=!1,t=this;return Cu(this).then((function(e){return b=!0,t.b++,Mu(xu(Lu(e,!0)).delete(a))})).then((function(){return delete t.c[a],Uu(t,a)})).ma((function(){b&&t.b--}))},e.ba=function(a){0==this.a.length&&function(a){Fu(a),function b(){a.f=setTimeout((function(){a.i=ju(a).then((function(t){0<t.length&&Y(a.a,(function(e){e(t)}))})).then((function(){b()})).o((function(t){"STOP_EVENT"!=t.message&&b()}))}),800)}()}(this),this.a.push(a)},e.ha=function(a){et(this.a,(function(b){return b==a})),0==this.a.length&&Fu(this)},(e=Vu.prototype).get=function(a){return this.b.then((function(b){return b.get(a)}))},e.set=function(a,b){return this.b.then((function(t){return t.set(a,b)}))},e.T=function(a){return this.b.then((function(b){return b.T(a)}))},e.ba=function(a){this.a.push(a)},e.ha=function(a){et(this.a,(function(b){return b==a}))},(e=qu.prototype).get=function(a){return xe(this.a[a])},e.set=function(a,b){return this.a[a]=b,xe()},e.T=function(a){return delete this.a[a],xe()},e.ba=function(){},e.ha=function(){},(e=Bu.prototype).get=function(a){var b=this;return xe().then((function(){return Gr(b.a.getItem(a))}))},e.set=function(a,b){var t=this;return xe().then((function(){var e=qr(b);null===e?t.T(a):t.a.setItem(a,e)}))},e.T=function(a){var b=this;return xe().then((function(){b.a.removeItem(a)}))},e.ba=function(a){l.window&&dn(l.window,"storage",a)},e.ha=function(a){l.window&&td(l.window,"storage",a)},(e=zu.prototype).get=function(){return xe(null)},e.set=function(){return xe()},e.T=function(){return xe()},e.ba=function(){},e.ha=function(){},(e=Hu.prototype).get=function(a){var b=this;return xe().then((function(){return Gr(b.a.getItem(a))}))},e.set=function(a,b){var t=this;return xe().then((function(){var e=qr(b);null===e?t.T(a):t.a.setItem(a,e)}))},e.T=function(a){var b=this;return xe().then((function(){b.a.removeItem(a)}))},e.ba=function(){},e.ha=function(){};var Ju,Yu,Xu={F:Bu,$a:Hu},Qu={F:Bu,$a:Hu},$u={F:Iu,$a:zu},Zu={F:Bu,$a:zu},tc={od:"local",NONE:"none",qd:"session"};function ec(){var a=!(Hr(xr())||!Ar()),b=Vr(),t=Mr();this.m=a,this.h=b,this.l=t,this.a={},Ju||(Ju=new Wu),a=Ju;try{this.g=!dr()&&Xr()||!l.indexedDB?new a.a.F:new Vu(Nr()?new qu:new a.a.F)}catch(t){this.g=new qu,this.h=!0}try{this.i=new a.a.$a}catch(t){this.i=new qu}this.u=new qu,this.f=S(this.Vb,this),this.b={}}function nc(){return Yu||(Yu=new ec),Yu}function rc(a,b){switch(b){case"session":return a.i;case"none":return a.u;default:return a.g}}function ic(a,b){return"firebase:"+a.name+(b?":"+b:"")}function oc(a,b,t){return t=ic(b,t),"local"==b.F&&(a.b[t]=null),rc(a,b.F).T(t)}function sc(a){a.c&&(clearInterval(a.c),a.c=null)}function ac(a){this.a=a,this.b=nc()}(e=ec.prototype).get=function(a,b){return rc(this,a.F).get(ic(a,b))},e.set=function(a,b,t){var e=ic(a,t),n=this,r=rc(this,a.F);return r.set(e,b).then((function(){return r.get(e)})).then((function(g){"local"==a.F&&(n.b[e]=g)}))},e.addListener=function(a,b,t){a=ic(a,b),this.l&&(this.b[a]=l.localStorage.getItem(a)),It(this.a)&&(rc(this,"local").ba(this.f),this.h||(dr()||!Xr())&&l.indexedDB||!this.l||function(a){sc(a),a.c=setInterval((function(){for(var b in a.a){var t=l.localStorage.getItem(b),e=a.b[b];t!=e&&(a.b[b]=t,t=new rn({type:"storage",key:b,target:window,oldValue:e,newValue:t,a:!0}),a.Vb(t))}}),1e3)}(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(t)},e.removeListener=function(a,b,t){a=ic(a,b),this.a[a]&&(et(this.a[a],(function(e){return e==t})),0==this.a[a].length&&delete this.a[a]),It(this.a)&&(rc(this,"local").ha(this.f),sc(this))},e.Vb=function(a){if(a&&a.f){var b=a.a.key;if(null==b)for(var t in this.a){var e=this.b[t];void 0===e&&(e=null);var n=l.localStorage.getItem(t);n!==e&&(this.b[t]=n,this.ib(t))}else if(0==b.indexOf("firebase:")&&this.a[b]){if(void 0!==a.a.a?rc(this,"local").ha(this.f):sc(this),this.m)if(t=l.localStorage.getItem(b),(e=a.a.newValue)!==t)null!==e?l.localStorage.setItem(b,e):l.localStorage.removeItem(b);else if(this.b[b]===e&&void 0===a.a.a)return;var r=this;t=function(){void 0===a.a.a&&r.b[b]===l.localStorage.getItem(b)||(r.b[b]=l.localStorage.getItem(b),r.ib(b))},te&&ce&&10==ce&&l.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(t,10):t()}}else Y(a,S(this.ib,this))},e.ib=function(a){this.a[a]&&Y(this.a[a],(function(b){b()}))};var uc,cc={name:"authEvent",F:"local"};function hc(){this.a=nc()}function fc(a,b){this.b=lc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=a,this.h=b,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===uc&&(uc=l.Int32Array?new Int32Array(gc):gc),this.reset()}D(fc,(function(){this.b=-1}));for(var lc=64,dl=lc-1,pc=[],dc=0;dc<dl;dc++)pc[dc]=0;var vc=nt(128,pc);function yc(a){for(var b=a.f,t=a.l,e=0,n=0;n<b.length;)t[e++]=b[n]<<24|b[n+1]<<16|b[n+2]<<8|b[n+3],n=4*e;for(b=16;64>b;b++){n=0|t[b-15],e=0|t[b-2];var r=(0|t[b-16])+((n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3)|0,g=(0|t[b-7])+((e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)|0;t[b]=r+g|0}e=0|a.a[0],n=0|a.a[1];var o=0|a.a[2],c=0|a.a[3],p=0|a.a[4],h=0|a.a[5],f=0|a.a[6];for(r=0|a.a[7],b=0;64>b;b++){var l=((e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10))+(e&n^e&o^n&o)|0;g=(r=r+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))|0)+((g=(g=p&h^~p&f)+(0|uc[b])|0)+(0|t[b])|0)|0,r=f,f=h,h=p,p=c+g|0,c=o,o=n,n=e,e=g+l|0}a.a[0]=a.a[0]+e|0,a.a[1]=a.a[1]+n|0,a.a[2]=a.a[2]+o|0,a.a[3]=a.a[3]+c|0,a.a[4]=a.a[4]+p|0,a.a[5]=a.a[5]+h|0,a.a[6]=a.a[6]+f|0,a.a[7]=a.a[7]+r|0}function mc(a,b,t){void 0===t&&(t=b.length);var e=0,n=a.c;if("string"==typeof b)for(;e<t;)a.f[n++]=b.charCodeAt(e++),n==a.b&&(yc(a),n=0);else{if(!w(b))throw Error("message must be string or array");for(;e<t;){var r=b[e++];if(!("number"==typeof r&&0<=r&&255>=r&&r==(0|r)))throw Error("message must be a byte array");a.f[n++]=r,n==a.b&&(yc(a),n=0)}}a.c=n,a.g+=t}fc.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):it(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function wc(){fc.call(this,8,bc)}D(wc,fc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(a,b,t,e,n){this.u=a,this.i=b,this.l=t,this.m=e||null,this.s=n||null,this.h=b+":"+t,this.w=new hc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(a){return new u("invalid-cordova-configuration",a)}function ol(a){var b=new wc;mc(b,a),a=[];var t=8*b.g;56>b.c?mc(b,vc,56-b.c):mc(b,vc,b.b-(b.c-56));for(var e=63;56<=e;e--)b.f[e]=255&t,t/=256;for(yc(b),e=t=0;e<b.i;e++)for(var n=24;0<=n;n-=8)a[t++]=b.a[e]>>n&255;return function(a){return Q(a,(function(b){return 1<(b=b.toString(16)).length?b:"0"+b})).join("")}(a)}function _c(a,b){for(var t=0;t<a.b.length;t++)try{a.b[t](b)}catch(t){}}function Tc(a){return a.f||(a.f=a.ka().then((function(){return new Se((function(b){a.Ca((function t(e){return b(e),a.Qa(t),!1})),function(a){function b(g){e=!0,n&&n.cancel(),Ac(a).then((function(e){var n=t;if(e&&g&&g.url){var p=null;-1!=(n=fo(g.url)).indexOf("/__/auth/callback")&&(p=(p="object"==typeof(p=Gr(Bn(p=Gn(n),"firebaseError")||null))?R(p):null)?new Wo(e.c,e.b,null,null,p,null,e.S()):new Wo(e.c,e.b,n,e.f,null,null,e.S())),n=p||t}_c(a,n)}))}var t=new Wo("unknown",null,null,null,new u("no-auth-event")),e=!1,n=Dn(500).then((function(){return Ac(a).then((function(){e||_c(a,t)}))})),r=l.handleOpenURL;l.handleOpenURL=function(g){if(0==g.toLowerCase().indexOf(Lr("BuildInfo.packageName",l).toLowerCase()+"://")&&b({url:g}),"function"==typeof r)try{r(g)}catch(t){console.error(t)}},Qo||(Qo=new Yo),function(a){var b=Qo;b.a.push(a),b.b||(b.b=function(t){for(var e=0;e<b.a.length;e++)b.a[e](t)},"function"==typeof(a=Lr("universalLinks.subscribe",l))&&a(null,b.b))}(b)}(a)}))}))),a.f}function Ac(a){var b=null;return function(a){return a.b.get(cc,a.a).then((function(b){return Jo(b)}))}(a.g).then((function(t){return b=t,oc((t=a.g).b,cc,t.a)})).then((function(){return b}))}function ul(a){this.a=a,this.b=nc()}(e=Ic.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(Tr(void 0)?_r().then((function(){return new Se((function(a,b){var t=l.document,e=setTimeout((function(){b(Error("Cordova framework is not ready."))}),1e3);t.addEventListener("deviceready",(function(){clearTimeout(e),a()}),!1)}))})):Le(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Lr("universalLinks.subscribe",l))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Lr("BuildInfo.packageName",l))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Lr("cordova.plugins.browsertab.openUrl",l))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Lr("cordova.InAppBrowser.open",l))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new u("cordova-not-ready")}))},e.Lb=function(a,b){return b(new u("operation-not-supported-in-this-environment")),xe()},e.Jb=function(){return Le(new u("operation-not-supported-in-this-environment"))},e.Xb=function(){return!1},e.Ub=function(){return!0},e.Qb=function(){return!0},e.Kb=function(a,b,t,e){if(this.c)return Le(new u("redirect-operation-pending"));var n=this,r=l.document,g=null,o=null,c=null,p=null;return this.c=xe().then((function(){return Ko(b),Tc(n)})).then((function(){return function(a,b,t,e,n){var r=function(){for(var a=20,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}(),g=new Wo(b,e,null,r,new u("no-auth-event"),null,n),o=Lr("BuildInfo.packageName",l);if("string"!=typeof o)throw new u("invalid-cordova-configuration");var c=Lr("BuildInfo.displayName",l),p={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))p.ibi=o;else{if(!xr().toLowerCase().match(/android/))return Le(new u("operation-not-supported-in-this-environment"));p.apn=o}c&&(p.appDisplayName=c),r=ol(r),p.sessionId=r;var h=bu(a.u,a.i,a.l,b,t,null,e,a.m,p,a.s,n);return a.ka().then((function(){var t=a.h;return a.w.a.set(cc,g.v(),t)})).then((function(){var t=Lr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new u("invalid-cordova-configuration");var e=null;t((function(t){if(t){if("function"!=typeof(e=Lr("cordova.plugins.browsertab.openUrl",l)))throw new u("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=Lr("cordova.InAppBrowser.open",l)))throw new u("invalid-cordova-configuration");t=xr(),a.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(n,a,b,t,e)})).then((function(){return new Se((function(t,e){o=function(){var e=Lr("cordova.plugins.browsertab.close",l);return t(),"function"==typeof e&&e(),n.a&&"function"==typeof n.a.close&&(n.a.close(),n.a=null),!1},n.Ca(o),c=function(){g||(g=Dn(2e3).then((function(){e(new u("redirect-cancelled-by-user"))})))},p=function(){Jr()&&c()},r.addEventListener("resume",c,!1),xr().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",p,!1)})).o((function(t){return Ac(n).then((function(){throw t}))}))})).ma((function(){c&&r.removeEventListener("resume",c,!1),p&&r.removeEventListener("visibilitychange",p,!1),g&&g.cancel(),o&&n.Qa(o),n.c=null}))},e.Ca=function(a){this.b.push(a),Tc(this).o((function(b){"auth/invalid-cordova-configuration"===b.code&&(b=new Wo("unknown",null,null,null,new u("no-auth-event")),a(b))}))},e.Qa=function(a){et(this.b,(function(b){return b==a}))};var Nc={name:"pendingRedirect",F:"session"};function Sc(a){return oc(a.b,Nc,a.a)}function kc(a,b,t){this.i={},this.w=0,this.D=a,this.u=b,this.m=t,this.h=[],this.f=!1,this.l=S(this.s,this),this.b=new Bc,this.B=new Wc,this.g=new ul(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Oc(this.D,this.u,this.m,C)}function Oc(a,b,t,e){var n=r.a.SDK_VERSION||null;return Tr()?new Ic(a,b,t,n,e):new yu(a,b,t,n,e)}function Dc(a){a.f||(a.f=!0,a.a.Ca(a.l));var b=a.a;return a.a.ka().o((function(t){throw a.a==b&&a.reset(),t}))}function Rc(a){a.a.Ub()&&Dc(a).o((function(b){var t=new Wo("unknown",null,null,null,new u("operation-not-supported-in-this-environment"));Uc(b)&&a.s(t)})),a.a.Qb()||Gc(a.b)}function Cc(a,b){Z(a.h,b)||a.h.push(b),a.f||function(a){return a.b.get(Nc,a.a).then((function(b){return"pending"==b}))}(a.g).then((function(t){t?Sc(a.g).then((function(){Dc(a).o((function(t){var e=new Wo("unknown",null,null,null,new u("operation-not-supported-in-this-environment"));Uc(t)&&a.s(e)}))})):Rc(a)})).o((function(){Rc(a)}))}function Pc(a,b){et(a.h,(function(t){return t==b}))}kc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Oc(this.D,this.u,this.m),this.i={}},kc.prototype.s=function(a){if(!a)throw new u("invalid-auth-event");if(6e5<=O()-this.w&&(this.i={},this.w=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var b=!1,t=0;t<this.h.length;t++){var e=this.h[t];if(e.Cb(a.c,a.b)){(b=this.c[a.c])&&(b.h(a,e),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.w=O())),b=!0;break}}return Gc(this.b),b};var xc=new Wr(2e3,1e4),Lc=new Wr(3e4,6e4);function Mc(a,b,t,e,n,r,g){return a.a.Jb(b,t,e,(function(){a.f||(a.f=!0,a.a.Ca(a.l))}),(function(){a.reset()}),n,r,g)}function Uc(a){return!(!a||"auth/cordova-not-ready"!=a.code)}function jc(a,b,t,e,n){var r;return function(a){return a.b.set(Nc,"pending",a.a)}(a.g).then((function(){return a.a.Kb(b,t,e,n).o((function(g){if(Uc(g))throw new u("operation-not-supported-in-this-environment");return r=g,Sc(a.g).then((function(){throw r}))})).then((function(){return a.a.Xb()?new Se((function(){})):Sc(a.g).then((function(){return a.pa()})).then((function(){})).o((function(){}))}))}))}function Fc(a,b,t,e,n){return a.a.Lb(e,(function(e){b.la(t,null,e,n)}),xc.get())}kc.prototype.pa=function(){return this.b.pa()};var Vc={};function qc(a,b,t){var e=b+":"+t;return Vc[e]||(Vc[e]=new kc(a,b,t)),Vc[e]}function Bc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Gc(a){a.g||(a.g=!0,Kc(a,!1,null,null))}function zc(a){a.g&&!a.i&&Kc(a,!1,null,null)}function Hc(a,b){if(a.b=function(){return xe(b)},a.f.length)for(var t=0;t<a.f.length;t++)a.f[t](b)}function Kc(a,b,t,e){b?e?function(a,b){if(a.b=function(){return Le(b)},a.c.length)for(var t=0;t<a.c.length;t++)a.c[t](b)}(a,e):Hc(a,t):Hc(a,{user:null}),a.f=[],a.c=[]}function Wc(){}function Jc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(a){this.Bb=a},enumerable:!1})}function Yc(a,b){this.a=b,ei(this,"verificationId",a)}function Xc(a,b,t,e){return new Go(a).cb(b,t).then((function(t){return new Yc(t,e)}))}function Qc(a){var b=Qi(a);if(!(b&&b.exp&&b.auth_time&&b.iat))throw new u("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ni(this,{token:a,expirationTime:Yr(1e3*b.exp),authTime:Yr(1e3*b.auth_time),issuedAtTime:Yr(1e3*b.iat),signInProvider:b.firebase&&b.firebase.sign_in_provider?b.firebase.sign_in_provider:null,signInSecondFactor:b.firebase&&b.firebase.sign_in_second_factor?b.firebase.sign_in_second_factor:null,claims:b})}function $c(a,b,t){var e=b&&b[eh];if(!e)throw new u("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=a,this.f=Et(b),this.g=t,this.c=new lo(null,e),this.b=[];var n=this;Y(b[Zc]||[],(function(t){(t=si(t))&&n.b.push(t)})),ei(this,"auth",this.a),ei(this,"session",this.c),ei(this,"hints",this.b)}Bc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Bc.prototype.h=function(a,b){if(a){this.reset(),this.g=!0;var t=a.c,e=a.b,n=a.a&&"auth/web-storage-unsupported"==a.a.code,r=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;this.i=!(!n&&!r),"unknown"!=t||n||r?a.a?(Kc(this,!0,null,a.a),xe()):b.Da(t,e)?function(a,b,t){t=t.Da(b.c,b.b);var e=b.g,n=b.f,r=b.i,g=b.S(),o=!!b.c.match(/Redirect$/);t(e,n,g,r).then((function(t){Kc(a,o,t,null)})).o((function(t){Kc(a,o,null,t)}))}(this,a,b):Le(new u("invalid-auth-event")):(Kc(this,!1,null,null),xe())}else Le(new u("invalid-auth-event"))},Bc.prototype.pa=function(){var a=this;return new Se((function(b,t){a.b?a.b().then(b,t):(a.f.push(b),a.c.push(t),function(a){var b=new u("timeout");a.a&&a.a.cancel(),a.a=Dn(Lc.get()).then((function(){a.b||(a.g=!0,Kc(a,!0,null,b))}))}(a))}))},Wc.prototype.h=function(a,b){if(a){var t=a.c,e=a.b;a.a?(b.la(a.c,null,a.a,a.b),xe()):b.Da(t,e)?function(a,b){var t=a.b,e=a.c;b.Da(e,t)(a.g,a.f,a.S(),a.i).then((function(n){b.la(e,n,null,t)})).o((function(n){b.la(e,null,n,t)}))}(a,b):Le(new u("invalid-auth-event"))}else Le(new u("invalid-auth-event"))},Yc.prototype.confirm=function(a){return a=zo(this.verificationId,a),this.a(a)};var Zc="mfaInfo",eh="mfaPendingCredential";function nh(a,b,t,e){u.call(this,"multi-factor-auth-required",e,b),this.b=new $c(a,b,t),ei(this,"resolver",this.b)}function em(a,b,t){if(a&&q(a.serverResponse)&&"auth/multi-factor-auth-required"===a.code)try{return new nh(b,a.serverResponse,t,a.message)}catch(t){}return null}function rh(){}function ih(a){ei(this,"factorId",a.ea),this.a=a}function oh(a){if(ih.call(this,a),this.a.ea!=Go.PROVIDER_ID)throw new u("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function sh(a,b){for(var t in nn.call(this,a),b)this[t]=b[t]}function ah(a,b){this.a=a,this.b=[],this.c=S(this.wc,this),dn(this.a,"userReloaded",this.c);var t=[];b&&b.multiFactor&&b.multiFactor.enrolledFactors&&Y(b.multiFactor.enrolledFactors,(function(e){var n=null,r={};if(e){e.uid&&(r[ci]=e.uid),e.displayName&&(r[ai]=e.displayName),e.enrollmentTime&&(r[ui]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[hi]=e.phoneNumber);try{n=new fi(r)}catch(t){}e=n}else e=null;e&&t.push(e)})),uh(this,t)}function uh(a,b){a.b=b,ei(a,"enrolledFactors",b)}function ch(a,b,t){if(this.h=a,this.i=b,this.g=t,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function hh(a){this.c=a,this.b=this.a=null}function fh(a){return a.b&&1e3*a.b.c||0}function lh(a,b){var t=b.refreshToken;a.b=Xi(b[na]||""),a.a=t}function ph(a,b){return function(a,b){return new Se((function(t,e){"refresh_token"==b.grant_type&&b.refresh_token||"authorization_code"==b.grant_type&&b.code?ca(a,a.u+"?key="+encodeURIComponent(a.c),(function(n){n?n.error?e(au(n)):n.access_token&&n.refresh_token?t(n):e(new u("internal-error")):e(new u("network-request-failed"))}),"POST",nr(b).toString(),a.g,a.m.get()):e(new u("internal-error"))}))}(a.c,b).then((function(t){return a.b=Xi(t.access_token),a.a=t.refresh_token,{accessToken:a.b.toString(),refreshToken:a.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(a.a=null),t}))}function dh(a,b){this.a=a||null,this.b=b||null,ni(this,{lastSignInTime:Yr(b||null),creationTime:Yr(a||null)})}function vh(a,b,t,e,n,r){ni(this,{uid:a,displayName:e||null,photoURL:n||null,email:t||null,phoneNumber:r||null,providerId:b})}function yh(a,b,t){this.N=[],this.l=a.apiKey,this.m=a.appName,this.s=a.authDomain||null,a=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION):null,this.a=new ta(this.l,M(C),a),this.b=new hh(this.a),_h(this,b[na]),lh(this.b,b),ei(this,"refreshToken",this.b.a),Nh(this,t||{}),An.call(this),this.P=!1,this.s&&Ur()&&(this.i=qc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(a){return new ch((function(){return a.I(!0)}),(function(b){return!(!b||"auth/network-request-failed"!=b.code)}),(function(){var b=fh(a.b)-O()-3e5;return 0<b?b:0}))}(this),this.Z=S(this.Ma,this);var e=this;this.oa=null,this.za=function(t){e.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){gh(e,t.c)},this.$=null,this.O=new ah(this,t),ei(this,"multiFactor",this.O)}function mh(a,b){a.aa&&td(a.aa,"languageCodeChanged",a.za),(a.aa=b)&&dn(b,"languageCodeChanged",a.za)}function gh(a,b){a.W=b,ua(a.a,r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,a.W):null)}function wh(a,b){a.$&&td(a.$,"frameworkChanged",a.ya),(a.$=b)&&dn(b,"frameworkChanged",a.ya)}function bh(a){try{return r.a.app(a.m).auth()}catch(t){throw new u("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.m+"'!")}}function Ih(a){a.D||a.B.b||(a.B.start(),td(a,"tokenChanged",a.Z),dn(a,"tokenChanged",a.Z))}function Eh(a){td(a,"tokenChanged",a.Z),a.B.stop()}function _h(a,b){a.xa=b,ei(a,"_lat",b)}function Th(a){for(var b=[],t=0;t<a.R.length;t++)b.push(a.R[t](a));return Ue(b).then((function(){return a}))}function Ah(a){a.i&&!a.P&&(a.P=!0,Cc(a.i,a))}function Nh(a,b){ni(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,tenantId:b.tenantId||null,metadata:new dh(b.createdAt,b.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}function Sh(){}function kh(a){return xe().then((function(){if(a.D)throw new u("app-deleted")}))}function Oh(a){return Q(a.providerData,(function(b){return b.providerId}))}function Dh(a,b){b&&(Rh(a,b.providerId),a.providerData.push(b))}function Rh(a,b){et(a.providerData,(function(t){return t.providerId==b}))}function Ch(a,b,t){("uid"!=b||t)&&a.hasOwnProperty(b)&&ei(a,b,t)}function Ph(a,b){a!=b&&(ni(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,tenantId:b.tenantId,providerData:[]}),b.metadata?ei(a,"metadata",function(a){return new dh(a.a,a.b)}(b.metadata)):ei(a,"metadata",new dh),Y(b.providerData,(function(t){Dh(a,t)})),function(a,b){a.b=b.b,a.a=b.a}(a.b,b.b),ei(a,"refreshToken",a.b.a),uh(a.O,b.O.b))}function xh(a){return a.I().then((function(b){var t=a.isAnonymous;return function(a,b){return ou(a.a,Ma,{idToken:b}).then(S(a.Ic,a))}(a,b).then((function(){return t||Ch(a,"isAnonymous",!1),b}))}))}function Lh(a,b){b[na]&&a.xa!=b[na]&&(lh(a.b,b),a.dispatchEvent(new sh("tokenChanged")),_h(a,b[na]),Ch(a,"refreshToken",a.b.a))}function Mh(a,b){return xh(a).then((function(){if(Z(Oh(a),b))return Th(a).then((function(){throw new u("provider-already-linked")}))}))}function Uh(a,b,t){return ri({user:a,credential:Ho(b),additionalUserInfo:b=no(b),operationType:t})}function jh(a,b){return Lh(a,b),a.reload().then((function(){return a}))}function Fh(a,b,t,e,n){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));if(a.h&&!n)return Le(a.h);var o=eo(t.providerId),g=zr(a.uid+":::"),c=null;(!Vr()||Ar())&&a.s&&t.isOAuthProvider&&(c=bu(a.s,a.l,a.m,b,t,null,g,r.a.SDK_VERSION||null,null,null,a.tenantId));var h=wr(c,o&&o.ta,o&&o.sa);return e=e().then((function(){if(qh(a),!n)return a.I().then((function(){}))})).then((function(){return Mc(a.i,h,b,t,g,!!c,a.tenantId)})).then((function(){return new Se((function(p,t){a.la(b,null,new u("cancelled-popup-request"),a.g||null),a.f=p,a.w=t,a.g=g,a.c=Fc(a.i,a,b,h,g)}))})).then((function(p){return h&&gr(h),p?ri(p):null})).o((function(p){throw h&&gr(h),p})),Bh(a,e,n)}function Vh(a,b,t,e,n){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));if(a.h&&!n)return Le(a.h);var r=null,g=zr(a.uid+":::");return e=e().then((function(){if(qh(a),!n)return a.I().then((function(){}))})).then((function(){return a.fa=g,Th(a)})).then((function(t){return a.ga&&(t=(t=a.ga).b.set(Hh,a.v(),t.a)),t})).then((function(){return jc(a.i,b,t,g,a.tenantId)})).o((function(t){if(r=t,a.ga)return Kh(a.ga);throw r})).then((function(){if(r)throw r})),Bh(a,e,n)}function qh(a){if(!a.i||!a.P){if(a.i&&!a.P)throw new u("internal-error");throw new u("auth-domain-config-required")}}function Bh(a,b,t){var e=function(a,b,t){return a.h&&!t?(b.cancel(),Le(a.h)):b.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(a.h||a.dispatchEvent(new sh("userInvalidated")),a.h=t),t}))}(a,b,t);return a.N.push(e),e.ma((function(){tt(a.N,e)})),e.o((function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=em(t.v(),bh(a),S(a.hc,a))),e||t}))}function Gh(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName},t={};if(!a.stsTokenManager||!a.stsTokenManager.accessToken)return null;t[na]=a.stsTokenManager.accessToken,t.refreshToken=a.stsTokenManager.refreshToken||null;var e=new yh(b,t,a);return a.providerData&&Y(a.providerData,(function(t){t&&Dh(e,ri(t))})),a.redirectEventId&&(e.fa=a.redirectEventId),e}function zh(a){this.a=a,this.b=nc()}$c.prototype.Pc=function(a){var b=this;return a.ob(this.a.b,this.c).then((function(t){var e=Et(b.f);return delete e[Zc],delete e[eh],Tt(e,t),b.g(e)}))},D(nh,u),rh.prototype.ob=function(a,b,t){return b.type==po?function(a,b,t,e){return t.Fa().then((function(t){return t={idToken:t},void 0!==e&&(t.displayName=e),Tt(t,{phoneVerificationInfo:Bo(a.a)}),ou(b,xa,t)}))}(this,a,b,t):function(a,b,t){return t.Fa().then((function(t){return Tt(t={mfaPendingCredential:t},{phoneVerificationInfo:Bo(a.a)}),ou(b,La,t)}))}(this,a,b)},D(ih,rh),D(oh,ih),D(sh,nn),(e=ah.prototype).wc=function(a){uh(this,function(a){var b=[];return Y(a.mfaInfo||[],(function(t){(t=si(t))&&b.push(t)})),b}(a.ed))},e.Ob=function(){return this.a.I().then((function(a){return new lo(a,null)}))},e.dc=function(a,b){var t=this,e=this.a.a;return this.Ob().then((function(t){return a.ob(e,t,b)})).then((function(e){return Lh(t.a,e),t.a.reload()}))},e.$c=function(a){var b=this,t="string"==typeof a?a:a.uid,e=this.a.a;return this.a.I().then((function(n){return ou(e,iu,{idToken:n,mfaEnrollmentId:t})})).then((function(e){var n=X(b.b,(function(g){return g.uid!=t}));return uh(b,n),Lh(b.a,e),b.a.reload().o((function(g){if("auth/user-token-expired"!=g.code)throw g}))}))},e.v=function(){return{multiFactor:{enrolledFactors:Q(this.b,(function(a){return a.v()}))}}},ch.prototype.start=function(){this.a=this.c,function t(a,b){a.stop(),a.b=Dn(function(a,b){return b?(a.a=a.c,a.g()):(b=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),b)}(a,b)).then((function(){return function(){var a=l.document,b=null;return Jr()||!a?xe():new Se((function(t){b=function(){Jr()&&(a.removeEventListener("visibilitychange",b,!1),t())},a.addEventListener("visibilitychange",b,!1)})).o((function(t){throw a.removeEventListener("visibilitychange",b,!1),t}))}()})).then((function(){return a.h()})).then((function(){t(a,!0)})).o((function(e){a.i(e)&&t(a,!1)}))}(this,!0)},ch.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},hh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:fh(this)}},hh.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?Le(new u("user-token-expired")):a||!this.b||O()>fh(this)-3e4?this.a?ph(this,{grant_type:"refresh_token",refresh_token:this.a}):xe(null):xe({accessToken:this.b.toString(),refreshToken:this.a})},dh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},D(yh,An),yh.prototype.va=function(a){this.oa=a,aa(this.a,a)},yh.prototype.ja=function(){return this.oa},yh.prototype.Ea=function(){return it(this.W)},yh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},ei(yh.prototype,"providerId","firebase"),(e=yh.prototype).reload=function(){var a=this;return Bh(this,kh(this).then((function(){return xh(a).then((function(){return Th(a)})).then(Sh)})))},e.mc=function(a){return this.I(a).then((function(b){return new Qc(b)}))},e.I=function(a){var b=this;return Bh(this,kh(this).then((function(){return b.b.getToken(a)})).then((function(t){if(!t)throw new u("internal-error");return t.accessToken!=b.xa&&(_h(b,t.accessToken),b.dispatchEvent(new sh("tokenChanged"))),Ch(b,"refreshToken",t.refreshToken),t.accessToken})))},e.Ic=function(a){if(!(a=a.users)||!a.length)throw new u("internal-error");Nh(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var b=function(a){return(a=a.providerUserInfo)&&a.length?Q(a,(function(b){return new vh(b.rawId,b.providerId,b.email,b.displayName,b.photoUrl,b.phoneNumber)})):[]}(a),t=0;t<b.length;t++)Dh(this,b[t]);Ch(this,"isAnonymous",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new sh("userReloaded",{ed:a}))},e.Jc=function(a){return Zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(a)},e.pb=function(a){var b=this,t=null;return Bh(this,a.c(this.a,this.uid).then((function(e){return Lh(b,e),t=Uh(b,e,"reauthenticate"),b.h=null,b.reload()})).then((function(){return t})),!0)},e.Ac=function(a){return Zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(a)},e.mb=function(a){var b=this,t=null;return Bh(this,Mh(this,a.providerId).then((function(){return b.I()})).then((function(t){return a.b(b.a,t)})).then((function(e){return t=Uh(b,e,"link"),jh(b,e)})).then((function(){return t})))},e.Bc=function(a,b){var t=this;return Bh(this,Mh(this,"phone").then((function(){return Xc(bh(t),a,b,S(t.mb,t))})))},e.Kc=function(a,b){var t=this;return Bh(this,xe().then((function(){return Xc(bh(t),a,b,S(t.pb,t))})),!0)},e.xb=function(a){var b=this;return Bh(this,this.I().then((function(t){return b.a.xb(t,a)})).then((function(t){return Lh(b,t),b.reload()})))},e.cd=function(a){var b=this;return Bh(this,this.I().then((function(t){return a.b(b.a,t)})).then((function(t){return Lh(b,t),b.reload()})))},e.yb=function(a){var b=this;return Bh(this,this.I().then((function(t){return b.a.yb(t,a)})).then((function(t){return Lh(b,t),b.reload()})))},e.zb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return kh(this);var b=this;return Bh(this,this.I().then((function(t){return b.a.zb(t,{displayName:a.displayName,photoUrl:a.photoURL})})).then((function(t){return Lh(b,t),Ch(b,"displayName",t.displayName||null),Ch(b,"photoURL",t.photoUrl||null),Y(b.providerData,(function(t){"password"===t.providerId&&(ei(t,"displayName",b.displayName),ei(t,"photoURL",b.photoURL))})),Th(b)})).then(Sh))},e.ad=function(a){var b=this;return Bh(this,xh(this).then((function(t){return Z(Oh(b),a)?function(a,b,t){return ou(a,Ra,{idToken:b,deleteProvider:t})}(b.a,t,[a]).then((function(t){var e={};return Y(t.providerUserInfo||[],(function(t){e[t.providerId]=!0})),Y(Oh(b),(function(t){e[t]||Rh(b,t)})),e[Go.PROVIDER_ID]||ei(b,"phoneNumber",null),Th(b)})):Th(b).then((function(){throw new u("no-such-provider")}))})))},e.delete=function(){var a=this;return Bh(this,this.I().then((function(b){return ou(a.a,Da,{idToken:b})})).then((function(){a.dispatchEvent(new sh("userDeleted"))}))).then((function(){for(var b=0;b<a.N.length;b++)a.N[b].cancel("app-deleted");mh(a,null),wh(a,null),a.N=[],a.D=!0,Eh(a),ei(a,"refreshToken",null),a.i&&Pc(a.i,a)}))},e.Cb=function(a,b){return!!("linkViaPopup"==a&&(this.g||null)==b&&this.f||"reauthViaPopup"==a&&(this.g||null)==b&&this.f||"linkViaRedirect"==a&&(this.fa||null)==b||"reauthViaRedirect"==a&&(this.fa||null)==b)},e.la=function(a,b,t,e){"linkViaPopup"!=a&&"reauthViaPopup"!=a||e!=(this.g||null)||(t&&this.w?this.w(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(a,b){return"linkViaPopup"==a&&b==(this.g||null)?S(this.Hb,this):"reauthViaPopup"==a&&b==(this.g||null)?S(this.Ib,this):"linkViaRedirect"==a&&(this.fa||null)==b?S(this.Hb,this):"reauthViaRedirect"==a&&(this.fa||null)==b?S(this.Ib,this):null},e.Cc=function(a){var b=this;return Fh(this,"linkViaPopup",a,(function(){return Mh(b,a.providerId).then((function(){return Th(b)}))}),!1)},e.Lc=function(a){return Fh(this,"reauthViaPopup",a,(function(){return xe()}),!0)},e.Dc=function(a){var b=this;return Vh(this,"linkViaRedirect",a,(function(){return Mh(b,a.providerId)}),!1)},e.Mc=function(a){return Vh(this,"reauthViaRedirect",a,(function(){return xe()}),!0)},e.Hb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Bh(this,this.I().then((function(g){return _a(n.a,{requestUri:a,postBody:e,sessionId:b,idToken:g})})).then((function(g){return r=Uh(n,g,"link"),jh(n,g)})).then((function(){return r})))},e.Ib=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Bh(this,xe().then((function(){return mo(Ta(n.a,{requestUri:a,sessionId:b,postBody:e,tenantId:t}),n.uid)})).then((function(t){return r=Uh(n,t,"reauthenticate"),Lh(n,t),n.h=null,n.reload()})).then((function(){return r})),!0)},e.qb=function(a){var b=this,t=null;return Bh(this,this.I().then((function(e){return t=e,void 0===a||It(a)?{}:Ki(new Mi(a))})).then((function(e){return b.a.qb(t,e)})).then((function(t){if(b.email!=t)return b.reload()})).then((function(){})))},e.Ab=function(a,b){var t=this,e=null;return Bh(this,this.I().then((function(t){return e=t,void 0===b||It(b)?{}:Ki(new Mi(b))})).then((function(n){return t.a.Ab(e,a,n)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.hc=function(a){var b=null,t=this;return Bh(this,a=mo(xe(a),t.uid).then((function(e){return b=Uh(t,e,"reauthenticate"),Lh(t,e),t.h=null,t.reload()})).then((function(){return b})),!0)},e.toJSON=function(){return this.v()},e.v=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&Tt(a,this.metadata.v()),Y(this.providerData,(function(b){a.providerData.push(function(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&(b[t]=a[t]);return b}(b))})),Tt(a,this.O.v()),a};var Hh={name:"redirectUser",F:"session"};function Kh(a){return oc(a.b,Hh,a.a)}function Wh(a){this.a=a,this.b=nc(),this.c=null,this.f=function(a){var b=Xh("local"),t=Xh("session"),e=Xh("none");return function(a,b,t){var e=ic(b,t),n=rc(a,b.F);return a.get(b,t).then((function(r){var g=null;try{g=Gr(l.localStorage.getItem(e))}catch(t){}if(g&&!r)return l.localStorage.removeItem(e),a.set(b,g,t);g&&r&&"localStorage"!=n.type&&l.localStorage.removeItem(e)}))}(a.b,b,a.a).then((function(){return a.b.get(t,a.a)})).then((function(n){return n?t:a.b.get(e,a.a).then((function(t){return t?e:a.b.get(b,a.a).then((function(g){return g?b:a.b.get(Yh,a.a).then((function(t){return t?Xh(t):b}))}))}))})).then((function(t){return a.c=t,Jh(a,t.F)})).o((function(){a.c||(a.c=b)}))}(this),this.b.addListener(Xh("local"),this.a,S(this.g,this))}function Jh(a,b){var t,e=[];for(t in tc)tc[t]!==b&&e.push(oc(a.b,Xh(tc[t]),a.a));return e.push(oc(a.b,Yh,a.a)),function(a){return new Se((function(b,t){var e=a.length,n=[];if(e)for(var r=function(p,t){e--,n[p]=t,0==e&&b(n)},g=function(p){t(p)},o=0;o<a.length;o++)Me(a[o],k(r,o),g);else b(n)}))}(e)}Wh.prototype.g=function(){var a=this,b=Xh("local");tf(this,(function(){return xe().then((function(){return a.c&&"local"!=a.c.F?a.b.get(b,a.a):null})).then((function(t){if(t)return Jh(a,"local").then((function(){a.c=b}))}))}))};var Yh={name:"persistence",F:"session"};function Xh(a){return{name:"authUser",F:a}}function Qh(a,b){return tf(a,(function(){return a.b.set(a.c,b.v(),a.a)}))}function $h(a){return tf(a,(function(){return oc(a.b,a.c,a.a)}))}function Zh(a,b){return tf(a,(function(){return a.b.get(a.c,a.a).then((function(t){return t&&b&&(t.authDomain=b),Gh(t||{})}))}))}function tf(a,b){return a.f=a.f.then(b,b),a.f}function ef(a){if(this.l=!1,ei(this,"settings",new Jc),ei(this,"app",a),!hf(this).options||!hf(this).options.apiKey)throw new u("invalid-api-key");a=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION):null,this.b=new ta(hf(this).options&&hf(this).options.apiKey,M(C),a),this.P=[],this.m=[],this.O=[],this.$b=r.a.INTERNAL.createSubscribe(S(this.xc,this)),this.W=void 0,this.ac=r.a.INTERNAL.createSubscribe(S(this.yc,this)),uf(this,null),this.i=new Wh(hf(this).options.apiKey+":"+hf(this).name),this.B=new zh(hf(this).options.apiKey+":"+hf(this).name),this.Z=df(this,function(a){var b=hf(a).options.authDomain,t=function(a){var b=function(a,b){return a.b.get(Hh,a.a).then((function(t){return t&&b&&(t.authDomain=b),Gh(t||{})}))}(a.B,hf(a).options.authDomain).then((function(t){return(a.D=t)&&(t.ga=a.B),Kh(a.B)}));return df(a,b)}(a).then((function(){return Zh(a.i,b)})).then((function(t){return t?(t.ga=a.B,a.D&&(a.D.fa||null)==(t.fa||null)?t:t.reload().then((function(){return Qh(a.i,t).then((function(){return t}))})).o((function(e){return"auth/network-request-failed"==e.code?t:$h(a.i)}))):null})).then((function(t){uf(a,t||null)}));return df(a,t)}(this)),this.h=df(this,function(a){return a.Z.then((function(){return sf(a)})).o((function(){})).then((function(){if(!a.l)return a.oa()})).o((function(){})).then((function(){if(!a.l){a.aa=!0;var b=a.i;b.b.addListener(Xh("local"),b.a,a.oa)}}))}(this)),this.aa=!1,this.oa=S(this.Xc,this),this.Ma=S(this.ca,this),this.xa=S(this.jc,this),this.ya=S(this.uc,this),this.za=S(this.vc,this),this.a=null,function(a){var b=hf(a).options.authDomain,t=hf(a).options.apiKey;b&&Ur()&&(a.Zb=a.Z.then((function(){if(!a.l){if(a.a=qc(b,t,hf(a).name),Cc(a.a,a),ff(a)&&Ah(ff(a)),a.D){Ah(a.D);var e=a.D;e.va(a.ja()),mh(e,a),gh(e=a.D,a.N),wh(e,a),a.D=null}return a.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.Ec,this),this.s=0,An.call(this),function(a){Object.defineProperty(a,"lc",{get:function(){return this.ja()},set:function(b){this.va(b)},enumerable:!1}),a.$=null,Object.defineProperty(a,"ti",{get:function(){return this.S()},set:function(b){this.ub(b)},enumerable:!1}),a.R=null}(this),this.N=[]}function nf(a){nn.call(this,"languageCodeChanged"),this.g=a}function rf(a){nn.call(this,"frameworkChanged"),this.c=a}function of(a){return a.Zb||Le(new u("auth-domain-config-required"))}function sf(a){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));var b=of(a).then((function(){return a.a.pa()})).then((function(t){return t?ri(t):null}));return df(a,b)}function af(a,b){var t={};return t.apiKey=hf(a).options.apiKey,t.authDomain=hf(a).options.authDomain,t.appName=hf(a).name,a.Z.then((function(){return function(a,b,t,e){var n=new yh(a,b);return t&&(n.ga=t),e&&gh(n,e),n.reload().then((function(){return n}))}(t,b,a.B,a.Ea())})).then((function(t){return ff(a)&&t.uid==ff(a).uid?(Ph(ff(a),t),a.ca(t)):(uf(a,t),Ah(t),a.ca(t))})).then((function(){pf(a)}))}function uf(a,b){ff(a)&&(function(a,b){et(a.R,(function(t){return t==b}))}(ff(a),a.Ma),td(ff(a),"tokenChanged",a.xa),td(ff(a),"userDeleted",a.ya),td(ff(a),"userInvalidated",a.za),Eh(ff(a))),b&&(b.R.push(a.Ma),dn(b,"tokenChanged",a.xa),dn(b,"userDeleted",a.ya),dn(b,"userInvalidated",a.za),0<a.s&&Ih(b)),ei(a,"currentUser",b),b&&(b.va(a.ja()),mh(b,a),gh(b,a.N),wh(b,a))}function cf(a,b){var t=null,e=null;return df(a,b.then((function(n){return t=Ho(n),e=no(n),af(a,n)}),(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=em(t.v(),a,S(a.ic,a))),e||t})).then((function(){return ri({user:ff(a),credential:t,additionalUserInfo:e,operationType:"signIn"})})))}function hf(a){return a.app}function ff(a){return a.currentUser}function lf(a){return ff(a)&&ff(a)._lat||null}function pf(a){if(a.aa){for(var b=0;b<a.m.length;b++)a.m[b]&&a.m[b](lf(a));if(a.W!==a.getUid()&&a.O.length)for(a.W=a.getUid(),b=0;b<a.O.length;b++)a.O[b]&&a.O[b](lf(a))}}function df(a,b){return a.P.push(b),b.ma((function(){tt(a.P,b)})),b}function vf(){}function yf(){this.a={},this.b=1e12}Wh.prototype.tb=function(a){var b=null,t=this;return function(a){var b=new u("invalid-persistence-type"),t=new u("unsupported-persistence-type");t:{for(e in tc)if(tc[e]==a){var e=!0;break t}e=!1}if(!e||"string"!=typeof a)throw b;switch(Sr()){case"ReactNative":if("session"===a)throw t;break;case"Node":if("none"!==a)throw t;break;default:if(!Mr()&&"none"!==a)throw t}}(a),tf(this,(function(){return a!=t.c.F?t.b.get(t.c,t.a).then((function(e){return b=e,Jh(t,a)})).then((function(){if(t.c=Xh(a),b)return t.b.set(t.c,b,t.a)})):xe()}))},D(ef,An),D(nf,nn),D(rf,nn),(e=ef.prototype).tb=function(a){return df(this,a=this.i.tb(a))},e.va=function(a){this.$===a||this.l||(this.$=a,aa(this.b,this.$),this.dispatchEvent(new nf(this.ja())))},e.ja=function(){return this.$},e.dd=function(){var a=l.navigator;this.va(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},e.Ec=function(a){this.N.push(a),ua(this.b,r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,this.N):null),this.dispatchEvent(new rf(this.N))},e.Ea=function(){return it(this.N)},e.ub=function(a){this.R===a||this.l||(this.R=a,this.b.b=this.R)},e.S=function(){return this.R},e.toJSON=function(){return{apiKey:hf(this).options.apiKey,authDomain:hf(this).options.authDomain,appName:hf(this).name,currentUser:ff(this)&&ff(this).v()}},e.Cb=function(a,b){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==b&&!!this.f;default:return!1}},e.la=function(a,b,t,e){"signInViaPopup"==a&&this.g==e&&(t&&this.w?this.w(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(a,b){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.g==b&&this.f?S(this.gc,this):null},e.gc=function(a,b,t,e){var n=this,r={requestUri:a,postBody:e,sessionId:b,tenantId:t};return this.c&&(this.c.cancel(),this.c=null),n.Z.then((function(){return cf(n,Ea(n.b,r))}))},e.Vc=function(a){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));var b=this,t=eo(a.providerId),e=zr(),n=null;(!Vr()||Ar())&&hf(this).options.authDomain&&a.isOAuthProvider&&(n=bu(hf(this).options.authDomain,hf(this).options.apiKey,hf(this).name,"signInViaPopup",a,null,e,r.a.SDK_VERSION||null,null,null,this.S()));var o=wr(n,t&&t.ta,t&&t.sa);return df(this,t=of(this).then((function(g){return Mc(g,o,"signInViaPopup",a,e,!!n,b.S())})).then((function(){return new Se((function(g,t){b.la("signInViaPopup",null,new u("cancelled-popup-request"),b.g),b.f=g,b.w=t,b.g=e,b.c=Fc(b.a,b,"signInViaPopup",o,e)}))})).then((function(g){return o&&gr(o),g?ri(g):null})).o((function(g){throw o&&gr(o),g})))},e.Wc=function(a){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));var b=this;return df(this,of(this).then((function(){return function(a){return tf(a,(function(){return a.b.set(Yh,a.c.F,a.a)}))}(b.i)})).then((function(){return jc(b.a,"signInViaRedirect",a,void 0,b.S())})))},e.pa=function(){var a=this;return sf(this).then((function(b){return a.a&&zc(a.a.b),b})).o((function(b){throw a.a&&zc(a.a.b),b}))},e.bd=function(a){if(!a)return Le(new u("null-user"));if(this.R!=a.tenantId)return Le(new u("tenant-id-mismatch"));var b=this,t={};t.apiKey=hf(this).options.apiKey,t.authDomain=hf(this).options.authDomain,t.appName=hf(this).name;var e=function(a,b,t,e){var n=a.b,r={};return r[na]=n.b&&n.b.toString(),r.refreshToken=n.a,b=new yh(b||{apiKey:a.l,authDomain:a.s,appName:a.m},r),t&&(b.ga=t),e&&gh(b,e),Ph(b,a),b}(a,t,b.B,b.Ea());return df(this,this.h.then((function(){if(hf(b).options.apiKey!=a.l)return e.reload()})).then((function(){return ff(b)&&a.uid==ff(b).uid?(Ph(ff(b),a),b.ca(a)):(uf(b,e),Ah(e),b.ca(e))})).then((function(){pf(b)})))},e.wb=function(){var a=this;return df(this,this.h.then((function(){return a.a&&zc(a.a.b),ff(a)?(uf(a,null),$h(a.i).then((function(){pf(a)}))):xe()})))},e.Xc=function(){var a=this;return Zh(this.i,hf(this).options.authDomain).then((function(b){if(!a.l){var t;if(t=ff(a)&&b){t=ff(a).uid;var e=b.uid;t=null!=t&&""!==t&&null!=e&&""!==e&&t==e}if(t)return Ph(ff(a),b),ff(a).I();(ff(a)||b)&&(uf(a,b),b&&(Ah(b),b.ga=a.B),a.a&&Cc(a.a,a),pf(a))}}))},e.ca=function(a){return Qh(this.i,a)},e.jc=function(){pf(this),this.ca(ff(this))},e.uc=function(){this.wb()},e.vc=function(){this.wb()},e.ic=function(a){var b=this;return this.h.then((function(){return cf(b,xe(a))}))},e.xc=function(a){var b=this;this.addAuthTokenListener((function(){a.next(ff(b))}))},e.yc=function(a){var b=this;!function(a,b){a.O.push(b),df(a,a.h.then((function(){!a.l&&Z(a.O,b)&&a.W!==a.getUid()&&(a.W=a.getUid(),b(lf(a)))})))}(this,(function(){a.next(ff(b))}))},e.Gc=function(a,b,t){var e=this;return this.aa&&Promise.resolve().then((function(){I(a)?a(ff(e)):I(a.next)&&a.next(ff(e))})),this.$b(a,b,t)},e.Fc=function(a,b,t){var e=this;return this.aa&&Promise.resolve().then((function(){e.W=e.getUid(),I(a)?a(ff(e)):I(a.next)&&a.next(ff(e))})),this.ac(a,b,t)},e.kc=function(a){var b=this;return df(this,this.h.then((function(){return ff(b)?ff(b).I(a).then((function(t){return{accessToken:t}})):null})))},e.Rc=function(a){var b=this;return this.h.then((function(){return cf(b,ou(b.b,Za,{token:a}))})).then((function(t){var e=t.user;return Ch(e,"isAnonymous",!1),b.ca(e),t}))},e.Sc=function(a,b){var t=this;return this.h.then((function(){return cf(t,ou(t.b,tu,{email:a,password:b}))}))},e.cc=function(a,b){var t=this;return this.h.then((function(){return cf(t,ou(t.b,ka,{email:a,password:b}))}))},e.Ya=function(a){var b=this;return this.h.then((function(){return cf(b,a.ia(b.b))}))},e.Qc=function(a){return Zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(a)},e.vb=function(){var a=this;return this.h.then((function(){var b=ff(a);if(b&&b.isAnonymous){var t=ri({providerId:null,isNewUser:!1});return ri({user:b,credential:null,additionalUserInfo:t,operationType:"signIn"})}return cf(a,a.b.vb()).then((function(t){var e=t.user;return Ch(e,"isAnonymous",!0),a.ca(e),t}))}))},e.getUid=function(){return ff(this)&&ff(this).uid||null},e.bc=function(a){this.addAuthTokenListener(a),this.s++,0<this.s&&ff(this)&&Ih(ff(this))},e.Nc=function(a){var b=this;Y(this.m,(function(t){t==a&&b.s--})),0>this.s&&(this.s=0),0==this.s&&ff(this)&&Eh(ff(this)),this.removeAuthTokenListener(a)},e.addAuthTokenListener=function(a){var b=this;this.m.push(a),df(this,this.h.then((function(){b.l||Z(b.m,a)&&a(lf(b))})))},e.removeAuthTokenListener=function(a){et(this.m,(function(b){return b==a}))},e.delete=function(){this.l=!0;for(var a=0;a<this.P.length;a++)this.P[a].cancel("app-deleted");return this.P=[],this.i&&(a=this.i).b.removeListener(Xh("local"),a.a,this.oa),this.a&&(Pc(this.a,this),zc(this.a.b)),Promise.resolve()},e.fc=function(a){return df(this,function(a,b){return ou(a,Oa,{identifier:b,continueUri:jr()?vr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,a))},e.zc=function(a){return!!Fo(a)},e.sb=function(a,b){var t=this;return df(this,xe().then((function(){var t=new Mi(b);if(!t.c)throw new u("argument-error",Fi+" must be true when sending sign in link to email");return Ki(t)})).then((function(e){return t.b.sb(a,e)})).then((function(){})))},e.fd=function(a){return this.Pa(a).then((function(b){return b.data.email}))},e.jb=function(a,b){return df(this,this.b.jb(a,b).then((function(){})))},e.Pa=function(a){return df(this,this.b.Pa(a).then((function(b){return new pi(b)})))},e.fb=function(a){return df(this,this.b.fb(a).then((function(){})))},e.rb=function(a,b){var t=this;return df(this,xe().then((function(){return void 0===b||It(b)?{}:Ki(new Mi(b))})).then((function(e){return t.b.rb(a,e)})).then((function(){})))},e.Uc=function(a,b){return df(this,Xc(this,a,b,S(this.Ya,this)))},e.Tc=function(a,b){var t=this;return df(this,xe().then((function(){var e=b||vr(),n=jo(a,e);if(!(e=Fo(e)))throw new u("argument-error","Invalid email link!");if(e.tenantId!==t.S())throw new u("tenant-id-mismatch");return t.Ya(n)})))},vf.prototype.render=function(){},vf.prototype.reset=function(){},vf.prototype.getResponse=function(){},vf.prototype.execute=function(){};var mf=null;function gf(a,b){return(b=wf(b))&&a.a[b]||null}function wf(a){return(a=void 0===a?1e12:a)?a.toString():null}function bf(a,b){this.g=!1,this.c=b,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=pe(a);var t=this;this.i=function(){t.execute()},this.h?this.execute():dn(this.f,"click",this.i)}function If(a){if(a.g)throw Error("reCAPTCHA mock was already deleted!")}function Ef(){}function _f(){}yf.prototype.render=function(a,b){return this.a[this.b.toString()]=new bf(a,b),this.b++},yf.prototype.reset=function(a){var b=gf(this,a);a=wf(a),b&&a&&(b.delete(),delete this.a[a])},yf.prototype.getResponse=function(a){return(a=gf(this,a))?a.getResponse():null},yf.prototype.execute=function(a){(a=gf(this,a))&&a.execute()},bf.prototype.getResponse=function(){return If(this),this.b},bf.prototype.execute=function(){If(this);var a=this;this.a||(this.a=setTimeout((function(){a.b=function(){for(var a=50,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}();var b=a.c.callback,t=a.c["expired-callback"];if(b)try{b(a.b)}catch(t){}a.a=setTimeout((function(){if(a.a=null,a.b=null,t)try{t()}catch(t){}a.h&&a.execute()}),6e4)}),500))},bf.prototype.delete=function(){If(this),this.g=!0,clearTimeout(this.a),this.a=null,td(this.f,"click",this.i)},ei(Ef,"FACTOR_ID","phone"),_f.prototype.g=function(){return mf||(mf=new yf),xe(mf)},_f.prototype.c=function(){};var Tf=null;function Af(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nf=new Nt(Ot,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sf=new Wr(3e4,6e4);Af.prototype.g=function(a){var b=this;return new Se((function(t,e){var n=setTimeout((function(){e(new u("network-request-failed"))}),Sf.get());!l.grecaptcha||a!==b.f&&!b.b?(l[b.a]=function(){if(l.grecaptcha){b.f=a;var g=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=g(t,e),b.b++,t},clearTimeout(n),t(l.grecaptcha)}else clearTimeout(n),e(new u("internal-error"));delete l[b.a]},xe(Ws(Pt(Nf,{onload:b.a,hl:a||""}))).o((function(){clearTimeout(n),e(new u("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(n),t(l.grecaptcha))}))},Af.prototype.c=function(){this.b--};var kf=null;function Of(a,b,t,e,n,r,g){if(ei(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=b,this.g=null,g?(Tf||(Tf=new _f),g=Tf):(kf||(kf=new Af),g=kf),this.m=g,this.a=t||{theme:"light",type:"image"},this.h=[],this.a[Cf])throw new u("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Pf],!l.document)throw new u("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!pe(b)||!this.i&&pe(b).hasChildNodes())throw new u("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ta(a,r||null,n||null),this.w=e||function(){return null};var o=this;this.l=[];var c=this.a[Df];this.a[Df]=function(t){if(xf(o,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Lr(c,l);"function"==typeof e&&e(t)}};var p=this.a[Rf];this.a[Rf]=function(){if(xf(o,null),"function"==typeof p)p();else if("string"==typeof p){var t=Lr(p,l);"function"==typeof t&&t()}}}var Df="callback",Rf="expired-callback",Cf="sitekey",Pf="size";function xf(a,b){for(var t=0;t<a.l.length;t++)try{a.l[t](b)}catch(t){}}function Lf(a,b){return a.h.push(b),b.ma((function(){tt(a.h,b)})),b}function Mf(a){if(a.D)throw new u("internal-error","RecaptchaVerifier instance has been destroyed.")}function Uf(a,b,t){var e=!1;try{this.b=t||r.a.app()}catch(t){throw new u("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new u("invalid-api-key");t=this.b.options.apiKey;var n=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{e=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,o):null,Of.call(this,t,a,b,(function(){try{var g=n.b.auth().ja()}catch(t){g=null}return g}),o,M(C),e)}function jf(a,b,t,e){t:{t=Array.prototype.slice.call(t);for(var n=0,r=!1,g=0;g<b.length;g++)if(b[g].optional)r=!0;else{if(r)throw new u("internal-error","Argument validator encountered a required argument after an optional argument.");n++}if(r=b.length,t.length<n||r<t.length)e="Expected "+(n==r?1==n?"1 argument":n+" arguments":n+"-"+r+" arguments")+" but got "+t.length+".";else{for(n=0;n<t.length;n++)if(r=b[n].optional&&void 0===t[n],!b[n].K(t[n])&&!r){if(b=b[n],0>n||n>=Ff.length)throw new u("internal-error","Argument validator received an unsupported number of arguments.");t=Ff[n],e=(e?"":t+" argument ")+(b.name?'"'+b.name+'" ':"")+"must be "+b.J+".";break t}e=null}}if(e)throw new u("argument-error",a+" failed: "+e)}(e=Of.prototype).Ga=function(){var a=this;return this.f?this.f:this.f=Lf(this,xe().then((function(){if(jr()&&!Nr())return _r();throw new u("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return a.m.g(a.w())})).then((function(b){return a.g=b,ou(a.s,Ba,{})})).then((function(b){a.a[Cf]=b.recaptchaSiteKey})).o((function(b){throw a.f=null,b})))},e.render=function(){Mf(this);var a=this;return Lf(this,this.Ga().then((function(){if(null===a.c){var b=a.u;if(!a.i){var t=pe(b);b=function(a,b,t){var e=arguments,n=document,r=String(e[0]),g=e[1];if(!le&&g&&(g.name||g.type)){if(r=["<",r],g.name&&r.push(' name="',Xt(g.name),'"'),g.type){r.push(' type="',Xt(g.type),'"');var o={};Tt(o,g),delete o.type,g=o}r.push(">"),r=r.join("")}return r=we(n,r),g&&("string"==typeof g?r.className=g:Array.isArray(g)?r.className=g.join(" "):de(r,g)),2<e.length&&ge(n,r,e),r}("DIV"),t.appendChild(b)}a.c=a.g.render(b,a.a)}return a.c})))},e.verify=function(){Mf(this);var a=this;return Lf(this,this.render().then((function(b){return new Se((function(t){var e=a.g.getResponse(b);if(e)t(e);else{var n=function(e){e&&(function(a,b){et(a.l,(function(t){return t==b}))}(a,n),t(e))};a.l.push(n),a.i&&a.g.execute(a.c)}}))})))},e.reset=function(){Mf(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Mf(this),this.D=!0,this.m.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){a=pe(this.u);for(var b;b=a.firstChild;)a.removeChild(b)}},D(Uf,Of);var Ff="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Vf(a,b){return{name:a||"",J:"a valid string",optional:!!b,K:function(t){return"string"==typeof t}}}function qf(a,b){return{name:a||"",J:"a boolean",optional:!!b,K:function(t){return"boolean"==typeof t}}}function Bf(a,b){return{name:a||"",J:"a valid object",optional:!!b,K:q}}function Gf(a,b){return{name:a||"",J:"a function",optional:!!b,K:I}}function zf(a,b){return{name:a||"",J:"null",optional:!!b,K:function(t){return null===t}}}function Hf(a){return{name:a?a+"Credential":"credential",J:a?"a valid "+a+" credential":"a valid credential",optional:!1,K:function(b){if(!b)return!1;var t=!a||b.providerId===a;return!(!b.ia||!t)}}}function Kf(a,b){return q(a)&&"string"==typeof a.type&&a.type===b&&I(a.Fa)}function Wf(a){return q(a)&&"string"==typeof a.uid}function Jf(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(a){return!(!a||"string"!=typeof a.type||!I(a.verify))}}}function Yf(a,b,t,e){return{name:t||"",J:a.J+" or "+b.J,optional:!!e,K:function(t){return a.K(t)||b.K(t)}}}function Xf(a,b){for(var t in b){var e=b[t].name;a[e]=Zf(e,a[t],b[t].j)}}function Qf(a,b){for(var t in b){var e=b[t].name;e!==t&&Object.defineProperty(a,e,{get:k((function(t){return this[t]}),t),set:k((function(t,e,g,n){jf(t,[g],[n],!0),this[e]=n}),e,t,b[t].gb),enumerable:!0})}}function $f(a,b,t,e){a[b]=Zf(b,t,e)}function Zf(a,b,t){function e(){var g=Array.prototype.slice.call(arguments);return jf(r,t,g),b.apply(this,g)}if(!t)return b;var n,r=function(a){return(a=a.split("."))[a.length-1]}(a);for(n in b)e[n]=b[n];for(n in b.prototype)e.prototype[n]=b.prototype[n];return e}Xf(ef.prototype,{fb:{name:"applyActionCode",j:[Vf("code")]},Pa:{name:"checkActionCode",j:[Vf("code")]},jb:{name:"confirmPasswordReset",j:[Vf("code"),Vf("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Vf("email"),Vf("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Vf("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Vf("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Yf(Bf(),Gf(),"nextOrObserver"),Gf("opt_error",!0),Gf("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Yf(Bf(),Gf(),"nextOrObserver"),Gf("opt_error",!0),Gf("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Vf("email"),Yf(Bf("opt_actionCodeSettings",!0),zf(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Vf("email"),Bf("actionCodeSettings")]},tb:{name:"setPersistence",j:[Vf("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Hf()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Hf()]},Rc:{name:"signInWithCustomToken",j:[Vf("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Vf("email"),Vf("password")]},Tc:{name:"signInWithEmailLink",j:[Vf("email"),Vf("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Vf("phoneNumber"),Jf()]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Yf({name:"user",J:"an instance of Firebase User",optional:!1,K:function(b){return!!(b&&b instanceof yh)}},zf(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Vf(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Vf("code")]}}),Qf(ef.prototype,{lc:{name:"languageCode",gb:Yf(Vf(),zf(),"languageCode")},ti:{name:"tenantId",gb:Yf(Vf(),zf(),"tenantId")}}),ef.Persistence=tc,ef.Persistence.LOCAL="local",ef.Persistence.SESSION="session",ef.Persistence.NONE="none",Xf(yh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[qf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qf("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Hf()]},mb:{name:"linkWithCredential",j:[Hf()]},Bc:{name:"linkWithPhoneNumber",j:[Vf("phoneNumber"),Jf()]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Hf()]},pb:{name:"reauthenticateWithCredential",j:[Hf()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Vf("phoneNumber"),Jf()]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Yf(Bf("opt_actionCodeSettings",!0),zf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Vf(null,!0)]},ad:{name:"unlink",j:[Vf("provider")]},xb:{name:"updateEmail",j:[Vf("email")]},yb:{name:"updatePassword",j:[Vf("password")]},cd:{name:"updatePhoneNumber",j:[Hf("phone")]},zb:{name:"updateProfile",j:[Bf("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Vf("email"),Yf(Bf("opt_actionCodeSettings",!0),zf(null,!0),"opt_actionCodeSettings",!0)]}}),Xf(yf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xf(vf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xf(Se.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qf(Jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:qf("appVerificationDisabledForTesting")}}),Xf(Yc.prototype,{confirm:{name:"confirm",j:[Vf("verificationCode")]}}),$f(yo,"fromJSON",(function(a){a="string"==typeof a?JSON.parse(a):a;for(var b,t=[_o,Mo,qo,bo],e=0;e<t.length;e++)if(b=t[e](a))return b;return null}),[Yf(Vf(),Bf(),"json")]),$f(Uo,"credential",(function(a,b){return new Lo(a,b)}),[Vf("email"),Vf("password")]),Xf(Lo.prototype,{v:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(So.prototype,{Aa:{name:"addScope",j:[Vf("scope")]},Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),$f(So,"credential",ko,[Yf(Vf(),Bf(),"token")]),$f(Uo,"credentialWithLink",jo,[Vf("email"),Vf("emailLink")]),Xf(Oo.prototype,{Aa:{name:"addScope",j:[Vf("scope")]},Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),$f(Oo,"credential",Do,[Yf(Vf(),Bf(),"token")]),Xf(Ro.prototype,{Aa:{name:"addScope",j:[Vf("scope")]},Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),$f(Ro,"credential",Co,[Yf(Vf(),Yf(Bf(),zf()),"idToken"),Yf(Vf(),zf(),"accessToken",!0)]),Xf(Po.prototype,{Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),$f(Po,"credential",xo,[Yf(Vf(),Bf(),"token"),Vf("secret",!0)]),Xf(No.prototype,{Aa:{name:"addScope",j:[Vf("scope")]},credential:{name:"credential",j:[Yf(Vf(),Yf(Bf(),zf()),"optionsOrIdToken"),Yf(Vf(),zf(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Bf("customOAuthParameters")]}}),Xf(Io.prototype,{v:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(go.prototype,{v:{name:"toJSON",j:[Vf(null,!0)]}}),$f(Go,"credential",zo,[Vf("verificationId"),Vf("verificationCode")]),Xf(Go.prototype,{cb:{name:"verifyPhoneNumber",j:[Yf(Vf(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Kf(t.session,po)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Kf(t.session,vo)&&Wf(t.multiFactorHint):t.session&&t.multiFactorUid?Kf(t.session,vo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Jf()]}}),Xf(Vo.prototype,{v:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(u.prototype,{toJSON:{name:"toJSON",j:[Vf(null,!0)]}}),Xf($o.prototype,{toJSON:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(th.prototype,{toJSON:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(nh.prototype,{toJSON:{name:"toJSON",j:[Vf(null,!0)]}}),Xf($c.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(a){return!!a&&!!a.ob}}]}}),Xf(ah.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(a){return!!a&&!!a.ob}},Vf("displayName",!0)]},$c:{name:"unenroll",j:[Yf({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Wf},Vf(),"multiFactorInfoIdentifier")]}}),Xf(Uf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),$f(Si,"parseLink",Li,[Vf("link")]),$f(Ef,"assertion",(function(a){return new oh(a)}),[Hf("phone")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:vi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:di,VERIFY_AND_CHANGE_EMAIL:yi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ef,AuthCredential:yo,Error:u};$f(a,"EmailAuthProvider",Uo,[]),$f(a,"FacebookAuthProvider",So,[]),$f(a,"GithubAuthProvider",Oo,[]),$f(a,"GoogleAuthProvider",Ro,[]),$f(a,"TwitterAuthProvider",Po,[]),$f(a,"OAuthProvider",No,[Vf("providerId")]),$f(a,"SAMLAuthProvider",Ao,[Vf("providerId")]),$f(a,"PhoneAuthProvider",Go,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(a){return!!(a&&a instanceof ef)}}]),$f(a,"RecaptchaVerifier",Uf,[Yf(Vf(),{name:"",J:"an HTML element",optional:!1,K:function(a){return!!(a&&a instanceof Element)}},"recaptchaContainer"),Bf("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(a){return!!(a&&a instanceof r.a.app.App)}}]),$f(a,"ActionCodeURL",Si,[]),$f(a,"PhoneMultiFactorGenerator",Ef,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(b){return new ef(b=b.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:a,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(b){return{getUid:S((b=b.getProvider("auth").getImmediate()).getUid,b),getToken:S(b.kc,b),addAuthTokenListener:S(b.bc,b),removeAuthTokenListener:S(b.Nc,b)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.14.1"),r.a.INTERNAL.extendNamespace({User:yh})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(20))},426:function(t,e,n){"use strict";var r,o=(r=n(505))&&"object"==typeof r&&"default"in r?r.default:r;o.registerVersion("firebase","7.13.1","app"),t.exports=o},478:function(t,e,n){"use strict";n(1e3)},479:function(t,e,n){"use strict";n(1003)},505:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o,c=n(997),h=n(506),component=n(556),f=n(557),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),d=new h.ErrorFactory("app","Firebase",l),v=((o={})["@firebase/app"]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),y=new f.Logger("@firebase/app"),m=function(){function t(t,e,n){var r,o,f=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=h.deepCopy(t),this.container=new component.ComponentContainer(e.name),this._addComponent(new component.Component("app",(function(){return f}),"PUBLIC"));try{for(var l=c.__values(this.firebase_.INTERNAL.components.values()),d=l.next();!d.done;d=l.next()){var v=d.value;this._addComponent(v)}}catch(t){r={error:t}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(component){try{this.container.addComponent(component)}catch(t){y.debug("Component "+component.name+" failed to register with FirebaseApp "+this.name,t)}},t.prototype._addOrOverwriteComponent=function(component){this.container.addOrOverwriteComponent(component)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw d.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var w=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={});if("object"!=typeof o||null===o){o={name:o}}var c=o;void 0===c.name&&(c.name="[DEFAULT]");var f=c.name;if("string"!=typeof f||!f)throw d.create("bad-app-name",{appName:String(f)});if(h.contains(e,f))throw d.create("duplicate-app",{appName:f});var l=new t(n,c,r);return e[f]=l,l},app:o,registerVersion:function(t,e,n){var r,o=null!==(r=v[t])&&void 0!==r?r:t;n&&(o+="-"+n);var c=o.match(/\s|\//),h=e.match(/\s|\//);if(c||h){var f=['Unable to register library "'+o+'" with version "'+e+'":'];return c&&f.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),c&&h&&f.push("and"),h&&f.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void y.warn(f.join(" "))}l(new component.Component(o+"-version",(function(){return{library:o,version:e}}),"VERSION"))},setLogLevel:f.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw d.create("invalid-log-argument",{appName:name});f.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.12.0",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function o(t){if(t=t||"[DEFAULT]",!h.contains(e,t))throw d.create("no-app",{appName:t});return e[t]}function l(component){var f,l,v=component.name;if(n.has(v))return y.debug("There were multiple attempts to register component "+v+"."),"PUBLIC"===component.type?r[v]:null;if(n.set(v,component),"PUBLIC"===component.type){var m=function(t){if(void 0===t&&(t=o()),"function"!=typeof t[v])throw d.create("invalid-app-argument",{appName:v});return t[v]()};void 0!==component.serviceProps&&h.deepExtend(m,component.serviceProps),r[v]=m,t.prototype[v]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,v);return n.apply(this,component.multipleInstances?t:[])}}try{for(var w=c.__values(Object.keys(e)),I=w.next();!I.done;I=w.next()){var E=I.value;e[E]._addComponent(component)}}catch(t){f={error:t}}finally{try{I&&!I.done&&(l=w.return)&&l.call(w)}finally{if(f)throw f.error}}return"PUBLIC"===component.type?r[v]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),o.App=t,r}(m);return e.INTERNAL=c.__assign(c.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){h.deepExtend(e,t)},createSubscribe:h.createSubscribe,ErrorFactory:h.ErrorFactory,deepExtend:h.deepExtend}),e}(),I=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var component=t.getComponent();return"VERSION"===(null==component?void 0:component.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(h.isBrowser()&&void 0!==self.firebase){y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var E=self.firebase.SDK_VERSION;E&&E.indexOf("LITE")>=0&&y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=w.initializeApp;w.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h.isNode()&&y.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),_.apply(void 0,t)};var T=w;!function(t,e){t.INTERNAL.registerComponent(new component.Component("platform-logger",(function(t){return new I(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.0",e),t.registerVersion("fire-js","")}(T),e.default=T,e.firebase=T},506:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(998),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(t,e){if(!t)throw h(e)},h=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},f=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):55296==(64512&n)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,t){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,h=c?input[i+2]:0,f=n>>2,l=(3&n)<<4|o>>4,d=(15&o)<<2|h>>6,v=63&h;c||(v=64,r||(d=64)),output.push(e[f],e[l],e[d],e[v])}return output.join("")},encodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(input):this.encodeByteArray(f(input),t)},decodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(input):function(t){for(var e=[],n=0,r=0;n<t.length;){var o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=t[n++];e[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=t[n++]))<<12|(63&(h=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{c=t[n++];var h=t[n++];e[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&h)}}return e.join("")}(this.decodeStringToByteArray(input,t))},decodeStringToByteArray:function(input,t){this.init_();for(var e=t?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=e[input.charAt(i++)],r=i<input.length?e[input.charAt(i)]:0,o=++i<input.length?e[input.charAt(i)]:64,c=++i<input.length?e[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var h=n<<2|r>>4;if(output.push(h),64!==o){var f=r<<4&240|o>>2;if(output.push(f),64!==c){var l=o<<6&192|c;output.push(l)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},d=function(t){try{return l.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function v(t,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return source}for(var e in source)source.hasOwnProperty(e)&&(t[e]=v(t[e],source[e]));return t}var y=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w=function(t){function e(code,n){var r=t.call(this,n)||this;return r.code=code,r.name="FirebaseError",Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,I.prototype.create),r}return r.__extends(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(code){for(var data=[],t=1;t<arguments.length;t++)data[t-1]=arguments[t];for(var e=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?E(template,e):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new w(n,o),h=0,f=Object.keys(e);h<f.length;h++){var l=f[h];"_"!==l.slice(-1)&&(l in c&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),c[l]=e[l])}return c},t}();function E(template,data){return template.replace(_,(function(t,e){var n=data[e];return null!=n?n.toString():"<"+e+"?>"}))}var _=/\{\$([^}]+)}/g;function T(t){return JSON.parse(t)}var A=function(t){var header={},e={},data={},n="";try{var r=t.split(".");header=T(d(r[0])||""),e=T(d(r[1])||""),n=r[2],data=e.d||{},delete e.d}catch(t){}return{header:header,claims:e,data:data,signature:n}};var N=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],h=this.chain_[2],f=this.chain_[3],l=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=f^b&(h^f),c=1518500249):(o=b^h^f,c=1859775393):i<60?(o=b&h|f&(b|h),c=2400959708):(o=b^h^f,c=3395469782);r=(a<<5|a>>>27)+o+l+c+n[i]&4294967295;l=f,f=h,h=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<e;){if(0===c)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(o[c]=t.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<e;)if(o[c]=t[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t},t}();var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}})),this.observers.push(r),c},t.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,t)},t.prototype.sendOne=function(i,t){var e=this;this.task.then((function(){if(void 0!==e.observers&&void 0!==e.observers[i])try{t(e.observers[i])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function k(){}function O(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=t+" failed: ";return o+=r+" argument "}e.CONSTANTS=o,e.Deferred=y,e.ErrorFactory=I,e.FirebaseError=w,e.Sha1=N,e.assert=c,e.assertionError=h,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=l,e.base64Decode=d,e.base64Encode=function(t){var e=f(t);return l.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new S(t,e);return n.subscribe.bind(n)},e.decode=A,e.deepCopy=function(t){return v(void 0,t)},e.deepExtend=v,e.errorPrefix=O,e.getUA=m,e.isAdmin=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return m().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return m().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=A(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),o=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},e.issuedAtTime=function(t){var e=A(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=T,e.map=function(t,e,n){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,o=Object.entries(t);r<o.length;r++){var c=o[r];n(c[0],c[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var p=0,i=0;i<t.length;i++){var e=t.charCodeAt(i);e<128?p++:e<2048?p+=2:e>=55296&&e<=56319?(p+=4,i++):p+=3}return p},e.stringToByteArray=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;i++,c(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(t.charCodeAt(i)-56320)}n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):n<65536?(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},e.stringify=function(data){return JSON.stringify(data)},e.validateArgCount=function(t,e,n,r){var o;if(r<e?o="at least "+e:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(O(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(O(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(O(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(20))},556:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(999),o=n(506),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new o.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,o=e.optional,c=this.normalizeInstanceIdentifier(n);try{var h=this.getOrInitializeService(c);if(!h){if(o)return null;throw Error("Service "+this.name+" is not available")}return h}catch(t){if(o)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(component){var t,e;if(component.name!==this.name)throw Error("Mismatching Component "+component.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=component,function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var n=r.__values(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var c=r.__read(o.value,2),h=c[0],f=c[1],l=this.normalizeInstanceIdentifier(h);try{var d=this.getOrInitializeService(l);f.resolve(d)}catch(t){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var f=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(component){var t=this.getProvider(component.name);if(t.isComponentSet())throw new Error("Component "+component.name+" has already been registered with "+this.name);t.setComponent(component)},t.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=c,e.ComponentContainer=f,e.Provider=h},557:function(t,e,n){"use strict";function r(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}var o;n.r(e),n.d(e,"LogLevel",(function(){return c})),n.d(e,"Logger",(function(){return y})),n.d(e,"setLogLevel",(function(){return m})),n.d(e,"setUserLogHandler",(function(){return w}));var c,h=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(c||(c={}));var f={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},l=c.INFO,d=((o={})[c.DEBUG]="log",o[c.VERBOSE]="log",o[c.INFO]="info",o[c.WARN]="warn",o[c.ERROR]="error",o),v=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(e<t.logLevel)){var c=(new Date).toISOString(),h=d[e];if(!h)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[h].apply(console,r(["["+c+"]  "+t.name+":"],n))}},y=function(){function t(t){this.name=t,this._logLevel=l,this._logHandler=v,this._userLogHandler=null,h.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in c))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.DEBUG],t)),this._logHandler.apply(this,r([this,c.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.VERBOSE],t)),this._logHandler.apply(this,r([this,c.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.INFO],t)),this._logHandler.apply(this,r([this,c.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.WARN],t)),this._logHandler.apply(this,r([this,c.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.ERROR],t)),this._logHandler.apply(this,r([this,c.ERROR],t))},t}();function m(t){var e="string"==typeof t?f[t]:t;h.forEach((function(t){t.logLevel=e}))}function w(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=f[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var o=[],h=2;h<arguments.length;h++)o[h-2]=arguments[h];var f=o.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:c[n].toLowerCase(),message:f,args:o,type:e.name})}},r=0,o=h;r<o.length;r++){n(o[r])}}},997:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return E})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return R})),n.d(e,"__classPrivateFieldSet",(function(){return C}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function E(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},998:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return E})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return R})),n.d(e,"__classPrivateFieldSet",(function(){return C}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function E(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},999:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return E})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return R})),n.d(e,"__classPrivateFieldSet",(function(){return C}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function E(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}}]);